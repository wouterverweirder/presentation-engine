{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/es6-promise/dist/es6-promise.js","node_modules/isomorphic-fetch/fetch-npm-browserify.js","node_modules/process/browser.js","node_modules/whatwg-fetch/dist/fetch.umd.js","src/presentation/js/classes/MobileServerBridge.js","src/presentation/js/classes/NodeAppRunner.js","src/presentation/js/classes/Presentation.js","src/presentation/js/classes/SlideBridge.js","src/presentation/js/classes/live-code/CodeElement.js","src/presentation/js/classes/live-code/ConsoleElement.js","src/presentation/js/classes/live-code/TerminalElement.js","src/presentation/js/classes/live-code/WebPreviewElement.js","src/presentation/js/classes/live-code/WebcamElement.js","src/presentation/js/classes/live-code/index.js","src/presentation/js/script.js","src/server/classes/SlidesFolderParser.js","src/shared/js/Constants.js","src/shared/js/classes/ContentBase.js","src/shared/js/classes/MobileServerBridge.js","src/shared/js/classes/Presentation.js","src/shared/js/classes/SlideBridge.js","src/presentation/js/classes/live-code-slide/index.js","src/presentation/js/classes/video-slide/index.js","src/presentation/js/classes/webview-slide/index.js"],"names":[],"mappings":"AAAA;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AC/pCA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACxLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACnhBA;;;;AACA;;;;;;;;;;IAEqB,kB;;;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","file":"script.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","/*!\n * @overview es6-promise - a tiny implementation of Promises/A+.\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n * @license   Licensed under MIT license\n *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE\n * @version   v4.2.5+7f2b526d\n */\n\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.ES6Promise = factory());\n}(this, (function () { 'use strict';\n\nfunction objectOrFunction(x) {\n  var type = typeof x;\n  return x !== null && (type === 'object' || type === 'function');\n}\n\nfunction isFunction(x) {\n  return typeof x === 'function';\n}\n\n\n\nvar _isArray = void 0;\nif (Array.isArray) {\n  _isArray = Array.isArray;\n} else {\n  _isArray = function (x) {\n    return Object.prototype.toString.call(x) === '[object Array]';\n  };\n}\n\nvar isArray = _isArray;\n\nvar len = 0;\nvar vertxNext = void 0;\nvar customSchedulerFn = void 0;\n\nvar asap = function asap(callback, arg) {\n  queue[len] = callback;\n  queue[len + 1] = arg;\n  len += 2;\n  if (len === 2) {\n    // If len is 2, that means that we need to schedule an async flush.\n    // If additional callbacks are queued before the queue is flushed, they\n    // will be processed by this flush that we are scheduling.\n    if (customSchedulerFn) {\n      customSchedulerFn(flush);\n    } else {\n      scheduleFlush();\n    }\n  }\n};\n\nfunction setScheduler(scheduleFn) {\n  customSchedulerFn = scheduleFn;\n}\n\nfunction setAsap(asapFn) {\n  asap = asapFn;\n}\n\nvar browserWindow = typeof window !== 'undefined' ? window : undefined;\nvar browserGlobal = browserWindow || {};\nvar BrowserMutationObserver = browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver;\nvar isNode = typeof self === 'undefined' && typeof process !== 'undefined' && {}.toString.call(process) === '[object process]';\n\n// test for web worker but not in IE10\nvar isWorker = typeof Uint8ClampedArray !== 'undefined' && typeof importScripts !== 'undefined' && typeof MessageChannel !== 'undefined';\n\n// node\nfunction useNextTick() {\n  // node version 0.10.x displays a deprecation warning when nextTick is used recursively\n  // see https://github.com/cujojs/when/issues/410 for details\n  return function () {\n    return process.nextTick(flush);\n  };\n}\n\n// vertx\nfunction useVertxTimer() {\n  if (typeof vertxNext !== 'undefined') {\n    return function () {\n      vertxNext(flush);\n    };\n  }\n\n  return useSetTimeout();\n}\n\nfunction useMutationObserver() {\n  var iterations = 0;\n  var observer = new BrowserMutationObserver(flush);\n  var node = document.createTextNode('');\n  observer.observe(node, { characterData: true });\n\n  return function () {\n    node.data = iterations = ++iterations % 2;\n  };\n}\n\n// web worker\nfunction useMessageChannel() {\n  var channel = new MessageChannel();\n  channel.port1.onmessage = flush;\n  return function () {\n    return channel.port2.postMessage(0);\n  };\n}\n\nfunction useSetTimeout() {\n  // Store setTimeout reference so es6-promise will be unaffected by\n  // other code modifying setTimeout (like sinon.useFakeTimers())\n  var globalSetTimeout = setTimeout;\n  return function () {\n    return globalSetTimeout(flush, 1);\n  };\n}\n\nvar queue = new Array(1000);\nfunction flush() {\n  for (var i = 0; i < len; i += 2) {\n    var callback = queue[i];\n    var arg = queue[i + 1];\n\n    callback(arg);\n\n    queue[i] = undefined;\n    queue[i + 1] = undefined;\n  }\n\n  len = 0;\n}\n\nfunction attemptVertx() {\n  try {\n    var vertx = Function('return this')().require('vertx');\n    vertxNext = vertx.runOnLoop || vertx.runOnContext;\n    return useVertxTimer();\n  } catch (e) {\n    return useSetTimeout();\n  }\n}\n\nvar scheduleFlush = void 0;\n// Decide what async method to use to triggering processing of queued callbacks:\nif (isNode) {\n  scheduleFlush = useNextTick();\n} else if (BrowserMutationObserver) {\n  scheduleFlush = useMutationObserver();\n} else if (isWorker) {\n  scheduleFlush = useMessageChannel();\n} else if (browserWindow === undefined && typeof require === 'function') {\n  scheduleFlush = attemptVertx();\n} else {\n  scheduleFlush = useSetTimeout();\n}\n\nfunction then(onFulfillment, onRejection) {\n  var parent = this;\n\n  var child = new this.constructor(noop);\n\n  if (child[PROMISE_ID] === undefined) {\n    makePromise(child);\n  }\n\n  var _state = parent._state;\n\n\n  if (_state) {\n    var callback = arguments[_state - 1];\n    asap(function () {\n      return invokeCallback(_state, child, callback, parent._result);\n    });\n  } else {\n    subscribe(parent, child, onFulfillment, onRejection);\n  }\n\n  return child;\n}\n\n/**\n  `Promise.resolve` returns a promise that will become resolved with the\n  passed `value`. It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    resolve(1);\n  });\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.resolve(1);\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  @method resolve\n  @static\n  @param {Any} value value that the returned promise will be resolved with\n  Useful for tooling.\n  @return {Promise} a promise that will become fulfilled with the given\n  `value`\n*/\nfunction resolve$1(object) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (object && typeof object === 'object' && object.constructor === Constructor) {\n    return object;\n  }\n\n  var promise = new Constructor(noop);\n  resolve(promise, object);\n  return promise;\n}\n\nvar PROMISE_ID = Math.random().toString(36).substring(2);\n\nfunction noop() {}\n\nvar PENDING = void 0;\nvar FULFILLED = 1;\nvar REJECTED = 2;\n\nvar TRY_CATCH_ERROR = { error: null };\n\nfunction selfFulfillment() {\n  return new TypeError(\"You cannot resolve a promise with itself\");\n}\n\nfunction cannotReturnOwn() {\n  return new TypeError('A promises callback cannot return that same promise.');\n}\n\nfunction getThen(promise) {\n  try {\n    return promise.then;\n  } catch (error) {\n    TRY_CATCH_ERROR.error = error;\n    return TRY_CATCH_ERROR;\n  }\n}\n\nfunction tryThen(then$$1, value, fulfillmentHandler, rejectionHandler) {\n  try {\n    then$$1.call(value, fulfillmentHandler, rejectionHandler);\n  } catch (e) {\n    return e;\n  }\n}\n\nfunction handleForeignThenable(promise, thenable, then$$1) {\n  asap(function (promise) {\n    var sealed = false;\n    var error = tryThen(then$$1, thenable, function (value) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n      if (thenable !== value) {\n        resolve(promise, value);\n      } else {\n        fulfill(promise, value);\n      }\n    }, function (reason) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n\n      reject(promise, reason);\n    }, 'Settle: ' + (promise._label || ' unknown promise'));\n\n    if (!sealed && error) {\n      sealed = true;\n      reject(promise, error);\n    }\n  }, promise);\n}\n\nfunction handleOwnThenable(promise, thenable) {\n  if (thenable._state === FULFILLED) {\n    fulfill(promise, thenable._result);\n  } else if (thenable._state === REJECTED) {\n    reject(promise, thenable._result);\n  } else {\n    subscribe(thenable, undefined, function (value) {\n      return resolve(promise, value);\n    }, function (reason) {\n      return reject(promise, reason);\n    });\n  }\n}\n\nfunction handleMaybeThenable(promise, maybeThenable, then$$1) {\n  if (maybeThenable.constructor === promise.constructor && then$$1 === then && maybeThenable.constructor.resolve === resolve$1) {\n    handleOwnThenable(promise, maybeThenable);\n  } else {\n    if (then$$1 === TRY_CATCH_ERROR) {\n      reject(promise, TRY_CATCH_ERROR.error);\n      TRY_CATCH_ERROR.error = null;\n    } else if (then$$1 === undefined) {\n      fulfill(promise, maybeThenable);\n    } else if (isFunction(then$$1)) {\n      handleForeignThenable(promise, maybeThenable, then$$1);\n    } else {\n      fulfill(promise, maybeThenable);\n    }\n  }\n}\n\nfunction resolve(promise, value) {\n  if (promise === value) {\n    reject(promise, selfFulfillment());\n  } else if (objectOrFunction(value)) {\n    handleMaybeThenable(promise, value, getThen(value));\n  } else {\n    fulfill(promise, value);\n  }\n}\n\nfunction publishRejection(promise) {\n  if (promise._onerror) {\n    promise._onerror(promise._result);\n  }\n\n  publish(promise);\n}\n\nfunction fulfill(promise, value) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n\n  promise._result = value;\n  promise._state = FULFILLED;\n\n  if (promise._subscribers.length !== 0) {\n    asap(publish, promise);\n  }\n}\n\nfunction reject(promise, reason) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n  promise._state = REJECTED;\n  promise._result = reason;\n\n  asap(publishRejection, promise);\n}\n\nfunction subscribe(parent, child, onFulfillment, onRejection) {\n  var _subscribers = parent._subscribers;\n  var length = _subscribers.length;\n\n\n  parent._onerror = null;\n\n  _subscribers[length] = child;\n  _subscribers[length + FULFILLED] = onFulfillment;\n  _subscribers[length + REJECTED] = onRejection;\n\n  if (length === 0 && parent._state) {\n    asap(publish, parent);\n  }\n}\n\nfunction publish(promise) {\n  var subscribers = promise._subscribers;\n  var settled = promise._state;\n\n  if (subscribers.length === 0) {\n    return;\n  }\n\n  var child = void 0,\n      callback = void 0,\n      detail = promise._result;\n\n  for (var i = 0; i < subscribers.length; i += 3) {\n    child = subscribers[i];\n    callback = subscribers[i + settled];\n\n    if (child) {\n      invokeCallback(settled, child, callback, detail);\n    } else {\n      callback(detail);\n    }\n  }\n\n  promise._subscribers.length = 0;\n}\n\nfunction tryCatch(callback, detail) {\n  try {\n    return callback(detail);\n  } catch (e) {\n    TRY_CATCH_ERROR.error = e;\n    return TRY_CATCH_ERROR;\n  }\n}\n\nfunction invokeCallback(settled, promise, callback, detail) {\n  var hasCallback = isFunction(callback),\n      value = void 0,\n      error = void 0,\n      succeeded = void 0,\n      failed = void 0;\n\n  if (hasCallback) {\n    value = tryCatch(callback, detail);\n\n    if (value === TRY_CATCH_ERROR) {\n      failed = true;\n      error = value.error;\n      value.error = null;\n    } else {\n      succeeded = true;\n    }\n\n    if (promise === value) {\n      reject(promise, cannotReturnOwn());\n      return;\n    }\n  } else {\n    value = detail;\n    succeeded = true;\n  }\n\n  if (promise._state !== PENDING) {\n    // noop\n  } else if (hasCallback && succeeded) {\n    resolve(promise, value);\n  } else if (failed) {\n    reject(promise, error);\n  } else if (settled === FULFILLED) {\n    fulfill(promise, value);\n  } else if (settled === REJECTED) {\n    reject(promise, value);\n  }\n}\n\nfunction initializePromise(promise, resolver) {\n  try {\n    resolver(function resolvePromise(value) {\n      resolve(promise, value);\n    }, function rejectPromise(reason) {\n      reject(promise, reason);\n    });\n  } catch (e) {\n    reject(promise, e);\n  }\n}\n\nvar id = 0;\nfunction nextId() {\n  return id++;\n}\n\nfunction makePromise(promise) {\n  promise[PROMISE_ID] = id++;\n  promise._state = undefined;\n  promise._result = undefined;\n  promise._subscribers = [];\n}\n\nfunction validationError() {\n  return new Error('Array Methods must be provided an Array');\n}\n\nvar Enumerator = function () {\n  function Enumerator(Constructor, input) {\n    this._instanceConstructor = Constructor;\n    this.promise = new Constructor(noop);\n\n    if (!this.promise[PROMISE_ID]) {\n      makePromise(this.promise);\n    }\n\n    if (isArray(input)) {\n      this.length = input.length;\n      this._remaining = input.length;\n\n      this._result = new Array(this.length);\n\n      if (this.length === 0) {\n        fulfill(this.promise, this._result);\n      } else {\n        this.length = this.length || 0;\n        this._enumerate(input);\n        if (this._remaining === 0) {\n          fulfill(this.promise, this._result);\n        }\n      }\n    } else {\n      reject(this.promise, validationError());\n    }\n  }\n\n  Enumerator.prototype._enumerate = function _enumerate(input) {\n    for (var i = 0; this._state === PENDING && i < input.length; i++) {\n      this._eachEntry(input[i], i);\n    }\n  };\n\n  Enumerator.prototype._eachEntry = function _eachEntry(entry, i) {\n    var c = this._instanceConstructor;\n    var resolve$$1 = c.resolve;\n\n\n    if (resolve$$1 === resolve$1) {\n      var _then = getThen(entry);\n\n      if (_then === then && entry._state !== PENDING) {\n        this._settledAt(entry._state, i, entry._result);\n      } else if (typeof _then !== 'function') {\n        this._remaining--;\n        this._result[i] = entry;\n      } else if (c === Promise$1) {\n        var promise = new c(noop);\n        handleMaybeThenable(promise, entry, _then);\n        this._willSettleAt(promise, i);\n      } else {\n        this._willSettleAt(new c(function (resolve$$1) {\n          return resolve$$1(entry);\n        }), i);\n      }\n    } else {\n      this._willSettleAt(resolve$$1(entry), i);\n    }\n  };\n\n  Enumerator.prototype._settledAt = function _settledAt(state, i, value) {\n    var promise = this.promise;\n\n\n    if (promise._state === PENDING) {\n      this._remaining--;\n\n      if (state === REJECTED) {\n        reject(promise, value);\n      } else {\n        this._result[i] = value;\n      }\n    }\n\n    if (this._remaining === 0) {\n      fulfill(promise, this._result);\n    }\n  };\n\n  Enumerator.prototype._willSettleAt = function _willSettleAt(promise, i) {\n    var enumerator = this;\n\n    subscribe(promise, undefined, function (value) {\n      return enumerator._settledAt(FULFILLED, i, value);\n    }, function (reason) {\n      return enumerator._settledAt(REJECTED, i, reason);\n    });\n  };\n\n  return Enumerator;\n}();\n\n/**\n  `Promise.all` accepts an array of promises, and returns a new promise which\n  is fulfilled with an array of fulfillment values for the passed promises, or\n  rejected with the reason of the first passed promise to be rejected. It casts all\n  elements of the passed iterable to promises as it runs this algorithm.\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = resolve(2);\n  let promise3 = resolve(3);\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // The array here would be [ 1, 2, 3 ];\n  });\n  ```\n\n  If any of the `promises` given to `all` are rejected, the first promise\n  that is rejected will be given as an argument to the returned promises's\n  rejection handler. For example:\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = reject(new Error(\"2\"));\n  let promise3 = reject(new Error(\"3\"));\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // Code here never runs because there are rejected promises!\n  }, function(error) {\n    // error.message === \"2\"\n  });\n  ```\n\n  @method all\n  @static\n  @param {Array} entries array of promises\n  @param {String} label optional string for labeling the promise.\n  Useful for tooling.\n  @return {Promise} promise that is fulfilled when all `promises` have been\n  fulfilled, or rejected if any of them become rejected.\n  @static\n*/\nfunction all(entries) {\n  return new Enumerator(this, entries).promise;\n}\n\n/**\n  `Promise.race` returns a new promise which is settled in the same way as the\n  first passed promise to settle.\n\n  Example:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 2');\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // result === 'promise 2' because it was resolved before promise1\n    // was resolved.\n  });\n  ```\n\n  `Promise.race` is deterministic in that only the state of the first\n  settled promise matters. For example, even if other promises given to the\n  `promises` array argument are resolved, but the first settled promise has\n  become rejected before the other promises became fulfilled, the returned\n  promise will become rejected:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      reject(new Error('promise 2'));\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // Code here never runs\n  }, function(reason){\n    // reason.message === 'promise 2' because promise 2 became rejected before\n    // promise 1 became fulfilled\n  });\n  ```\n\n  An example real-world use case is implementing timeouts:\n\n  ```javascript\n  Promise.race([ajax('foo.json'), timeout(5000)])\n  ```\n\n  @method race\n  @static\n  @param {Array} promises array of promises to observe\n  Useful for tooling.\n  @return {Promise} a promise which settles in the same way as the first passed\n  promise to settle.\n*/\nfunction race(entries) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (!isArray(entries)) {\n    return new Constructor(function (_, reject) {\n      return reject(new TypeError('You must pass an array to race.'));\n    });\n  } else {\n    return new Constructor(function (resolve, reject) {\n      var length = entries.length;\n      for (var i = 0; i < length; i++) {\n        Constructor.resolve(entries[i]).then(resolve, reject);\n      }\n    });\n  }\n}\n\n/**\n  `Promise.reject` returns a promise rejected with the passed `reason`.\n  It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    reject(new Error('WHOOPS'));\n  });\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.reject(new Error('WHOOPS'));\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  @method reject\n  @static\n  @param {Any} reason value that the returned promise will be rejected with.\n  Useful for tooling.\n  @return {Promise} a promise rejected with the given `reason`.\n*/\nfunction reject$1(reason) {\n  /*jshint validthis:true */\n  var Constructor = this;\n  var promise = new Constructor(noop);\n  reject(promise, reason);\n  return promise;\n}\n\nfunction needsResolver() {\n  throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n}\n\nfunction needsNew() {\n  throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n}\n\n/**\n  Promise objects represent the eventual result of an asynchronous operation. The\n  primary way of interacting with a promise is through its `then` method, which\n  registers callbacks to receive either a promise's eventual value or the reason\n  why the promise cannot be fulfilled.\n\n  Terminology\n  -----------\n\n  - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\n  - `thenable` is an object or function that defines a `then` method.\n  - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\n  - `exception` is a value that is thrown using the throw statement.\n  - `reason` is a value that indicates why a promise was rejected.\n  - `settled` the final resting state of a promise, fulfilled or rejected.\n\n  A promise can be in one of three states: pending, fulfilled, or rejected.\n\n  Promises that are fulfilled have a fulfillment value and are in the fulfilled\n  state.  Promises that are rejected have a rejection reason and are in the\n  rejected state.  A fulfillment value is never a thenable.\n\n  Promises can also be said to *resolve* a value.  If this value is also a\n  promise, then the original promise's settled state will match the value's\n  settled state.  So a promise that *resolves* a promise that rejects will\n  itself reject, and a promise that *resolves* a promise that fulfills will\n  itself fulfill.\n\n\n  Basic Usage:\n  ------------\n\n  ```js\n  let promise = new Promise(function(resolve, reject) {\n    // on success\n    resolve(value);\n\n    // on failure\n    reject(reason);\n  });\n\n  promise.then(function(value) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Advanced Usage:\n  ---------------\n\n  Promises shine when abstracting away asynchronous interactions such as\n  `XMLHttpRequest`s.\n\n  ```js\n  function getJSON(url) {\n    return new Promise(function(resolve, reject){\n      let xhr = new XMLHttpRequest();\n\n      xhr.open('GET', url);\n      xhr.onreadystatechange = handler;\n      xhr.responseType = 'json';\n      xhr.setRequestHeader('Accept', 'application/json');\n      xhr.send();\n\n      function handler() {\n        if (this.readyState === this.DONE) {\n          if (this.status === 200) {\n            resolve(this.response);\n          } else {\n            reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\n          }\n        }\n      };\n    });\n  }\n\n  getJSON('/posts.json').then(function(json) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Unlike callbacks, promises are great composable primitives.\n\n  ```js\n  Promise.all([\n    getJSON('/posts'),\n    getJSON('/comments')\n  ]).then(function(values){\n    values[0] // => postsJSON\n    values[1] // => commentsJSON\n\n    return values;\n  });\n  ```\n\n  @class Promise\n  @param {Function} resolver\n  Useful for tooling.\n  @constructor\n*/\n\nvar Promise$1 = function () {\n  function Promise(resolver) {\n    this[PROMISE_ID] = nextId();\n    this._result = this._state = undefined;\n    this._subscribers = [];\n\n    if (noop !== resolver) {\n      typeof resolver !== 'function' && needsResolver();\n      this instanceof Promise ? initializePromise(this, resolver) : needsNew();\n    }\n  }\n\n  /**\n  The primary way of interacting with a promise is through its `then` method,\n  which registers callbacks to receive either a promise's eventual value or the\n  reason why the promise cannot be fulfilled.\n   ```js\n  findUser().then(function(user){\n    // user is available\n  }, function(reason){\n    // user is unavailable, and you are given the reason why\n  });\n  ```\n   Chaining\n  --------\n   The return value of `then` is itself a promise.  This second, 'downstream'\n  promise is resolved with the return value of the first promise's fulfillment\n  or rejection handler, or rejected if the handler throws an exception.\n   ```js\n  findUser().then(function (user) {\n    return user.name;\n  }, function (reason) {\n    return 'default name';\n  }).then(function (userName) {\n    // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n    // will be `'default name'`\n  });\n   findUser().then(function (user) {\n    throw new Error('Found user, but still unhappy');\n  }, function (reason) {\n    throw new Error('`findUser` rejected and we're unhappy');\n  }).then(function (value) {\n    // never reached\n  }, function (reason) {\n    // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n    // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\n  });\n  ```\n  If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n   ```js\n  findUser().then(function (user) {\n    throw new PedagogicalException('Upstream error');\n  }).then(function (value) {\n    // never reached\n  }).then(function (value) {\n    // never reached\n  }, function (reason) {\n    // The `PedgagocialException` is propagated all the way down to here\n  });\n  ```\n   Assimilation\n  ------------\n   Sometimes the value you want to propagate to a downstream promise can only be\n  retrieved asynchronously. This can be achieved by returning a promise in the\n  fulfillment or rejection handler. The downstream promise will then be pending\n  until the returned promise is settled. This is called *assimilation*.\n   ```js\n  findUser().then(function (user) {\n    return findCommentsByAuthor(user);\n  }).then(function (comments) {\n    // The user's comments are now available\n  });\n  ```\n   If the assimliated promise rejects, then the downstream promise will also reject.\n   ```js\n  findUser().then(function (user) {\n    return findCommentsByAuthor(user);\n  }).then(function (comments) {\n    // If `findCommentsByAuthor` fulfills, we'll have the value here\n  }, function (reason) {\n    // If `findCommentsByAuthor` rejects, we'll have the reason here\n  });\n  ```\n   Simple Example\n  --------------\n   Synchronous Example\n   ```javascript\n  let result;\n   try {\n    result = findResult();\n    // success\n  } catch(reason) {\n    // failure\n  }\n  ```\n   Errback Example\n   ```js\n  findResult(function(result, err){\n    if (err) {\n      // failure\n    } else {\n      // success\n    }\n  });\n  ```\n   Promise Example;\n   ```javascript\n  findResult().then(function(result){\n    // success\n  }, function(reason){\n    // failure\n  });\n  ```\n   Advanced Example\n  --------------\n   Synchronous Example\n   ```javascript\n  let author, books;\n   try {\n    author = findAuthor();\n    books  = findBooksByAuthor(author);\n    // success\n  } catch(reason) {\n    // failure\n  }\n  ```\n   Errback Example\n   ```js\n   function foundBooks(books) {\n   }\n   function failure(reason) {\n   }\n   findAuthor(function(author, err){\n    if (err) {\n      failure(err);\n      // failure\n    } else {\n      try {\n        findBoooksByAuthor(author, function(books, err) {\n          if (err) {\n            failure(err);\n          } else {\n            try {\n              foundBooks(books);\n            } catch(reason) {\n              failure(reason);\n            }\n          }\n        });\n      } catch(error) {\n        failure(err);\n      }\n      // success\n    }\n  });\n  ```\n   Promise Example;\n   ```javascript\n  findAuthor().\n    then(findBooksByAuthor).\n    then(function(books){\n      // found books\n  }).catch(function(reason){\n    // something went wrong\n  });\n  ```\n   @method then\n  @param {Function} onFulfilled\n  @param {Function} onRejected\n  Useful for tooling.\n  @return {Promise}\n  */\n\n  /**\n  `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n  as the catch block of a try/catch statement.\n  ```js\n  function findAuthor(){\n  throw new Error('couldn't find that author');\n  }\n  // synchronous\n  try {\n  findAuthor();\n  } catch(reason) {\n  // something went wrong\n  }\n  // async with promises\n  findAuthor().catch(function(reason){\n  // something went wrong\n  });\n  ```\n  @method catch\n  @param {Function} onRejection\n  Useful for tooling.\n  @return {Promise}\n  */\n\n\n  Promise.prototype.catch = function _catch(onRejection) {\n    return this.then(null, onRejection);\n  };\n\n  /**\n    `finally` will be invoked regardless of the promise's fate just as native\n    try/catch/finally behaves\n  \n    Synchronous example:\n  \n    ```js\n    findAuthor() {\n      if (Math.random() > 0.5) {\n        throw new Error();\n      }\n      return new Author();\n    }\n  \n    try {\n      return findAuthor(); // succeed or fail\n    } catch(error) {\n      return findOtherAuther();\n    } finally {\n      // always runs\n      // doesn't affect the return value\n    }\n    ```\n  \n    Asynchronous example:\n  \n    ```js\n    findAuthor().catch(function(reason){\n      return findOtherAuther();\n    }).finally(function(){\n      // author was either found, or not\n    });\n    ```\n  \n    @method finally\n    @param {Function} callback\n    @return {Promise}\n  */\n\n\n  Promise.prototype.finally = function _finally(callback) {\n    var promise = this;\n    var constructor = promise.constructor;\n\n    if (isFunction(callback)) {\n      return promise.then(function (value) {\n        return constructor.resolve(callback()).then(function () {\n          return value;\n        });\n      }, function (reason) {\n        return constructor.resolve(callback()).then(function () {\n          throw reason;\n        });\n      });\n    }\n\n    return promise.then(callback, callback);\n  };\n\n  return Promise;\n}();\n\nPromise$1.prototype.then = then;\nPromise$1.all = all;\nPromise$1.race = race;\nPromise$1.resolve = resolve$1;\nPromise$1.reject = reject$1;\nPromise$1._setScheduler = setScheduler;\nPromise$1._setAsap = setAsap;\nPromise$1._asap = asap;\n\n/*global self*/\nfunction polyfill() {\n  var local = void 0;\n\n  if (typeof global !== 'undefined') {\n    local = global;\n  } else if (typeof self !== 'undefined') {\n    local = self;\n  } else {\n    try {\n      local = Function('return this')();\n    } catch (e) {\n      throw new Error('polyfill failed because global object is unavailable in this environment');\n    }\n  }\n\n  var P = local.Promise;\n\n  if (P) {\n    var promiseToString = null;\n    try {\n      promiseToString = Object.prototype.toString.call(P.resolve());\n    } catch (e) {\n      // silently ignored\n    }\n\n    if (promiseToString === '[object Promise]' && !P.cast) {\n      return;\n    }\n  }\n\n  local.Promise = Promise$1;\n}\n\n// Strange compat..\nPromise$1.polyfill = polyfill;\nPromise$1.Promise = Promise$1;\n\nreturn Promise$1;\n\n})));\n\n\n\n//# sourceMappingURL=es6-promise.map\n","// the whatwg-fetch polyfill installs the fetch() function\n// on the global object (window or self)\n//\n// Return that as the export for use in Webpack, Browserify etc.\nrequire('whatwg-fetch');\nmodule.exports = self.fetch.bind(self);\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (factory((global.WHATWGFetch = {})));\n}(this, (function (exports) { 'use strict';\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob:\n      'FileReader' in self &&\n      'Blob' in self &&\n      (function() {\n        try {\n          new Blob();\n          return true\n        } catch (e) {\n          return false\n        }\n      })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  };\n\n  function isDataView(obj) {\n    return obj && DataView.prototype.isPrototypeOf(obj)\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ];\n\n    var isArrayBufferView =\n      ArrayBuffer.isView ||\n      function(obj) {\n        return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n      };\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name);\n    }\n    if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value);\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift();\n        return {done: value === undefined, value: value}\n      }\n    };\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      };\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    var oldValue = this.map[name];\n    this.map[name] = oldValue ? oldValue + ', ' + value : value;\n  };\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)];\n  };\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name);\n    return this.has(name) ? this.map[name] : null\n  };\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  };\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value);\n  };\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this);\n      }\n    }\n  };\n\n  Headers.prototype.keys = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push(name);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.values = function() {\n    var items = [];\n    this.forEach(function(value) {\n      items.push(value);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.entries = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push([name, value]);\n    });\n    return iteratorFor(items)\n  };\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true;\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result);\n      };\n      reader.onerror = function() {\n        reject(reader.error);\n      };\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsText(blob);\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf);\n    var chars = new Array(view.length);\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i]);\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength);\n      view.set(new Uint8Array(buf));\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false;\n\n    this._initBody = function(body) {\n      this._bodyInit = body;\n      if (!body) {\n        this._bodyText = '';\n      } else if (typeof body === 'string') {\n        this._bodyText = body;\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body;\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body;\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString();\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer);\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer]);\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body);\n      } else {\n        this._bodyText = body = Object.prototype.toString.call(body);\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8');\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type);\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n      }\n    };\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this);\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      };\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      };\n    }\n\n    this.text = function() {\n      var rejected = consumed(this);\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    };\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      };\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    };\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase();\n    return methods.indexOf(upcased) > -1 ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {};\n    var body = options.body;\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url;\n      this.credentials = input.credentials;\n      if (!options.headers) {\n        this.headers = new Headers(input.headers);\n      }\n      this.method = input.method;\n      this.mode = input.mode;\n      this.signal = input.signal;\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit;\n        input.bodyUsed = true;\n      }\n    } else {\n      this.url = String(input);\n    }\n\n    this.credentials = options.credentials || this.credentials || 'same-origin';\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers);\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET');\n    this.mode = options.mode || this.mode || null;\n    this.signal = options.signal || this.signal;\n    this.referrer = null;\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body);\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, {body: this._bodyInit})\n  };\n\n  function decode(body) {\n    var form = new FormData();\n    body\n      .trim()\n      .split('&')\n      .forEach(function(bytes) {\n        if (bytes) {\n          var split = bytes.split('=');\n          var name = split.shift().replace(/\\+/g, ' ');\n          var value = split.join('=').replace(/\\+/g, ' ');\n          form.append(decodeURIComponent(name), decodeURIComponent(value));\n        }\n      });\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers();\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':');\n      var key = parts.shift().trim();\n      if (key) {\n        var value = parts.join(':').trim();\n        headers.append(key, value);\n      }\n    });\n    return headers\n  }\n\n  Body.call(Request.prototype);\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {};\n    }\n\n    this.type = 'default';\n    this.status = options.status === undefined ? 200 : options.status;\n    this.ok = this.status >= 200 && this.status < 300;\n    this.statusText = 'statusText' in options ? options.statusText : 'OK';\n    this.headers = new Headers(options.headers);\n    this.url = options.url || '';\n    this._initBody(bodyInit);\n  }\n\n  Body.call(Response.prototype);\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  };\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''});\n    response.type = 'error';\n    return response\n  };\n\n  var redirectStatuses = [301, 302, 303, 307, 308];\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  };\n\n  exports.DOMException = self.DOMException;\n  try {\n    new exports.DOMException();\n  } catch (err) {\n    exports.DOMException = function(message, name) {\n      this.message = message;\n      this.name = name;\n      var error = Error(message);\n      this.stack = error.stack;\n    };\n    exports.DOMException.prototype = Object.create(Error.prototype);\n    exports.DOMException.prototype.constructor = exports.DOMException;\n  }\n\n  function fetch(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init);\n\n      if (request.signal && request.signal.aborted) {\n        return reject(new exports.DOMException('Aborted', 'AbortError'))\n      }\n\n      var xhr = new XMLHttpRequest();\n\n      function abortXhr() {\n        xhr.abort();\n      }\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        };\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options));\n      };\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.onabort = function() {\n        reject(new exports.DOMException('Aborted', 'AbortError'));\n      };\n\n      xhr.open(request.method, request.url, true);\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true;\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false;\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob';\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value);\n      });\n\n      if (request.signal) {\n        request.signal.addEventListener('abort', abortXhr);\n\n        xhr.onreadystatechange = function() {\n          // DONE (success or failure)\n          if (xhr.readyState === 4) {\n            request.signal.removeEventListener('abort', abortXhr);\n          }\n        };\n      }\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n    })\n  }\n\n  fetch.polyfill = true;\n\n  if (!self.fetch) {\n    self.fetch = fetch;\n    self.Headers = Headers;\n    self.Request = Request;\n    self.Response = Response;\n  }\n\n  exports.Headers = Headers;\n  exports.Request = Request;\n  exports.Response = Response;\n  exports.fetch = fetch;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n","import MobileServerBridgeBase from '../../../shared/js/classes/MobileServerBridge';\nimport {Constants} from '../../../shared/js/Constants';\n\nexport default class MobileServerBridge extends MobileServerBridgeBase{\n\n  constructor(presentation, settings) {\n    super(presentation, settings);\n    bean.on(this.presentation, Constants.SET_CURRENT_SLIDE_INDEX, this.currentSlideIndexChanged.bind(this));\n  }\n\n  socketConnectHandler() {\n    super.socketConnectHandler();\n    this.tryToSend(Constants.MESSAGE, {\n      target: {\n        client: `mobile`,\n      },\n      content: {\n        action: Constants.SET_CURRENT_SLIDE_INDEX,\n        currentSlideIndex: this.presentation.currentSlideIndex\n      }\n    });\n  }\n\n  currentSlideIndexChanged(currentSlideIndex) {\n    this.tryToSend(Constants.MESSAGE, {\n      target: {\n        client: `mobile`,\n      },\n      content: {\n        action: Constants.SET_CURRENT_SLIDE_INDEX,\n        currentSlideIndex: currentSlideIndex\n      }\n    });\n  }\n\n}\n","const childProcess = requireNode(`child_process`);\nconst EventEmitter = requireNode(`events`).EventEmitter;\nconst path = requireNode(`path`);\n\nconst platform = requireNode(`electron`).remote.process.platform;\nconst isWin = /^win/.test(platform);\n\n//kill entire process tree\n//http://krasimirtsonev.com/blog/article/Nodejs-managing-child-processes-starting-stopping-exec-spawn\nconst kill = (pid, signal) => {\n  signal = signal || `SIGKILL`;\n  return new Promise(resolve => {\n    if(!isWin) {\n      const psTree = requireNode(`ps-tree`);\n      const killTree = true;\n      if(killTree) {\n        psTree(pid, (err, children) => {\n          [pid].concat(children.map(p => p.PID)).forEach(tpid => {\n            try { process.kill(tpid, signal); }\n            catch (ex) { console.error(ex); }\n          });\n        });\n      } else {\n        try { process.kill(pid, signal); }\n        catch (ex) { console.error(ex); }\n      }\n      resolve();\n    } else {\n      childProcess.exec(`taskkill /PID ${  pid  } /T /F`, () => {\n        resolve();\n      });\n    }\n  });\n};\n\nexport default class NodeAppRunner extends EventEmitter {\n  constructor() {\n    super();\n  }\n  run(applicationPath) {\n    return this.stop()\n    .then(() => {\n      this.cwd = path.dirname(applicationPath);\n      this.numDataEventsReceived = 0;\n      this.ignoreFirstEventsAmount = 0;\n      if(isWin) {\n        this.ignoreFirstEventsAmount = 2;\n        this.runner = childProcess.spawn(`cmd`, [`nvmw`, `use`, `iojs-v2.3.1`], {cwd: this.cwd});\n        setTimeout(() => {\n          this.runner.stdin.write(`node ${  applicationPath  }\\n`);\n        }, 500);\n      } else {\n        console.log(`node ${  applicationPath}`);\n        this.runner = childProcess.spawn(`node`, [applicationPath], {cwd: this.cwd});\n      }\n      this.runner.stdout.on(`data`, data => this.onRunnerData(data));\n      this.runner.stderr.on(`data`, error => this.onRunnerError(error));\n      this.runner.on(`disconnect`, () => this.onDisconnect());\n      this.runner.on(`close`, () => this.onClose());\n      this.runner.on(`exit`, () => this.onExit());\n    });\n  }\n  onRunnerData(data) {\n    this.numDataEventsReceived++;\n    if(this.numDataEventsReceived <= this.ignoreFirstEventsAmount) {\n      //ignore the first x-messages\n      return;\n    }\n    data = data.toString().trim();\n    if(data.indexOf(this.cwd) === 0) {\n      data = data.substr(this.cwd.length);\n      if(data.length === 1) {\n        return;\n      }\n    }\n    this.emit(`stdout-data`, data);\n  }\n\n  onRunnerError(error) {\n    this.emit(`stderr-data`, error.toString().trim());\n  }\n\n  onDisconnect() {\n    console.log(`[ChildApp] runner disconnected`);\n    this.runner = false;\n  }\n\n  onClose() {\n    console.log(`[ChildApp] runner closed`);\n    this.runner = false;\n  }\n\n  onExit() {\n    console.log(`[ChildApp] runner exited`);\n    this.runner = false;\n  }\n\n  stop() {\n    return new Promise(resolve => {\n      if(!this.runner) {\n        resolve();\n      }\n      this.runner.stdout.removeAllListeners();\n      this.runner.stderr.removeAllListeners();\n      this.runner.stdin.end();\n      //listen for runner events and resolve on the one that occurs\n      // const cbCalled = false;\n      // this.runner.on('disconnect', () => {\n      //   console.log('disconnect');\n      //   if(!cbCalled) {\n      //     resolve();\n      //   }\n      // });\n      // this.runner.on('close', () => {\n      //   console.log('close');\n      //   if(!cbCalled) {\n      //     resolve();\n      //   }\n      // });\n      // this.runner.on('exit', () => {\n      //   console.log('exit');\n      //   if(!cbCalled) {\n      //     resolve();\n      //   }\n      // });\n      kill(this.runner.pid).then(() => {\n        resolve();\n      });\n      this.runner = false;\n    });\n  }\n  destroy() {\n    return this.stop()\n    .then(() => {\n    });\n  }\n}\n","import {Constants} from '../../../shared/js/Constants';\nimport PresentationBase from '../../../shared/js/classes/Presentation';\nimport SlideBridge from './SlideBridge';\nimport MobileServerBridge from './MobileServerBridge';\n\nconst path = requireNode(`path`);\n\nconst KEYCODE_LEFT = 37;\nconst KEYCODE_RIGHT = 39;\nconst KEYCODE_SPACE = 32;\n\nexport default class Presentation extends PresentationBase {\n  constructor(data, role, settings) {\n    super(data, role, settings);\n\n    window.onbeforeunload = event => this.closeHandler(event);\n    $(window).on(`keydown`, event => this.keydownHandler(event));\n    bean.on(this, Constants.SET_CURRENT_SLIDE_INDEX, this.currentSlideIndexChangedHandler.bind(this));\n\n    $(`body`).on(Constants.GO_TO_PREVIOUS_SLIDE, this.goToPreviousSlide.bind(this));\n    $(`body`).on(Constants.GO_TO_NEXT_SLIDE, this.goToNextSlide.bind(this));\n    $(`body`).on(Constants.OPEN_COMMAND_LINE, this.openCommandLine.bind(this));\n    $(`body`).on(Constants.OPEN_CAMERA, this.openCamera.bind(this));\n  }\n\n  closeHandler(event) { // eslint-disable-line no-unused-vars\n  }\n\n  currentSlideIndexChangedHandler(slideIndex) { // eslint-disable-line no-unused-vars\n  }\n\n  createMobileServerBridge() {\n    return new MobileServerBridge(this, this.settings);\n  }\n\n  toggleElevatorMusic() {\n    this.elevatorMusicPlaying = !this.elevatorMusicPlaying;\n    if(this.elevatorMusicPlaying) {\n      this.elevatorMusic.play();\n    } else {\n      this.elevatorMusic.pause();\n    }\n  }\n\n  //prepend urls with file:/// (faster?)\n  processSlideSrc(src) {\n    src = `file:///${  path.resolve(this.settings.presentationPath, src)}`;\n    src = src.replace(/\\\\/g, `/`);\n    return src;\n  }\n\n  createSlideBridges(data) {\n    PresentationBase.prototype.createSlideBridges.call(this, data);\n    const that = this;\n    const $slideMenu = $(`#slideMenu`);\n    const numSlideBridges = this.slideBridges.length;\n    for(let i = 0; i < numSlideBridges; i++) {\n      const slideBridge = this.slideBridges[i];\n      $slideMenu.append(`<button type=\"button\" data-slidenr=\"${  i  }\" class=\"dropdown-item\">${  i + 1  } ${  slideBridge.name  }</button>`);\n    }\n    $slideMenu.find(`button`).on(`click`, function(event){\n      event.preventDefault();\n      that.setCurrentSlideIndex(parseInt($(this).data(`slidenr`)));\n    });\n  }\n\n  createSlideBridge(slide) {\n    //use our own bridge which doesn't use fetch\n    return new SlideBridge(slide);\n  }\n\n  slideMessageHandler(event) {\n    PresentationBase.prototype.slideMessageHandler.call(this, event);\n    if(!event.data) {\n      return;\n    }\n    switch(event.data.action) {\n    case Constants.GO_TO_PREVIOUS_SLIDE:\n      this.goToPreviousSlide();\n      break;\n    case Constants.GO_TO_NEXT_SLIDE:\n      this.goToNextSlide();\n      break;\n    case Constants.OPEN_COMMAND_LINE:\n      this.openCommandLine();\n      break;\n    case Constants.OPEN_CAMERA:\n      this.openCamera();\n      break;\n    }\n  }\n\n  keydownHandler(event) {\n    //one frame delay\n    window.requestAnimationFrame(() => {\n      if(event.isImmediatePropagationStopped()) {\n        return;\n      }\n      switch(event.keyCode) {\n      case KEYCODE_LEFT:\n        this.goToPreviousSlide();\n        break;\n      case KEYCODE_RIGHT:\n        this.goToNextSlide();\n        break;\n      case KEYCODE_SPACE:\n        $(`#presentation-controls`).toggle();\n        break;\n      }\n    });\n  }\n\n  childAppDataHandler(data) {\n    const currentSlideBridge = this.getSlideBridgeByIndex(this.currentSlideIndex);\n    if(currentSlideBridge) {\n      currentSlideBridge.tryToPostMessage({\n        action: Constants.CHILD_APP_STDOUT_DATA,\n        data: data\n      });\n    }\n  }\n\n  childAppErrorHandler(data) {\n    const currentSlideBridge = this.getSlideBridgeByIndex(this.currentSlideIndex);\n    if(currentSlideBridge) {\n      currentSlideBridge.tryToPostMessage({\n        action: Constants.CHILD_APP_STDERR_DATA,\n        data: data\n      });\n    }\n  }\n\n  openCommandLine() {\n    $(`#consoleModal`).modal(`show`);\n  }\n\n  openCamera() {\n    $(`#webcamModal`).modal(`show`);\n  }\n\n  handleMobileServerMessage(message) {\n    if(message.content) {\n      if(message.content.action === `goToNextSlide`) {\n        this.goToNextSlide();\n      } else if(message.content.action === `goToPreviousSlide`) {\n        this.goToPreviousSlide();\n      }\n    }\n  }\n}\n","import SlideBridgeBase from '../../../shared/js/classes/SlideBridge';\n\nexport default class SlideBridge extends SlideBridgeBase {\n\n  attachToSlideHolder(slideHolder, src, cb) {\n    // console.log('attachToSlideHolder', src);\n    // console.log(slideHolder);\n    this.slideHolder = slideHolder;\n    //notify the content it is being cleared\n    this.tryToPostMessage({action: `destroy`});\n    //clear the current content\n    this.slideHolder.innerHTML = ``;\n    $(slideHolder).attr(`data-name`, this.name);\n    $(slideHolder).addClass(`loading`);\n\n    $(slideHolder).off(`load`);\n    $(slideHolder).on(`load`, () => {\n      this.tryToPostMessage({\n        action: `setState`,\n        state: this.state\n      });\n      $(slideHolder).off(`load`);\n    });\n\n    if (src !== $(slideHolder).attr(`data-src`)) {\n      //create html import\n      const $importEl = $(`<link rel=\"import\">`);\n      const importEl = $importEl[0];\n      $importEl.on(`load`, () => {\n        const template = importEl.import.querySelector(`template`);\n        if(template) {\n          const clone = document.importNode(template.content, true);\n          this.slideHolder.appendChild(clone);\n        }\n        $importEl.remove();\n        $(slideHolder).removeClass(`loading`);\n        cb();\n      });\n      $importEl.attr(`href`, src);\n      $(slideHolder).attr(`data-src`, src);\n      $(slideHolder).html($importEl);\n    }\n  }\n}\n","const fs = requireNode(`fs-extra`);\n\nexport default class CodeElement {\n  constructor(el, options) {\n    this.el = el;\n    this.$el = $(el);\n    //options\n    if(!options)\n    {\n      options = {};\n    }\n\n    const width = $(el).parent()[0].style.width || `100%`;\n    const height = $(el).parent()[0].style.height || `100%`;\n\n    //wrap element in a container\n    this.$wrapperEl = $(el).wrap(`<div class=\"live-code-element live-code-code-element\"></div>`).parent();\n    this.wrapperEl = this.$wrapperEl[0];\n\n    this.id = this.$el.attr(`data-id`);\n    this.file = this.$el.data(`file`);\n\n    if(!this.id && this.file)\n    {\n      this.id = this.file;\n    }\n    if(!this.id)\n    {\n      this.id = `code-${  Math.round(Math.random() * 1000 * new Date().getTime())}`;\n    }\n    this.$el.attr(`data-id`, this.id);\n\n    this.runtime = this.$el.data(`runtime`);\n    if(!this.runtime)\n    {\n      this.runtime = `browser`;\n    }\n\n    this.console = this.$el.data(`console`);\n    this.processor = this.$el.data(`processor`);\n\n    //language is programming language - used for injecting in html\n    this.language = this.$el.data(`language`);\n    if(!this.language)\n    {\n      //default to javascript\n      this.language = `javascript`;\n    }\n\n    //mode is mode for codemirror\n    this.mode = this.$el.data(`mode`);\n    if(!this.mode)\n    {\n      //default to the language\n      this.mode = this.language;\n    }\n\n    this.codeMirror = CodeMirror.fromTextArea(this.el, {\n      lineNumbers: true,\n      mode: this.mode,\n      extraKeys: {\"Ctrl-Space\": `autocomplete`}\n    });\n\n    this.codeMirror.setSize(width, height);\n\n    //this.$el.css('width', '100%').css('height', '100%');\n    this.layout();\n  }\n\n  pause() {\n    //no real reason to do pause / resume\n  }\n\n  resume() {\n    //no real reason to do pause / resume\n  }\n\n  destroy() {\n    this.pause();\n  }\n\n  getValue() {\n    return this.codeMirror.getValue();\n  }\n\n  setValue(value) {\n    this.codeMirror.setValue(value);\n  }\n\n  saveToFile(filePath) {\n    return fs.writeFile(filePath, this.getValue());\n  }\n\n  readFromFile(filePath) {\n    return fs.readFile(filePath, `utf8`)\n      .then(data => {\n        this.setValue(data);\n        return data;\n      })\n      .catch(e => {\n        this.setValue('');\n        throw e;\n      });\n  }\n\n  layout() {\n    // this.$wrapperEl.find('.CodeMirror-scroll').css('max-height', this.$wrapperEl.css('height'));\n    this.codeMirror.refresh();\n  }\n}\n","import NodeAppRunner from '../NodeAppRunner';\n\nconst htmlEscape = str => {\n  return String(str).replace(/&/g, `&amp;`)\n    .replace(/\\\"/g, `&quot;`)\n    .replace(/'/g, `&#39;`)\n    .replace(/</g, `&lt;`)\n    .replace(/>/g, `&gt;`);\n};\n\nconst needsJSONConversion = arg => {\n  if(\n    typeof arg === `number` ||\n    typeof arg === `string` ||\n    typeof arg === `boolean`\n  ) {\n    return false;\n  }\n  return true;\n};\n\nexport default class ConsoleElement {\n\n  constructor(el, options) {\n    this.el = el;\n    this.$el = $(el);\n\n    this.nodeAppRunner = new NodeAppRunner();\n    this.nodeAppRunner.on(`stdout-data`, data => this.info([data]));\n    this.nodeAppRunner.on(`stderr-data`, error => this.error([error]));\n\n    //options\n    if(!options) {\n      options = {};\n    }\n    //wrap element in a container\n    this.$wrapperEl = $(el).wrap(`<div class=\"live-code-element live-code-console-element unreset\"></div>`).parent();\n    this.wrapperEl = this.$wrapperEl[0];\n\n    this.id = this.$el.attr(`data-id`);\n    if(!this.id)\n    {\n      //generate id\n      this.id = `code-${  Math.round(Math.random() * 1000 * new Date().getTime())}`;\n      this.$el.attr(`data-id`, this.id);\n    }\n\n    this.file = this.$el.data(`file`);\n\n    this.$el.css(`width`, `100%`).css(`height`, `100%`);\n\n    this.logs = [];\n\n    this.isRunning = false;\n  }\n\n  pause() {\n    if(!this.isRunning) {\n      return;\n    }\n    this.isRunning = false;\n    this.nodeAppRunner.stop();\n  }\n\n  resume() {\n    if(this.isRunning) {\n      return;\n    }\n    if(!this.applicationPath) {\n      return;\n    }\n    this.nodeAppRunner.run(this.applicationPath);\n    this.isRunning = true;\n  }\n\n  destroy() {\n    this.pause();\n  }\n\n  runNodeApp(applicationPath) {\n    this.pause();\n    this.applicationPath = applicationPath;\n    this.resume();\n  }\n\n  message(event) {\n    let str = htmlEscape(event.message);\n    // remove %c directives, as we don't receive the extra styling info in this event\n    str = str.replace(/\\%c/gi, ``);\n    let fileName = event.sourceId.split(`/`);\n    fileName = fileName[fileName.length - 1];\n    this.logs.push(`<div class=\"console-message\">\n      <pre class=\"console-message__content console-message__content--level${event.level}\">${  str  }</pre>\n      <div class=\"console-message__origin\">${fileName}:${event.line}</div>\n    </div>`);\n    while(this.logs.length > 20) {\n      this.logs.shift();\n    }\n    const html = this.logs.join(``);\n    this.el.innerHTML = html;\n    this.wrapperEl.scrollTop = this.wrapperEl.scrollHeight;\n  }\n}\n","const remote = requireNode('electron').remote;\nconst path = requireNode('path');\nconst os = requireNode('os');\nconst pty = requireNode('node-pty');\nconst Terminal = requireNode('xterm').Terminal;\nconst fit = requireNode('xterm/lib/addons/fit/fit');\n\nTerminal.applyAddon(fit);\n\nexport default class TerminalElement {\n\n  constructor(el, options) {\n    this.el = el;\n    this.$el = $(el);\n\n    //options\n    if(!options) {\n      options = {};\n    }\n    //wrap element in a container\n    this.$wrapperEl = $(el).wrap(`<div class=\"live-code-element live-code-terminal-element\"></div>`).parent();\n    this.wrapperEl = this.$wrapperEl[0];\n\n    this.id = this.$el.attr(`data-id`);\n    if(!this.id)\n    {\n      //generate id\n      this.id = `code-${  Math.round(Math.random() * 1000 * new Date().getTime())}`;\n      this.$el.attr(`data-id`, this.id);\n    }\n\n    this.dir = this.$el.data(`dir`);\n    if (this.dir) {\n      this.dir = path.resolve(remote.getGlobal(`__dirname`), this.dir);\n    } else {\n      this.dir = remote.getGlobal(`__dirname`);\n    }\n    this.autorun = this.$el.data(`autorun`);\n\n    this.$el.css(`width`, `100%`).css(`height`, `100%`);\n\n    this.isRunning = false;\n\n    // Initialize node-pty with an appropriate shell\n    this.shell = process.env[os.platform() === 'win32' ? 'COMSPEC' : 'SHELL'];\n    this.ptyProcess = pty.spawn(this.shell, [], {\n      name: 'xterm-color',\n      cols: 80,\n      rows: 30,\n      cwd: this.dir,\n      env: process.env\n    });\n\n    // Initialize xterm.js and attach it to the DOM\n    this.xterm = new Terminal();\n    this.xterm.setOption('fontSize', '24');\n    this.xterm.open(this.el);\n\n    this.xterm.on('data', (data) => {\n      this.ptyProcess.write(data);\n    });\n    this.ptyProcess.on('data', (data) => {\n      this.xterm.write(data);\n    });\n\n    if(this.autorun) {\n      this.executeCommand(this.autorun + \"\\n\");\n    }\n  }\n\n  layout() {\n    this.xterm.fit();\n  }\n\n  pause() {\n    this.isRunning = false;\n  }\n\n  resume() {\n    if (this.isRunning) {\n      return;\n    }\n    this.isRunning = true;\n  }\n\n  executeCommand(commandString) {\n    this.ptyProcess.write(commandString);\n  }\n\n  destroy() {\n    this.pause();\n    this.xterm.off('data');\n    this.ptyProcess.off('data');\n    this.ptyProcess.kill();\n    this.xterm.destroy();\n  }\n}\n","export default class WebPreviewElement {\n\n  constructor(el, options) {\n    this.el = el;\n    this.$el = $(el);\n    //options\n    if(!options) {\n      options = {};\n    }\n\t\t//wrap element in a container\n    this.$wrapperEl = $(el).wrap(`<div class=\"live-code-element live-code-web-preview-element\"></div>`).parent();\n    this.wrapperEl = this.$wrapperEl[0];\n\n    this.id = this.$el.attr(`data-id`);\n    if(!this.id)\n\t\t{\n\t\t\t//generate id\n      this.id = `code-${  Math.round(Math.random() * 1000 * new Date().getTime())}`;\n      this.$el.attr(`data-id`, this.id);\n    }\n\n    this.file = this.$el.data(`file`) || this.$el.data(`url`);\n    this.autoload = this.$el.data(`autoload`) || false;\n    this.zoomfactor = this.$el.data(`zoomfactor`) || false;\n\n    this.console = this.$el.data(`console`) || false;\n\n    this.$el.css(`width`, `100%`).css(`height`, `100%`);\n\n    this.url = false;\n    this.blocks = false;\n    this.isRunning = false;\n\t\t//webview gets created by calling updateUrl or updateCode\n  }\n\n  get needsOutputPathPrefix() {\n    return !(this.$el.data(`url`));\n  }\n\n  destroy() {\n    this.pause();\n  }\n\n  pause() {\n    this.isRunning = false;\n    if(this.webview) {\n      this.webview.removeEventListener(`did-get-response-details`, this._didGetResponseDetailsHandler);\n      this.webview.removeEventListener(`dom-ready`, this._domReadyHandler);\n      this.webview.removeEventListener(`did-fail-load`, this._didFailLoadHandler);\n      this.webview.removeEventListener(`ipc-message`, this._ipcMessageHandler);\n      this.webview.removeEventListener(`console-message`, this._consoleMessageHandler);\n      this.webview.parentNode.removeChild(this.webview);\n      this.webview = false;\n      clearTimeout(this.retryTimeout);\n    }\n  }\n\n  resume() {\n    if(this.isRunning) {\n      return;\n    }\n    if(this.url === false && this.blocks === false) {\n      return;\n    }\n    this.isRunning = true;\n    this._createWebview();\n  }\n\n  _createWebview() {\n    //create a webview tag\n    if(this.webview) {\n      this.webview.parentNode.removeChild(this.webview);\n      this.webview = false;\n    }\n    this.webview = document.createElement(`webview`);\n    this.webview.style.width = `100%`;\n    this.webview.style.height = `100%`;\n    this.webview.preload = `js/livecode-webpreview.js`;\n    this.el.appendChild(this.webview);\n\n    const url = (this.url !== false) ? this.url : `webpreview.html`;\n    let htmlSrc = ``;\n    if(this.blocks !== false) {\n      for(let i = 0; i < this.blocks.length; i++)\n\t\t\t{\n        htmlSrc += this.blocks[i].code;\n      }\n    }\n\n\t\t//add listeners\n    this._didGetResponseDetailsHandler = e => {\n      if(e.originalURL !== this.webview.src) {\n        return;\n      }\n      if(this.$el.attr(`data-open-devtools`)) {\n        this.webview.openDevTools();\n      }\n    };\n    this.webview.addEventListener(`did-get-response-details`, this._didGetResponseDetailsHandler);\n\n    this._domReadyHandler = () => {\n      if (this.zoomfactor) {\n        const zoomfactor = parseFloat(this.zoomfactor);\n        this.webview.setZoomFactor(zoomfactor);\n      }\n    };\n    this.webview.addEventListener(`dom-ready`, this._domReadyHandler);\n\n    this._didFailLoadHandler = () => {\n      this.retryTimeout = setTimeout(() => {\n        this.pause();\n        this.resume();\n      }, 1000);\n    };\n    this.webview.addEventListener(`did-fail-load`, this._didFailLoadHandler);\n\n    this._consoleMessageHandler = e => {\n      this.$wrapperEl.trigger(`console-message`, e);\n    };\n    this.webview.addEventListener(`console-message`, this._consoleMessageHandler);\n\n    this._ipcMessageHandler = event => {\n      if(event.channel === `request-html`)\n      {\n        this.webview.send(`receive-html`, htmlSrc);\n      }\n    };\n    this.webview.addEventListener(`ipc-message`, this._ipcMessageHandler);\n\n    if(!this.$el.attr(`data-disable-nodeintegration`)) {\n      this.webview.setAttribute(`nodeintegration`, ``);\n    }\n    this.webview.setAttribute(`src`, url);\n  }\n\n  updateUrl(url) {\n    this.pause();\n    this.url = url;\n    this.blocks = false;\n    this.resume();\n  }\n\n  updateCode(blocks) {\n    this.pause();\n    this.url = false;\n    this.blocks = blocks;\n    this.resume();\n  }\n\n  openDevTools() {\n    this.webview.openDevTools();\n  }\n}\n","export default class WebcamElement {\n\n  constructor(el, options) {\n    this.el = el;\n    this.$el = $(el);\n\n    //options\n    if(!options) {\n      options = {};\n    }\n\n    this.id = this.$el.attr(`data-id`);\n    if(!this.id)\n    {\n      //generate id\n      this.id = `webcam-${  Math.round(Math.random() * 1000 * new Date().getTime())}`;\n      this.$el.attr(`data-id`, this.id);\n    }\n\n    this.source = this.$el.attr(`data-source`);\n    if(this.source) {\n      this.sourceEl = document.querySelector(this.source);\n    }\n\n    this.ctx = this.el.getContext(`2d`);\n\n    this.isRunning = false;\n  }\n\n  destroy() {\n    this.pause();\n  }\n\n  pause() {\n    this.isRunning = false;\n    window.cancelAnimationFrame(this.animationFrameId);\n  }\n\n  resume() {\n    if(this.isRunning) {\n      return;\n    }\n    this.isRunning = true;\n    this.animationFrameId = window.requestAnimationFrame(() => this.drawLoop());\n  }\n\n  drawLoop() {\n    if(this.isRunning) {\n      window.requestAnimationFrame(() => this.drawLoop());\n    }\n    if(!this.sourceEl) {\n      return;\n    }\n    this.el.width = this.sourceEl.width;\n    this.el.height = this.sourceEl.height;\n    this.ctx.clearRect(0, 0, this.el.width, this.el.height);\n    this.ctx.drawImage(this.sourceEl, 0, 0);\n  }\n}\n","import ConsoleElement from './ConsoleElement';\nimport TerminalElement from './TerminalElement';\nimport CodeElement from './CodeElement';\nimport WebPreviewElement from './WebPreviewElement';\nimport WebcamElement from './WebcamElement';\n\nconst path = requireNode(`path`);\nconst fs = requireNode(`fs-extra`);\n\nexport default class LiveCode {\n\n  constructor($el, config, readyCallback) {\n    this.$el = $el;\n    this.el = this.$el[0];\n\n    if(this.$el.attr(`data-entry-path`)) {\n      this.entryPath = path.join(config.presentationPath, this.$el.attr(`data-entry-path`));\n    }\n    if(this.$el.attr(`data-output-path`)) {\n      this.outputPath = path.join(config.presentationPath, this.$el.attr(`data-output-path`));\n    } else {\n      if(this.entryPath) {\n        this.outputPath = this.entryPath;\n      }\n    }\n\n    const p = Promise.resolve();\n    p.then(() => {\n      if(this.entryPath && this.entryPath !== this.outputPath) {\n        return fs.copy(this.entryPath, this.outputPath);\n      }\n    })\n    .then(() => {\n      //create the consoles\n      this.consoleElements = {};\n      this.$el.find(`[data-type=\"console\"]`).each(((index, consoleEl) => this.createConsoleElement(consoleEl)));\n\n      //create the terminals\n      this.terminalElements = {};\n      this.$el.find(`[data-type=\"terminal\"]`).each(((index, terminalEl) => this.createTerminalElement(terminalEl)));\n\n      //create the previews\n      this.webPreviewElements = {};\n      this.$el.find(`[data-type=\"web-preview\"]`).each(((index, webPreviewEl) => this.createWebPreviewElement(webPreviewEl)));\n\n      //create the code editors\n      this.codeElements = {};\n      this.$el.find(`[data-type=\"code\"]`).each(((index, codeEl) => this.createCodeElement(codeEl)));\n\n      //create the webcam elements\n      this.webcamElements = {};\n      this.$el.find(`[data-type=\"webcam\"]`).each(((index, webcamEl) => this.createWebcamElement(webcamEl)));\n\n      //create run buttons\n      this.runButtonEls = [];\n      this.$el.find(`[data-type=\"run-button\"]`).each(((index, runButtonEl) => this.createRunButton(runButtonEl)));\n\n      //create save buttons\n      this.saveButtonEls = [];\n      this.$el.find(`[data-type=\"save-button\"]`).each(((index, saveButtonEl) => this.createSaveButton(saveButtonEl)));\n\n      //create reload buttons\n      this.reloadButtonEls = [];\n      this.$el.find(`[data-type=\"reload-button\"]`).each(((index, reloadButtonEl) => this.createReloadButton(reloadButtonEl)));\n\n      //create reload buttons\n      this.devToolsButtonEls = [];\n      this.$el.find(`[data-type=\"devtools-button\"]`).each(((index, devToolsButtonEl) => this.createDevToolsButton(devToolsButtonEl)));\n\n    })\n    .then(() => this.setCodeElementValuesFromFiles())\n    .then(() => {\n      this.loaded = true;\n      if(this.isRunning) {\n        this.isRunning = false;\n        this.resume();\n      }\n    })\n    .then(readyCallback).catch(err => console.log(err));\n\n    //disable keyboard bubbling up\n    $(window).on(`keydown`, event => this.keyDownHandler(event));\n  }\n\n  keyDownHandler(e) {\n    if(this.el.contains(document.activeElement)) {\n      e.stopImmediatePropagation();\n    }\n  }\n\n  /**\n   * return a previously created code element, based on the input\n   * input can be:\n   *  - html dom element\n   *  - id of code element\n   *\n   * returns the code element if found, otherwise returns false\n   */\n  getCodeElement(input) {\n    return this.getElement(this.codeElements, input);\n  }\n\n  /**\n   * return a previously created web preview element, based on the input\n   * input can be:\n   *  - html dom element\n   *  - id of code element\n   *\n   * returns the web preview element if found, otherwise returns false\n   */\n  getWebPreviewElement(input) {\n    return this.getElement(this.webPreviewElements, input);\n  }\n\n  getElement(elementsCollection, input) {\n    let propertyToCheck = `id`;\n    if(input.nodeName) {\n      propertyToCheck = `el`;\n    }\n    for(const key in elementsCollection)\n    {\n      if(elementsCollection[key][propertyToCheck] === input) {\n        return elementsCollection[key];\n      }\n    }\n    return false;\n  }\n\n  setCodeElementValueFromFile(codeElement, filePath) {\n    return codeElement.readFromFile(filePath);\n  }\n\n  saveCodeElementToFile(codeElement, filePath) {\n    return codeElement.saveToFile(filePath);\n  }\n\n  getFilePath(file) {\n    if(!file) {\n      return false;\n    }\n    if(this.outputPath) {\n      return path.join(this.outputPath, file);\n    }\n    return file;\n  }\n\n  getFilePathForCodeElement(codeElement) {\n    if(!codeElement.file) {\n      return false;\n    }\n    return this.getFilePath(codeElement.file);\n  }\n\n  setCodeElementValuesFromFiles() {\n    const tasks = [];\n    let key;\n    let codeElement;\n    let filePath;\n    for(key in this.codeElements)\n    {\n      codeElement = this.codeElements[key];\n      filePath = this.getFilePathForCodeElement(codeElement);\n      if(filePath)\n      {\n        tasks.push(this.setCodeElementValueFromFile(codeElement, filePath));\n      }\n    }\n    return Promise.all(tasks);\n  }\n\n  autoStartWebpreviewElementsWhenNeeded() {\n    for(const key in this.webPreviewElements)\n    {\n      const webPreviewElement = this.webPreviewElements[key];\n      if(webPreviewElement.autoload) {\n        this.reloadWebPreviewElement(webPreviewElement);\n      }\n    }\n  }\n\n  saveCodeElementsToFiles() {\n    const tasks = [];\n    let key;\n    let codeElement;\n    let filePath;\n    for(key in this.codeElements)\n    {\n      codeElement = this.codeElements[key];\n      filePath = this.getFilePathForCodeElement(codeElement);\n      if(filePath)\n      {\n        tasks.push(this.saveCodeElementToFile(codeElement, filePath));\n      }\n    }\n    return Promise.all(tasks);\n  }\n\n  destroy() {\n    let key;\n    for(key in this.consoleElements)\n    {\n      this.destroyConsoleElement(this.consoleElements[key]);\n    }\n    for(key in this.terminalElements)\n    {\n      this.destroyTerminalElement(this.terminalElements[key]);\n    }\n    for(key in this.webPreviewElements)\n    {\n      this.destroyWebPreviewElement(this.webPreviewElements[key]);\n    }\n    for(key in this.codeElements)\n    {\n      this.destroyCodeElement(this.codeElements[key]);\n    }\n    for(key in this.webcamElements)\n    {\n      this.destroyWebcamElement(this.webcamElements[key]);\n    }\n    this.runButtonEls.forEach(el => this.destroyRunButton(el));\n    this.saveButtonEls.forEach(el => this.destroySaveButton(el));\n    this.reloadButtonEls.forEach(el => this.destroyReloadButton(el));\n    this.devToolsButtonEls.forEach(el => this.destroyDevToolsButton(el));\n    //TODO: destroy the tmp directory for this instance\n  }\n\n  pause() {\n    this.isRunning = false;\n    if(!this.loaded) {\n      return;\n    }\n    let key;\n    for(key in this.consoleElements)\n    {\n      this.consoleElements[key].pause();\n    }\n    for(key in this.terminalElements)\n    {\n      this.terminalElements[key].pause();\n    }\n    for(key in this.webPreviewElements)\n    {\n      this.webPreviewElements[key].pause();\n    }\n    for(key in this.codeElements)\n    {\n      this.codeElements[key].pause();\n    }\n    for(key in this.webcamElements)\n    {\n      this.webcamElements[key].pause();\n    }\n  }\n\n  resume() {\n    this.isRunning = true;\n    if(!this.loaded) {\n      return;\n    }\n    let key;\n    for(key in this.consoleElements)\n    {\n      this.consoleElements[key].resume();\n    }\n    for(key in this.terminalElements)\n    {\n      this.terminalElements[key].resume();\n    }\n    for(key in this.webPreviewElements)\n    {\n      this.webPreviewElements[key].resume();\n    }\n    for(key in this.codeElements)\n    {\n      this.codeElements[key].resume();\n    }\n    for(key in this.webcamElements)\n    {\n      this.webcamElements[key].resume();\n    }\n    this.autoStartWebpreviewElementsWhenNeeded();\n  }\n\n  layout() {\n    //might be triggered after split pane resize or tab switch\n    //codemirror instances need to be updated\n    for(const key in this.codeElements)\n    {\n      this.codeElements[key].layout();\n    }\n    for(const key in this.terminalElements)\n    {\n      this.terminalElements[key].layout();\n    }\n  }\n\n  createConsoleElement(consoleEl) {\n    const consoleElement = new ConsoleElement(consoleEl);\n    this.consoleElements[consoleElement.id] = consoleElement;\n  }\n\n  destroyConsoleElement(consoleElement) {\n    consoleElement.destroy();\n  }\n\n  createTerminalElement(terminalEl) {\n    const terminalElement = new TerminalElement(terminalEl);\n    this.terminalElements[terminalElement.id] = terminalElement;\n  }\n\n  destroyTerminalElement(terminalElement) {\n    terminalElement.destroy();\n  }\n\n  createWebPreviewElement(webPreviewEl) {\n    const webPreviewElement = new WebPreviewElement(webPreviewEl);\n    webPreviewElement.$wrapperEl.on(`console-message`, this.webPreviewConsoleMessageHandler.bind(this, webPreviewElement));\n    this.webPreviewElements[webPreviewElement.id] = webPreviewElement;\n  }\n\n  destroyWebPreviewElement(webPreviewElement) {\n    webPreviewElement.$wrapperEl.off(`console-message`);\n    webPreviewElement.destroy();\n  }\n\n  createCodeElement(codeEl) {\n    const codeElement = new CodeElement(codeEl);\n    this.codeElements[codeElement.id] = codeElement;\n  }\n\n  destroyCodeElement(codeElement) {\n    codeElement.destroy();\n  }\n\n  createWebcamElement(webcamEl) {\n    const webcamElement = new WebcamElement(webcamEl);\n    this.webcamElements[webcamElement.id] = webcamElement;\n  }\n\n  destroyWebcamElement(webcamElement) {\n    webcamElement.destroy();\n  }\n\n  createRunButton(runButtonEl) {\n    this.runButtonEls.push(runButtonEl);\n    $(runButtonEl).on(`click`, e => {\n      if(this.webPreviewElements[$(runButtonEl).data(`target`)]) {\n        //save the files first\n        this.saveCodeElementsToFiles()\n          .catch(err => console.log(err))\n          .then(() => {\n            //update the web preview\n            this.updateWebPreviewElement(this.webPreviewElements[$(runButtonEl).data(`target`)]);\n          });\n      } else if(this.consoleElements[$(runButtonEl).data(`target`)]) {\n        const applicationPath = this.getFilePath(this.consoleElements[$(runButtonEl).data(`target`)].file);\n        this.consoleElements[$(runButtonEl).data(`target`)].runNodeApp(applicationPath);\n      }\n      e.preventDefault();\n      e.stopImmediatePropagation();\n    });\n  }\n\n  destroyRunButton(runButtonEl) {\n    $(runButtonEl).off(`click`);\n  }\n\n  createSaveButton(saveButtonEl) {\n    this.saveButtonEls.push(saveButtonEl);\n    $(saveButtonEl).on(`click`, e => {\n      e.preventDefault();\n      e.stopImmediatePropagation();\n      //get the target element for this button\n      const targetString = $(saveButtonEl).data(`target`);\n      if(targetString === `all`) {\n        return this.saveCodeElementsToFiles();\n      }\n      const codeElement = this.getCodeElement(targetString);\n      if(!codeElement) {\n        return;\n      }\n      const filePath = this.getFilePathForCodeElement(codeElement);\n      if(!filePath) {\n        return;\n      }\n      codeElement.saveToFile(filePath).catch(function(err) { console.log(err); });\n    });\n  }\n\n  destroySaveButton(saveButtonEl) {\n    $(saveButtonEl).off(`click`);\n  }\n\n  createReloadButton(reloadButtonEl) {\n    this.reloadButtonEls.push(reloadButtonEl);\n    $(reloadButtonEl).on(`click`, e => {\n      //get the reload button target\n      let reloadTargetElement = this.getCodeElement($(reloadButtonEl).data(`target`));\n      if(reloadTargetElement) {\n        this.reloadCodeElement(reloadTargetElement);\n        e.preventDefault();\n        e.stopImmediatePropagation();\n        return;\n      }\n      reloadTargetElement = this.getWebPreviewElement($(reloadButtonEl).data(`target`));\n      if(reloadTargetElement) {\n        this.reloadWebPreviewElement(reloadTargetElement);\n        e.preventDefault();\n        e.stopImmediatePropagation();\n        return;\n      }\n      // reload all elements\n      this.reloadAllCodeElements().then(() => this.reloadAllWebPreviewElements());\n    });\n  }\n\n  reloadAllCodeElements() {\n    const tasks = [];\n    for(const key in this.codeElements)\n    {\n      tasks.push(this.reloadCodeElement(this.codeElements[key]));\n    }\n    return Promise.all(tasks);\n  }\n\n  reloadCodeElement(codeElement) {\n    const filePath = this.getFilePathForCodeElement(codeElement);\n    if(!filePath) {\n      return;\n    }\n    return codeElement.readFromFile(filePath).catch(err => console.log(err));\n  }\n\n  reloadAllWebPreviewElements() {\n    const tasks = [];\n    for(const key in this.webPreviewElements)\n    {\n      tasks.push(this.reloadWebPreviewElement(this.webPreviewElements[key]));\n    }\n    return Promise.all(tasks);\n  }\n\n  reloadWebPreviewElement(webPreviewElement) {\n    return this.updateWebPreviewElement(webPreviewElement);\n  }\n\n  destroyReloadButton(reloadButtonEl) {\n    $(reloadButtonEl).off(`click`);\n  }\n\n  createDevToolsButton(devToolsButtonEl) {\n    this.devToolsButtonEls.push(devToolsButtonEl);\n    $(devToolsButtonEl).on(`click`, e => {\n      //get the target element for this button\n      const webPreviewElement = this.getWebPreviewElement($(devToolsButtonEl).data(`target`));\n      if (!webPreviewElement) {\n        return;\n      }\n      webPreviewElement.openDevTools();\n      e.preventDefault();\n      e.stopImmediatePropagation();\n    });\n  }\n\n  destroyDevToolsButton(devToolsButtonEl) {\n    $(devToolsButtonEl).off(`click`);\n  }\n\n  webPreviewConsoleMessageHandler(webPreviewElement, jqEvent, event) {\n    //get the console element for this web preview\n    const consoleElement = this.getConsoleElementForWebPreview(webPreviewElement);\n    if(consoleElement)\n    {\n      consoleElement.message(event);\n    }\n  }\n\n  getConsoleElementForWebPreview(webPreviewElement) {\n    return this.consoleElements[webPreviewElement.console];\n  }\n\n  getWebPreviewElementForCodeElement(codeElement) {\n    return this.webPreviewElements[codeElement.processor];\n  }\n\n  updateWebPreviewElement(webPreviewElement) {\n    //load a file or code blocks?\n    if(webPreviewElement.file) {\n      if(this.outputPath && webPreviewElement.needsOutputPathPrefix) {\n        return webPreviewElement.updateUrl(path.join(this.outputPath, webPreviewElement.file));\n      }\n      return webPreviewElement.updateUrl(webPreviewElement.file);\n    }\n\n    //gather all the code for this element\n    const blocks = [];\n    for(const key in this.codeElements)\n    {\n      const codeElement = this.codeElements[key];\n      if(codeElement.processor === webPreviewElement.id)\n      {\n        const block = {\n          language: codeElement.language,\n          code: codeElement.getValue()\n        };\n        blocks.push(block);\n      }\n    }\n    webPreviewElement.updateCode(blocks);\n  }\n\n}\n","require(`es6-promise`).polyfill();\n\nimport Presentation from './classes/Presentation';\nimport SlidesFolderParser from '../../server/classes/SlidesFolderParser';\n\n(() => {\n\n  const remote = requireNode(`electron`).remote;\n  const presentationPath = remote.getGlobal(`__dirname`);\n  const path = requireNode(`path`);\n\n  const init = () => {\n    const settings = {\n      presentationPath: presentationPath,\n      // mobileServerUrl: 'https://bbridges.herokuapp.com',\n      // mobileServerUrl: `http://localhost:5000`,\n      // mobileServerUsername: `wouter.verweirder@gmail.com`,\n      // mobileServerPassword: `geheim`\n    };\n    const slidesFolderParser = new SlidesFolderParser();\n    slidesFolderParser.parse(presentationPath, path.resolve(presentationPath, `slides`))\n      .then(data => {\n        new Presentation(data, `presentation`, settings);\n      });\n  };\n\n  init();\n})();\n","let requireNode;\nif(!(typeof window !== `undefined` && window)) {\n  requireNode = require;\n} else {\n  requireNode = window.requireNode;\n}\n\nconst fs = requireNode(`fs-extra`);\nconst path = requireNode(`path`);\n\nconst getFileProperties = filePath => {\n  let _fd, _o;\n  return fs.open(filePath, `r`)\n    .then(fd => {\n      _fd = fd;\n      return fd;\n    })\n    .then(fd => fs.fstat(fd))\n    .then(o => {\n      _o = o;\n      return _o;\n    })\n    .then(() => fs.close(_fd))\n    .then(() => {\n      return {\n        path: filePath,\n        isDirectory: _o.isDirectory(),\n        isFile: _o.isFile()\n      };\n    });\n};\nexport default class SlidesFolderParser {\n  constructor() {\n  }\n  parse(presentationPath, slidesFolderPath) {\n    //read the contents of the slides directory\n    return fs.readdir(slidesFolderPath)\n      .then(result => result.filter(name => name.indexOf(`.`) > 0))\n      .then(result => result.map(name => path.resolve(slidesFolderPath, name)))\n      .then(result => Promise.all(result.map(filePath => getFileProperties(filePath))))\n      .then(result => {\n        const data = {\n          slides: []\n        };\n        const slidesByName = {};\n        result.forEach(props => {\n          const slide = this.createSlideObjectBasedOnFileProperties(props, presentationPath, slidesByName);\n          if(!slidesByName[slide.name]) {\n            data.slides.push(slide);\n          }\n          slidesByName[slide.name] = slide;\n        });\n        // console.log(data.slides);\n        return data;\n      })\n      .catch(e => {\n        console.error(e);\n      });\n  }\n\n  parseSlideBaseName(slideBaseName) {\n    const parsed = {};\n    parsed.ext = path.extname(slideBaseName);\n    parsed.name = slideBaseName.substr(0, slideBaseName.length - parsed.ext.length);\n    const splitted = parsed.name.split(`.`);\n    const keywords = [`mobile`, `desktop`, `muted`, `loop`, `cover`, `controls`];\n    keywords.forEach(keyword => {\n      const index = splitted.indexOf(keyword);\n      if(index > -1) {\n        parsed[keyword] = true;\n        splitted.splice(index, 1);\n      }\n    });\n    parsed.name = splitted.join(`.`);\n    return parsed;\n  }\n\n  createSlideObjectBasedOnFileProperties(fileProperties, presentationPath, slidesByName) {\n\n    const parsed = this.parseSlideBaseName(path.basename(fileProperties.path));\n    let url = path.relative(presentationPath, fileProperties.path).replace(`\\\\`, `/`);\n    if(parsed.ext === `.jpg` || parsed.ext === `.jpeg` || parsed.ext === `.gif` || parsed.ext === `.png`) {\n      url = `slides-builtin/image.html?image=${  url}`;\n    }\n    if(parsed.ext === `.mp4`) {\n      url = `slides-builtin/video.html?video=${  url}`;\n    }\n    if(slidesByName[parsed.name]) {\n      if(parsed.mobile) {\n        slidesByName[parsed.name].mobile.url = url;\n        slidesByName[parsed.name].mobile.explicit = true;\n      } else if(parsed.desktop) {\n        slidesByName[parsed.name].presentation.url = url;\n        slidesByName[parsed.name].presentation.explicit = true;\n      } else {\n        //set the one which is not set explicitly\n        if(slidesByName[parsed.name].mobile.explicit) {\n          slidesByName[parsed.name].presentation.url = url;\n        } else {\n          slidesByName[parsed.name].mobile.url = url;\n        }\n        return slidesByName[parsed.name];\n      }\n    }\n\n    return {\n      name: parsed.name,\n      presentation: {\n        url: url,\n        explicit: false\n      },\n      mobile: {\n        url: url,\n        explicit: false\n      }\n    };\n  }\n}\n","export const Constants = {\n  GO_TO_PREVIOUS_SLIDE: `goToPreviousSlide`,\n  GO_TO_NEXT_SLIDE: `goToNextSlide`,\n  SET_SLIDES: `setSlides`,\n  SET_CURRENT_SLIDE_INDEX: `setCurrentSlideIndex`,\n\n  MESSAGE: `message`,\n  SOCKET_SEND: `socketSend`,\n  SOCKET_RECEIVE: `socketReceive`,\n  JOIN_SLIDE_ROOM: `joinSlideRoom`,\n  LEAVE_SLIDE_ROOM: `leaveSlideRoom`,\n\n  ROLE_PRESENTATION: `presentation`,\n  ROLE_MOBILE: `mobile`,\n\n  STATE_ACTIVE: `active`,\n  STATE_INACTIVE: `inactive`,\n\n  SET_SUBSTATE: `setSubstate`,\n\n  CHILD_APP_SAVE_CODE: `childAppSaveCode`,\n  CHILD_APP_RUN_CODE: `childAppRunCode`,\n  CHILD_APP_STDOUT_DATA: `childAppStdoutData`,\n  CHILD_APP_STDERR_DATA: `childAppStderrData`,\n\n  OPEN_COMMAND_LINE: `openCommandLine`,\n  OPEN_CAMERA: `openCamera`,\n\n  BLINK: `blink`,\n\n  HEART_RATE_POLAR: `heartRatePolar`,\n\n  SET_TEAM: `setTeam`,\n  UPDATE_MOTION: `updateMotion`,\n\n  YOU_WIN: `youWin`,\n  YOU_LOSE: `youLose`,\n\n  SHAKE_YOUR_PHONES_INTRO: `shakeYourPhonesIntro`,\n  SHAKE_YOUR_PHONES_GAME: `shakeYourPhonesGame`,\n  SHAKE_YOUR_PHONES_FINISHED: `shakeYourPhonesFinished`,\n\n  SHAKE_YOUR_PHONES_CLIENT_ADDED: `shakeYourPhonesClientAdded`,\n  SHAKE_YOUR_PHONES_CLIENT_REMOVED: `shakeYourPhonesClientRemoved`,\n  SHAKE_YOUR_PHONES_CLIENT_LIST: `shakeYourPhonesClientList`,\n  SHAKE_YOUR_PHONES_CLIENT_UPDATE: `shakeYourPhonesClientUpdate`\n};\n","import {Constants} from '../Constants';\n\nexport default class ContentBase{\n\n  constructor($slideHolder) {\n    this.$slideHolder = $slideHolder;\n    this.slideHolder = this.$slideHolder[0];\n    this.width = this.slideHolder.offsetWidth;\n    this.height = this.slideHolder.offsetHeight;\n    this.prevWidth = this.width;\n    this.prevHeight = this.height;\n    this.widthChanged = false;\n    this.heightChanged = false;\n    this.sizeChanged = false;\n    this.src = $slideHolder.attr(`data-src`);\n    this.name = $slideHolder.attr(`data-name`);\n    this.settings = {};\n    try {\n      this.settings = JSON.parse($(`#presentation`).attr(`data-presentation-settings`));\n    } catch (e) {\n      console.error(e);\n    }\n    this.fps = 60;\n    this._animationFrameId = false;\n    this._currentTime = 0;\n    this._delta = 0;\n    this._interval = false;\n    this._lastTime = new Date().getTime();\n    this.currentFrame = 0;\n\n    this.startListeningForMessages();\n\n    this.__drawLoop = this._drawLoop.bind(this);\n    this._interval = 1000 / this.fps;\n\n    window.requestAnimationFrame(() => {\n      $slideHolder.trigger(`load`);\n    });\n  }\n\n  startListeningForMessages() {\n    this._slideHolderMessageToSlideHandler = this.slideHolderMessageToSlideHandler.bind(this);\n    this.$slideHolder.on(`message-to-slide`, this._slideHolderMessageToSlideHandler);\n  }\n\n  stopListeningForMessages() {\n    this.$slideHolder.off(`message-to-slide`, this._slideHolderMessageToSlideHandler);\n  }\n\n  slideHolderMessageToSlideHandler(event, message) {\n    this.receiveMessage({data: message});\n  }\n\n  receiveMessage(event) {\n    if(!event.data) {\n      return;\n    }\n    switch(event.data.action) {\n    case `setState`:\n      this.setState(event.data.state);\n      break;\n    case `destroy`:\n      this.destroy();\n      break;\n    case Constants.SOCKET_RECEIVE:\n      this.receiveSocketMessage(event.data.message);\n      break;\n    default:\n      this.handleMessage(event.data);\n      break;\n    }\n  }\n\n  destroy() {\n    this.stopListeningForMessages();\n    window.cancelAnimationFrame(this._animationFrameId);\n  }\n\n  postMessage(data) {\n    this.$slideHolder.trigger(`message-from-slide`, data);\n  }\n\n  handleMessage(data) { // eslint-disable-line no-unused-vars\n  }\n\n  postSocketMessage(message) {\n    this.postMessage({\n      action: Constants.SOCKET_SEND,\n      message: message\n    });\n  }\n\n  receiveSocketMessage(message) { // eslint-disable-line no-unused-vars\n    //console.log('receiveSocketMessageame, message);\n  }\n\n  setState(state) {\n    if(state !== this.state) {\n      this.state = state;\n      this.onStateChanged();\n      if(this.state === Constants.STATE_ACTIVE) {\n        this.currentFrame = 0;\n        this._drawLoop();\n      } else {\n        window.cancelAnimationFrame(this._animationFrameId);\n      }\n    }\n  }\n\n  onStateChanged() {\n  }\n\n  _drawLoop() {\n    this._animationFrameId = window.requestAnimationFrame(this.__drawLoop);\n    this._currentTime = (new Date()).getTime();\n    this._delta = (this._currentTime - this._lastTime);\n    if(this._delta > this._interval) {\n      this.currentFrame++;\n      this.prevWidth = this.width;\n      this.prevHeight = this.height;\n      this.width = this.slideHolder.offsetWidth;\n      this.height = this.slideHolder.offsetHeight;\n      this.widthChanged = (this.width !== this.prevWidth);\n      this.heightChanged = (this.height !== this.prevHeight);\n      this.sizeChanged = (this.widthChanged || this.heightChanged);\n      this.drawLoop(this._delta);\n      this._lastTime = this._currentTime - (this._delta % this._interval);\n    }\n  }\n\n  drawLoop(delta) { // eslint-disable-line no-unused-vars\n  }\n\n}\n","import fetch from 'isomorphic-fetch';\n\nexport default class MobileServerBridge {\n\n  constructor(presentation, settings) {\n    this.presentation = presentation;\n    this.settings = settings;\n    this.connect();\n  }\n\n  connect() {\n    if (!this.settings.mobileServerUrl) {\n      return;\n    }\n    console.log(`MobileServerBridge.connect`);\n    //console.warn('MobileServerBridge disabled');\n    //return;\n    //post to the api\n    fetch(`${this.settings.mobileServerUrl}/login`, {\n      method: `POST`,\n      body: JSON.stringify(this.getLoginCredentials()),\n      headers: new Headers({'Content-Type': `application/json`})\n    })\n    .then(response => response.json())\n    .then(result => this.loginHandler(result))\n    .catch(() => {\n      //retry after one second\n      setTimeout(() => this.connect(), 1000);\n    });\n  }\n\n  getLoginCredentials() {\n    return {\n      email: this.settings.mobileServerUsername,\n      password: this.settings.mobileServerPassword,\n    };\n  }\n\n  loginHandler(result) {\n    this.token = result.token;\n    this.socket = io(this.settings.mobileServerUrl, {\n      query: `token=${  this.token}`,\n      reconnection: false,\n      forceNew: true\n    });\n    this.socket.on(`connect`, this.socketConnectHandler.bind(this));\n    this.socket.on(`disconnect`, this.socketDisconnectHandler.bind(this));\n    this.socket.on(`message`, this.socketMessageHandler.bind(this));\n  }\n\n  socketConnectHandler() {\n    console.log(`MobileServerBridge.socketConnectHandler`);\n    this.presentation.mobileServerBridgeConnected();\n  }\n\n  socketDisconnectHandler() {\n    this.connect();\n  }\n\n  tryToSend() {\n    if(this.socket) {\n      this.socket.emit.apply(this.socket, arguments);\n    }\n  }\n\n  socketMessageHandler(message) {\n    this.presentation.mobileServerMessageHandler(message);\n  }\n}\n","import {Constants} from '../Constants';\nimport SlideBridge from './SlideBridge';\n\nexport default class Presentation {\n  /*\n   * data: json object with slides array property\n   * role: mobile or presentation\n   */\n  constructor(data, role, settings) {\n    this.data = data;\n    this.role = role;\n    this.settings = settings;\n    $(`#presentation`).attr(`data-presentation-settings`, JSON.stringify(settings));\n    this.currentSlideIndex = -1;\n    this.slideHolders = [];\n    this.numSlideHolders = 3;\n    this.slideBridges = [];\n    this.slideBridgesBySlideName = {};\n\n    this.createSlideHolders();\n    this.createSlideBridges(this.data);\n\n    this.mobileServerBridge = this.createMobileServerBridge();\n    this.startListeningForMessages();\n\n    this.setCurrentSlideIndex(0);\n  }\n\n  startListeningForMessages() {\n    window.addEventListener(`message`, this.slideMessageHandler.bind(this), false);\n  }\n\n  createSlideHolders() {\n    for(let i = 0; i < this.numSlideHolders; i++) {\n      const $slideHolder = $(`<div class=\"slide-frame\" />`);\n      this.slideHolders.push($slideHolder);\n      $(`#presentation`).append($slideHolder);\n    }\n  }\n\n  createSlideBridges(data) {\n    const numSlides = data.slides.length;\n    for(let i = 0; i < numSlides; i++) {\n      const slideBridge = this.createSlideBridge(data.slides[i]);\n      this.slideBridges.push(slideBridge);\n      this.slideBridgesBySlideName[slideBridge.name] = slideBridge;\n    }\n  }\n\n  createSlideBridge(slide) {\n    return new SlideBridge(slide);\n  }\n\n  slideMessageHandler(event) {\n    if(!event.data) {\n      return;\n    }\n    switch(event.data.action) {\n    case Constants.SOCKET_SEND:\n      if(this.mobileServerBridge) {\n        this.mobileServerBridge.tryToSend(Constants.MESSAGE, event.data.message);\n      }\n      break;\n    }\n  }\n\n  mobileServerBridgeConnected() {\n    //join the rooms of the slideHolders\n    for(let i = 0; i < this.numSlideHolders; i++) {\n      this.mobileServerBridge.tryToSend(Constants.JOIN_SLIDE_ROOM, $(this.slideHolders[i]).attr(`data-name`));\n    }\n  }\n\n  mobileServerMessageHandler(message) {\n    if(message.target.slide) {\n      //slide has to handle the message\n      const slideBridge = this.getSlideBridgeByName(message.target.slide);\n      if(slideBridge) {\n        slideBridge.tryToPostMessage({\n          action: Constants.SOCKET_RECEIVE,\n          message: message\n        });\n      }\n    } else {\n      //presentation has to handle the message\n      this.handleMobileServerMessage(message);\n    }\n  }\n\n  handleMobileServerMessage(message) {\n    console.log(`[shared/Presentation] handleMobileServerMessage`, message);\n  }\n\n  getSlideBridgeByIndex(index) {\n    if(index >= 0 && index < this.slideBridges.length) {\n      return this.slideBridges[index];\n    }\n    return false;\n  }\n\n  getSlideBridgeByName(slideName) {\n    return this.slideBridgesBySlideName[slideName];\n  }\n\n  getSlideHolderForSlide(slide, slidesNotToClear) {\n    if(slide) {\n      let $slideHolder = $(`.slide-frame[data-name=\"${  slide.name  }\"]`);\n      if($slideHolder.length > 0) {\n        return $slideHolder[0];\n      }\n      //get a free slideHolder\n      const slideNamesNotToClear = [];\n      $(slidesNotToClear).each(function(index, obj){\n        slideNamesNotToClear.push(obj.name);\n      });\n      const $slideHolders = $(`.slide-frame`);\n      for (let i = $slideHolders.length - 1; i >= 0; i--) {\n        $slideHolder = $($slideHolders[i]);\n        const name = $slideHolder.attr(`data-name`);\n        if(!name || slideNamesNotToClear.indexOf(name) === -1) {\n          return $slideHolder[0];\n        }\n      }\n    }\n    return false;\n  }\n\n  goToPreviousSlide() {\n    this.setCurrentSlideIndex(this.currentSlideIndex - 1);\n  }\n\n  goToNextSlide() {\n    this.setCurrentSlideIndex(this.currentSlideIndex + 1);\n  }\n\n  setCurrentSlideIndex(value) {\n    value = Math.max(0, Math.min(value, this.slideBridges.length - 1));\n    if(value !== this.currentSlideIndex) {\n      this.currentSlideIndex = value;\n\n      const currentSlideBridge = this.getSlideBridgeByIndex(this.currentSlideIndex);\n      const previousSlideBridge = this.getSlideBridgeByIndex(this.currentSlideIndex - 1);\n      const nextSlideBridge = this.getSlideBridgeByIndex(this.currentSlideIndex + 1);\n\n      //remove \"used\" class from slide holders\n      $(`.slide-frame`).removeAttr(`data-used`, false);\n\n      const currentSlideHolder = this.getSlideHolderForSlide(currentSlideBridge, [previousSlideBridge, nextSlideBridge]);\n      this.setupSlideHolder(currentSlideHolder, currentSlideBridge, Constants.STATE_ACTIVE, 0);\n\n      const previousSlideHolder = this.getSlideHolderForSlide(previousSlideBridge, [currentSlideBridge, nextSlideBridge]);\n      this.setupSlideHolder(previousSlideHolder, previousSlideBridge, Constants.STATE_INACTIVE, `-100%`);\n\n      const nextSlideHolder = this.getSlideHolderForSlide(nextSlideBridge, [previousSlideBridge, currentSlideBridge]);\n      this.setupSlideHolder(nextSlideHolder, nextSlideBridge, Constants.STATE_INACTIVE, `100%`);\n\n      //clear attributes of unused slide frames\n      $(`.slide-frame`).each(function(index, slideHolder){\n        if(!$(slideHolder).attr(`data-used`)) {\n          $(slideHolder).removeAttr(`data-used`).removeAttr(`data-name`).removeAttr(`data-src`);\n        }\n      });\n\n      //all other slideHolder bridges should be unlinked from their slideHolder\n      this.slideBridges.forEach(function(slideBridge){\n        if(slideBridge === currentSlideBridge) {\n          return;\n        }\n        if(slideBridge === previousSlideBridge) {\n          return;\n        }\n        if(slideBridge === nextSlideBridge) {\n          return;\n        }\n        slideBridge.slideHolder = null;\n      });\n\n      bean.fire(this, Constants.SET_CURRENT_SLIDE_INDEX, [this.currentSlideIndex]);\n    }\n  }\n\n  setupSlideHolder(slideHolder, slideBridge, state, left) {\n    if(slideHolder) {\n      let src = `slides/${  slideBridge.name  }.html`;\n      if(slideBridge.data[this.role] && slideBridge.data[this.role].url) {\n        src = slideBridge.data[this.role].url;\n      }\n      src = this.processSlideSrc(src);\n      if(slideBridge.isAlreadyCorrectlyAttached(slideHolder, src)) {\n        //console.log(slideBridge.name + ' already attached');\n      } else {\n        this.attachToSlideHolder(slideHolder, slideBridge, src);\n      }\n      slideBridge.setState(state);\n      $(slideHolder).css(`left`, left);\n      $(slideHolder).attr(`data-used`, 1);\n    }\n  }\n\n  attachToSlideHolder(slideHolder, slideBridge, src) {\n    //listen for events on this slideHolder\n    $(slideHolder).off(`message-from-slide`);\n    $(slideHolder).on(`message-from-slide`, (event, message) =>  {\n      this.slideMessageHandler({data: message});\n    });\n    //leave previous channel of this slideHolder\n    if(this.mobileServerBridge) {\n      this.mobileServerBridge.tryToSend(Constants.LEAVE_SLIDE_ROOM, $(slideHolder).attr(`data-name`));\n    }\n    //add the join as a callback for the onload event\n    slideBridge.attachToSlideHolder(slideHolder, src, this.slideLoaded.bind(this, slideHolder, slideBridge, src));\n  }\n\n  slideLoaded(slideHolder, slideBridge) { // eslint-disable-line no-unused-vars\n    //join new channel\n    if(this.mobileServerBridge) {\n      this.mobileServerBridge.tryToSend(Constants.JOIN_SLIDE_ROOM, $(slideHolder).attr(`data-name`));\n    }\n  }\n\n  processSlideSrc(src) {\n    return src;\n  }\n\n  createMobileServerBridge() {\n    //to implement in extending classes\n  }\n}\n","import fetch from 'isomorphic-fetch';\n\nexport default class SlideBridge {\n  constructor(data) {\n    this.data = data;\n    this.name = this.data.name;\n  }\n\n  isAlreadyCorrectlyAttached(slideHolder, src) {\n    return (this.slideHolder === slideHolder && $(slideHolder).attr(`data-name`) === this.name && $(slideHolder).attr(`data-src`) === src);\n  }\n\n  attachToSlideHolder(slideHolder, src, cb) {\n    this.slideHolder = slideHolder;\n    //notify the content it is being cleared\n    this.tryToPostMessage({action: `destroy`});\n    //clear the current content\n    this.slideHolder.innerHTML = ``;\n    $(slideHolder).attr(`data-name`, this.name);\n    $(slideHolder).addClass(`loading`);\n\n    $(slideHolder).off(`load`);\n    $(slideHolder).on(`load`, () => {\n      this.tryToPostMessage({\n        action: `setState`,\n        state: this.state\n      });\n      $(slideHolder).off(`load`);\n    });\n\n    if(src !== $(slideHolder).attr(`data-src`)) {\n      //fetch the html\n      fetch(src)\n        .then(result => result.text())\n        .then(result => $(result))\n        .then($result => {\n          $(slideHolder).html($result.html());\n          $(slideHolder).removeClass(`loading`);\n          cb();\n        })\n        .catch(err => {\n          console.error(err);\n          $(slideHolder).removeClass(`loading`);\n          cb();\n        });\n      $(slideHolder).attr(`data-src`, src);\n    }\n  }\n\n  tryToPostMessage(message) {\n    if(!this.slideHolder)\n    {\n      console.log(`${this.name  } post fail`);\n      return;\n    }\n    //trigger with jquery\n    $(this.slideHolder).trigger(`message-to-slide`, message);\n  }\n\n  setState(state) {\n    this.state = state;\n    this.tryToPostMessage({\n      action: `setState`,\n      state: this.state\n    });\n  }\n}\n","import {Constants} from '../../../../shared/js/Constants';\nimport ContentBase from '../../../../shared/js/classes/ContentBase';\n\nimport LiveCode from '../live-code';\n\nexport default class LiveCodeSlide extends ContentBase {\n\n  constructor($slideHolder, config, readyCallback) {\n    super($slideHolder);\n\n    const remote = requireNode(`electron`).remote;\n    const config2 = {...config, presentationPath: remote.getGlobal(`__dirname`)};\n\n    //find live code element\n    this.liveCode = new LiveCode(this.$slideHolder.find(`.live-code`), config2, readyCallback);\n  }\n\n  layout() {\n    this.liveCode.layout();\n  }\n\n  destroy() {\n    super.destroy();\n    this.liveCode.destroy();\n  }\n\n  onStateChanged() {\n    if(this.state === Constants.STATE_ACTIVE) {\n      this.liveCode.resume();\n    } else {\n      //stop\n      this.liveCode.pause();\n    }\n  }\n\n}\n","import {Constants} from '../../../../shared/js/Constants';\nimport ContentBase from '../../../../shared/js/classes/ContentBase';\n\nconst getParameterByName = (url, name) => {\n  name = name.replace(/[\\[]/, `\\\\[`).replace(/[\\]]/, `\\\\]`);\n  const regex = new RegExp(`[\\\\?&]${  name  }=([^&#]*)`),\n    results = regex.exec(url);\n  return results == null ? `` : decodeURIComponent(results[1].replace(/\\+/g, ` `));\n};\n\nexport default class VideoSlide extends ContentBase {\n\n  constructor($slideHolder) {\n    super($slideHolder);\n\n    this.videoPlaying = false;\n    const videoUrl = getParameterByName(this.src, `video`);\n\n    //check for extra config in the filename\n    let loop = false;\n    let muted = false;\n    let controls = false;\n    const videoUrlSplitted = videoUrl.split(`.`);\n    videoUrlSplitted.forEach(part => {\n      if(part === `loop`) {\n        loop = true;\n      }\n      if(part === `muted`) {\n        muted = true;\n      }\n      if(part === `controls`) {\n        controls = true;\n      }\n    });\n\n    this.video = this.$slideHolder.find(`video`)[0];\n    if(loop) {\n      $(this.video).attr(`loop`, `loop`);\n    }\n    if(muted) {\n      $(this.video).attr(`muted`, `muted`);\n    }\n    if(controls) {\n      $(this.video).attr(`controls`, `controls`);\n    }\n    $(this.video).attr(`src`, videoUrl);\n    this._clickHandler = () => this.toggleVideoPlaying();\n    $(this.video).on(`click`, this._clickHandler);\n  }\n\n  destroy() {\n    super.destroy();\n    $(this.video).off(`click`, this._clickHandler);\n  }\n\n  onStateChanged() {\n    if(this.state === Constants.STATE_ACTIVE) {\n      this.setVideoPlaying(true);\n    } else {\n      this.setVideoPlaying(false);\n    }\n  }\n\n  setVideoPlaying(value) {\n    if(value !== this.videoPlaying) {\n      this.videoPlaying = value;\n      if(this.videoPlaying) {\n        this.video.play();\n      } else {\n        this.video.pause();\n      }\n    }\n  }\n\n  toggleVideoPlaying() {\n    this.setVideoPlaying(!this.videoPlaying);\n  }\n\n}\n","import {Constants} from '../../../../shared/js/Constants';\nimport ContentBase from '../../../../shared/js/classes/ContentBase';\n\nexport default class WebviewSlide extends ContentBase {\n\n  constructor($slideHolder) {\n    super($slideHolder);\n\n    this.webviewMuted = false;\n\n    this.webview = this.$slideHolder.find(`webview`)[0];\n  }\n\n  destroy() {\n    super.destroy();\n  }\n\n  reload() {\n    this.webview.reload();\n  }\n\n  openDevTools() {\n    this.webview.openDevTools();\n  }\n\n  onStateChanged() {\n    if(this.state === Constants.STATE_ACTIVE) {\n      this.setWebviewMuted(false);\n    } else {\n      this.setWebviewMuted(true);\n    }\n  }\n\n  setWebviewMuted(value) {\n    if(value !== this.webviewMuted) {\n      this.webviewMuted = value;\n      if (!this.webview) {\n        return;\n      }\n      if(this.webviewMuted) {\n        this.webview.setAudioMuted(true);\n      } else {\n        this.webview.setAudioMuted(false);\n      }\n    }\n  }\n\n}\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvZXM2LXByb21pc2UvZGlzdC9lczYtcHJvbWlzZS5qcyIsIm5vZGVfbW9kdWxlcy9pc29tb3JwaGljLWZldGNoL2ZldGNoLW5wbS1icm93c2VyaWZ5LmpzIiwibm9kZV9tb2R1bGVzL3Byb2Nlc3MvYnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy93aGF0d2ctZmV0Y2gvZGlzdC9mZXRjaC51bWQuanMiLCJzcmMvcHJlc2VudGF0aW9uL2pzL2NsYXNzZXMvTW9iaWxlU2VydmVyQnJpZGdlLmpzIiwic3JjL3ByZXNlbnRhdGlvbi9qcy9jbGFzc2VzL05vZGVBcHBSdW5uZXIuanMiLCJzcmMvcHJlc2VudGF0aW9uL2pzL2NsYXNzZXMvUHJlc2VudGF0aW9uLmpzIiwic3JjL3ByZXNlbnRhdGlvbi9qcy9jbGFzc2VzL1NsaWRlQnJpZGdlLmpzIiwic3JjL3ByZXNlbnRhdGlvbi9qcy9jbGFzc2VzL2xpdmUtY29kZS9Db2RlRWxlbWVudC5qcyIsInNyYy9wcmVzZW50YXRpb24vanMvY2xhc3Nlcy9saXZlLWNvZGUvQ29uc29sZUVsZW1lbnQuanMiLCJzcmMvcHJlc2VudGF0aW9uL2pzL2NsYXNzZXMvbGl2ZS1jb2RlL1Rlcm1pbmFsRWxlbWVudC5qcyIsInNyYy9wcmVzZW50YXRpb24vanMvY2xhc3Nlcy9saXZlLWNvZGUvV2ViUHJldmlld0VsZW1lbnQuanMiLCJzcmMvcHJlc2VudGF0aW9uL2pzL2NsYXNzZXMvbGl2ZS1jb2RlL1dlYmNhbUVsZW1lbnQuanMiLCJzcmMvcHJlc2VudGF0aW9uL2pzL2NsYXNzZXMvbGl2ZS1jb2RlL2luZGV4LmpzIiwic3JjL3ByZXNlbnRhdGlvbi9qcy9zY3JpcHQuanMiLCJzcmMvc2VydmVyL2NsYXNzZXMvU2xpZGVzRm9sZGVyUGFyc2VyLmpzIiwic3JjL3NoYXJlZC9qcy9Db25zdGFudHMuanMiLCJzcmMvc2hhcmVkL2pzL2NsYXNzZXMvQ29udGVudEJhc2UuanMiLCJzcmMvc2hhcmVkL2pzL2NsYXNzZXMvTW9iaWxlU2VydmVyQnJpZGdlLmpzIiwic3JjL3NoYXJlZC9qcy9jbGFzc2VzL1ByZXNlbnRhdGlvbi5qcyIsInNyYy9zaGFyZWQvanMvY2xhc3Nlcy9TbGlkZUJyaWRnZS5qcyIsInNyYy9wcmVzZW50YXRpb24vanMvY2xhc3Nlcy9saXZlLWNvZGUtc2xpZGUvaW5kZXguanMiLCJzcmMvcHJlc2VudGF0aW9uL2pzL2NsYXNzZXMvdmlkZW8tc2xpZGUvaW5kZXguanMiLCJzcmMvcHJlc2VudGF0aW9uL2pzL2NsYXNzZXMvd2Vidmlldy1zbGlkZS9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDL3BDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FDbmhCQTs7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WUFBYjtBQUNEOzs7cUNBRWdCO0FBQ2YsVUFBRyxLQUFLLEtBQUwsS0FBZSxxQkFBVSxZQUE1QixFQUEwQztBQUN4QyxhQUFLLGVBQUwsQ0FBcUIsS0FBckI7QUFDRCxPQUZELE1BRU87QUFDTCxhQUFLLGVBQUwsQ0FBcUIsSUFBckI7QUFDRDtBQUNGOzs7b0NBRWUsSyxFQUFPO0FBQ3JCLFVBQUcsVUFBVSxLQUFLLFlBQWxCLEVBQWdDO0FBQzlCLGFBQUssWUFBTCxHQUFvQixLQUFwQjtBQUNBLFlBQUksQ0FBQyxLQUFLLE9BQVYsRUFBbUI7QUFDakI7QUFDRDtBQUNELFlBQUcsS0FBSyxZQUFSLEVBQXNCO0FBQ3BCLGVBQUssT0FBTCxDQUFhLGFBQWIsQ0FBMkIsSUFBM0I7QUFDRCxTQUZELE1BRU87QUFDTCxlQUFLLE9BQUwsQ0FBYSxhQUFiLENBQTJCLEtBQTNCO0FBQ0Q7QUFDRjtBQUNGOzs7O0VBMUN1QyxxQjs7a0JBQXJCLFkiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCIvKiFcbiAqIEBvdmVydmlldyBlczYtcHJvbWlzZSAtIGEgdGlueSBpbXBsZW1lbnRhdGlvbiBvZiBQcm9taXNlcy9BKy5cbiAqIEBjb3B5cmlnaHQgQ29weXJpZ2h0IChjKSAyMDE0IFllaHVkYSBLYXR6LCBUb20gRGFsZSwgU3RlZmFuIFBlbm5lciBhbmQgY29udHJpYnV0b3JzIChDb252ZXJzaW9uIHRvIEVTNiBBUEkgYnkgSmFrZSBBcmNoaWJhbGQpXG4gKiBAbGljZW5zZSAgIExpY2Vuc2VkIHVuZGVyIE1JVCBsaWNlbnNlXG4gKiAgICAgICAgICAgIFNlZSBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vc3RlZmFucGVubmVyL2VzNi1wcm9taXNlL21hc3Rlci9MSUNFTlNFXG4gKiBAdmVyc2lvbiAgIHY0LjIuNSs3ZjJiNTI2ZFxuICovXG5cbihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG5cdHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcblx0dHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcblx0KGdsb2JhbC5FUzZQcm9taXNlID0gZmFjdG9yeSgpKTtcbn0odGhpcywgKGZ1bmN0aW9uICgpIHsgJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBvYmplY3RPckZ1bmN0aW9uKHgpIHtcbiAgdmFyIHR5cGUgPSB0eXBlb2YgeDtcbiAgcmV0dXJuIHggIT09IG51bGwgJiYgKHR5cGUgPT09ICdvYmplY3QnIHx8IHR5cGUgPT09ICdmdW5jdGlvbicpO1xufVxuXG5mdW5jdGlvbiBpc0Z1bmN0aW9uKHgpIHtcbiAgcmV0dXJuIHR5cGVvZiB4ID09PSAnZnVuY3Rpb24nO1xufVxuXG5cblxudmFyIF9pc0FycmF5ID0gdm9pZCAwO1xuaWYgKEFycmF5LmlzQXJyYXkpIHtcbiAgX2lzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xufSBlbHNlIHtcbiAgX2lzQXJyYXkgPSBmdW5jdGlvbiAoeCkge1xuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoeCkgPT09ICdbb2JqZWN0IEFycmF5XSc7XG4gIH07XG59XG5cbnZhciBpc0FycmF5ID0gX2lzQXJyYXk7XG5cbnZhciBsZW4gPSAwO1xudmFyIHZlcnR4TmV4dCA9IHZvaWQgMDtcbnZhciBjdXN0b21TY2hlZHVsZXJGbiA9IHZvaWQgMDtcblxudmFyIGFzYXAgPSBmdW5jdGlvbiBhc2FwKGNhbGxiYWNrLCBhcmcpIHtcbiAgcXVldWVbbGVuXSA9IGNhbGxiYWNrO1xuICBxdWV1ZVtsZW4gKyAxXSA9IGFyZztcbiAgbGVuICs9IDI7XG4gIGlmIChsZW4gPT09IDIpIHtcbiAgICAvLyBJZiBsZW4gaXMgMiwgdGhhdCBtZWFucyB0aGF0IHdlIG5lZWQgdG8gc2NoZWR1bGUgYW4gYXN5bmMgZmx1c2guXG4gICAgLy8gSWYgYWRkaXRpb25hbCBjYWxsYmFja3MgYXJlIHF1ZXVlZCBiZWZvcmUgdGhlIHF1ZXVlIGlzIGZsdXNoZWQsIHRoZXlcbiAgICAvLyB3aWxsIGJlIHByb2Nlc3NlZCBieSB0aGlzIGZsdXNoIHRoYXQgd2UgYXJlIHNjaGVkdWxpbmcuXG4gICAgaWYgKGN1c3RvbVNjaGVkdWxlckZuKSB7XG4gICAgICBjdXN0b21TY2hlZHVsZXJGbihmbHVzaCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNjaGVkdWxlRmx1c2goKTtcbiAgICB9XG4gIH1cbn07XG5cbmZ1bmN0aW9uIHNldFNjaGVkdWxlcihzY2hlZHVsZUZuKSB7XG4gIGN1c3RvbVNjaGVkdWxlckZuID0gc2NoZWR1bGVGbjtcbn1cblxuZnVuY3Rpb24gc2V0QXNhcChhc2FwRm4pIHtcbiAgYXNhcCA9IGFzYXBGbjtcbn1cblxudmFyIGJyb3dzZXJXaW5kb3cgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHVuZGVmaW5lZDtcbnZhciBicm93c2VyR2xvYmFsID0gYnJvd3NlcldpbmRvdyB8fCB7fTtcbnZhciBCcm93c2VyTXV0YXRpb25PYnNlcnZlciA9IGJyb3dzZXJHbG9iYWwuTXV0YXRpb25PYnNlcnZlciB8fCBicm93c2VyR2xvYmFsLldlYktpdE11dGF0aW9uT2JzZXJ2ZXI7XG52YXIgaXNOb2RlID0gdHlwZW9mIHNlbGYgPT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiB7fS50b1N0cmluZy5jYWxsKHByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXSc7XG5cbi8vIHRlc3QgZm9yIHdlYiB3b3JrZXIgYnV0IG5vdCBpbiBJRTEwXG52YXIgaXNXb3JrZXIgPSB0eXBlb2YgVWludDhDbGFtcGVkQXJyYXkgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBpbXBvcnRTY3JpcHRzICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgTWVzc2FnZUNoYW5uZWwgIT09ICd1bmRlZmluZWQnO1xuXG4vLyBub2RlXG5mdW5jdGlvbiB1c2VOZXh0VGljaygpIHtcbiAgLy8gbm9kZSB2ZXJzaW9uIDAuMTAueCBkaXNwbGF5cyBhIGRlcHJlY2F0aW9uIHdhcm5pbmcgd2hlbiBuZXh0VGljayBpcyB1c2VkIHJlY3Vyc2l2ZWx5XG4gIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vY3Vqb2pzL3doZW4vaXNzdWVzLzQxMCBmb3IgZGV0YWlsc1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBwcm9jZXNzLm5leHRUaWNrKGZsdXNoKTtcbiAgfTtcbn1cblxuLy8gdmVydHhcbmZ1bmN0aW9uIHVzZVZlcnR4VGltZXIoKSB7XG4gIGlmICh0eXBlb2YgdmVydHhOZXh0ICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICB2ZXJ0eE5leHQoZmx1c2gpO1xuICAgIH07XG4gIH1cblxuICByZXR1cm4gdXNlU2V0VGltZW91dCgpO1xufVxuXG5mdW5jdGlvbiB1c2VNdXRhdGlvbk9ic2VydmVyKCkge1xuICB2YXIgaXRlcmF0aW9ucyA9IDA7XG4gIHZhciBvYnNlcnZlciA9IG5ldyBCcm93c2VyTXV0YXRpb25PYnNlcnZlcihmbHVzaCk7XG4gIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJycpO1xuICBvYnNlcnZlci5vYnNlcnZlKG5vZGUsIHsgY2hhcmFjdGVyRGF0YTogdHJ1ZSB9KTtcblxuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIG5vZGUuZGF0YSA9IGl0ZXJhdGlvbnMgPSArK2l0ZXJhdGlvbnMgJSAyO1xuICB9O1xufVxuXG4vLyB3ZWIgd29ya2VyXG5mdW5jdGlvbiB1c2VNZXNzYWdlQ2hhbm5lbCgpIHtcbiAgdmFyIGNoYW5uZWwgPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTtcbiAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBmbHVzaDtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gY2hhbm5lbC5wb3J0Mi5wb3N0TWVzc2FnZSgwKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gdXNlU2V0VGltZW91dCgpIHtcbiAgLy8gU3RvcmUgc2V0VGltZW91dCByZWZlcmVuY2Ugc28gZXM2LXByb21pc2Ugd2lsbCBiZSB1bmFmZmVjdGVkIGJ5XG4gIC8vIG90aGVyIGNvZGUgbW9kaWZ5aW5nIHNldFRpbWVvdXQgKGxpa2Ugc2lub24udXNlRmFrZVRpbWVycygpKVxuICB2YXIgZ2xvYmFsU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGdsb2JhbFNldFRpbWVvdXQoZmx1c2gsIDEpO1xuICB9O1xufVxuXG52YXIgcXVldWUgPSBuZXcgQXJyYXkoMTAwMCk7XG5mdW5jdGlvbiBmbHVzaCgpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkgKz0gMikge1xuICAgIHZhciBjYWxsYmFjayA9IHF1ZXVlW2ldO1xuICAgIHZhciBhcmcgPSBxdWV1ZVtpICsgMV07XG5cbiAgICBjYWxsYmFjayhhcmcpO1xuXG4gICAgcXVldWVbaV0gPSB1bmRlZmluZWQ7XG4gICAgcXVldWVbaSArIDFdID0gdW5kZWZpbmVkO1xuICB9XG5cbiAgbGVuID0gMDtcbn1cblxuZnVuY3Rpb24gYXR0ZW1wdFZlcnR4KCkge1xuICB0cnkge1xuICAgIHZhciB2ZXJ0eCA9IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCkucmVxdWlyZSgndmVydHgnKTtcbiAgICB2ZXJ0eE5leHQgPSB2ZXJ0eC5ydW5Pbkxvb3AgfHwgdmVydHgucnVuT25Db250ZXh0O1xuICAgIHJldHVybiB1c2VWZXJ0eFRpbWVyKCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gdXNlU2V0VGltZW91dCgpO1xuICB9XG59XG5cbnZhciBzY2hlZHVsZUZsdXNoID0gdm9pZCAwO1xuLy8gRGVjaWRlIHdoYXQgYXN5bmMgbWV0aG9kIHRvIHVzZSB0byB0cmlnZ2VyaW5nIHByb2Nlc3Npbmcgb2YgcXVldWVkIGNhbGxiYWNrczpcbmlmIChpc05vZGUpIHtcbiAgc2NoZWR1bGVGbHVzaCA9IHVzZU5leHRUaWNrKCk7XG59IGVsc2UgaWYgKEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyKSB7XG4gIHNjaGVkdWxlRmx1c2ggPSB1c2VNdXRhdGlvbk9ic2VydmVyKCk7XG59IGVsc2UgaWYgKGlzV29ya2VyKSB7XG4gIHNjaGVkdWxlRmx1c2ggPSB1c2VNZXNzYWdlQ2hhbm5lbCgpO1xufSBlbHNlIGlmIChicm93c2VyV2luZG93ID09PSB1bmRlZmluZWQgJiYgdHlwZW9mIHJlcXVpcmUgPT09ICdmdW5jdGlvbicpIHtcbiAgc2NoZWR1bGVGbHVzaCA9IGF0dGVtcHRWZXJ0eCgpO1xufSBlbHNlIHtcbiAgc2NoZWR1bGVGbHVzaCA9IHVzZVNldFRpbWVvdXQoKTtcbn1cblxuZnVuY3Rpb24gdGhlbihvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbikge1xuICB2YXIgcGFyZW50ID0gdGhpcztcblxuICB2YXIgY2hpbGQgPSBuZXcgdGhpcy5jb25zdHJ1Y3Rvcihub29wKTtcblxuICBpZiAoY2hpbGRbUFJPTUlTRV9JRF0gPT09IHVuZGVmaW5lZCkge1xuICAgIG1ha2VQcm9taXNlKGNoaWxkKTtcbiAgfVxuXG4gIHZhciBfc3RhdGUgPSBwYXJlbnQuX3N0YXRlO1xuXG5cbiAgaWYgKF9zdGF0ZSkge1xuICAgIHZhciBjYWxsYmFjayA9IGFyZ3VtZW50c1tfc3RhdGUgLSAxXTtcbiAgICBhc2FwKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBpbnZva2VDYWxsYmFjayhfc3RhdGUsIGNoaWxkLCBjYWxsYmFjaywgcGFyZW50Ll9yZXN1bHQpO1xuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIHN1YnNjcmliZShwYXJlbnQsIGNoaWxkLCBvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbik7XG4gIH1cblxuICByZXR1cm4gY2hpbGQ7XG59XG5cbi8qKlxuICBgUHJvbWlzZS5yZXNvbHZlYCByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHdpbGwgYmVjb21lIHJlc29sdmVkIHdpdGggdGhlXG4gIHBhc3NlZCBgdmFsdWVgLiBJdCBpcyBzaG9ydGhhbmQgZm9yIHRoZSBmb2xsb3dpbmc6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgcmVzb2x2ZSgxKTtcbiAgfSk7XG5cbiAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAvLyB2YWx1ZSA9PT0gMVxuICB9KTtcbiAgYGBgXG5cbiAgSW5zdGVhZCBvZiB3cml0aW5nIHRoZSBhYm92ZSwgeW91ciBjb2RlIG5vdyBzaW1wbHkgYmVjb21lcyB0aGUgZm9sbG93aW5nOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoMSk7XG5cbiAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKXtcbiAgICAvLyB2YWx1ZSA9PT0gMVxuICB9KTtcbiAgYGBgXG5cbiAgQG1ldGhvZCByZXNvbHZlXG4gIEBzdGF0aWNcbiAgQHBhcmFtIHtBbnl9IHZhbHVlIHZhbHVlIHRoYXQgdGhlIHJldHVybmVkIHByb21pc2Ugd2lsbCBiZSByZXNvbHZlZCB3aXRoXG4gIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIHRoYXQgd2lsbCBiZWNvbWUgZnVsZmlsbGVkIHdpdGggdGhlIGdpdmVuXG4gIGB2YWx1ZWBcbiovXG5mdW5jdGlvbiByZXNvbHZlJDEob2JqZWN0KSB7XG4gIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG4gIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG5cbiAgaWYgKG9iamVjdCAmJiB0eXBlb2Ygb2JqZWN0ID09PSAnb2JqZWN0JyAmJiBvYmplY3QuY29uc3RydWN0b3IgPT09IENvbnN0cnVjdG9yKSB7XG4gICAgcmV0dXJuIG9iamVjdDtcbiAgfVxuXG4gIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKG5vb3ApO1xuICByZXNvbHZlKHByb21pc2UsIG9iamVjdCk7XG4gIHJldHVybiBwcm9taXNlO1xufVxuXG52YXIgUFJPTUlTRV9JRCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyKTtcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbnZhciBQRU5ESU5HID0gdm9pZCAwO1xudmFyIEZVTEZJTExFRCA9IDE7XG52YXIgUkVKRUNURUQgPSAyO1xuXG52YXIgVFJZX0NBVENIX0VSUk9SID0geyBlcnJvcjogbnVsbCB9O1xuXG5mdW5jdGlvbiBzZWxmRnVsZmlsbG1lbnQoKSB7XG4gIHJldHVybiBuZXcgVHlwZUVycm9yKFwiWW91IGNhbm5vdCByZXNvbHZlIGEgcHJvbWlzZSB3aXRoIGl0c2VsZlwiKTtcbn1cblxuZnVuY3Rpb24gY2Fubm90UmV0dXJuT3duKCkge1xuICByZXR1cm4gbmV3IFR5cGVFcnJvcignQSBwcm9taXNlcyBjYWxsYmFjayBjYW5ub3QgcmV0dXJuIHRoYXQgc2FtZSBwcm9taXNlLicpO1xufVxuXG5mdW5jdGlvbiBnZXRUaGVuKHByb21pc2UpIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gcHJvbWlzZS50aGVuO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIFRSWV9DQVRDSF9FUlJPUi5lcnJvciA9IGVycm9yO1xuICAgIHJldHVybiBUUllfQ0FUQ0hfRVJST1I7XG4gIH1cbn1cblxuZnVuY3Rpb24gdHJ5VGhlbih0aGVuJCQxLCB2YWx1ZSwgZnVsZmlsbG1lbnRIYW5kbGVyLCByZWplY3Rpb25IYW5kbGVyKSB7XG4gIHRyeSB7XG4gICAgdGhlbiQkMS5jYWxsKHZhbHVlLCBmdWxmaWxsbWVudEhhbmRsZXIsIHJlamVjdGlvbkhhbmRsZXIpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGU7XG4gIH1cbn1cblxuZnVuY3Rpb24gaGFuZGxlRm9yZWlnblRoZW5hYmxlKHByb21pc2UsIHRoZW5hYmxlLCB0aGVuJCQxKSB7XG4gIGFzYXAoZnVuY3Rpb24gKHByb21pc2UpIHtcbiAgICB2YXIgc2VhbGVkID0gZmFsc2U7XG4gICAgdmFyIGVycm9yID0gdHJ5VGhlbih0aGVuJCQxLCB0aGVuYWJsZSwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICBpZiAoc2VhbGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHNlYWxlZCA9IHRydWU7XG4gICAgICBpZiAodGhlbmFibGUgIT09IHZhbHVlKSB7XG4gICAgICAgIHJlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgaWYgKHNlYWxlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBzZWFsZWQgPSB0cnVlO1xuXG4gICAgICByZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgICB9LCAnU2V0dGxlOiAnICsgKHByb21pc2UuX2xhYmVsIHx8ICcgdW5rbm93biBwcm9taXNlJykpO1xuXG4gICAgaWYgKCFzZWFsZWQgJiYgZXJyb3IpIHtcbiAgICAgIHNlYWxlZCA9IHRydWU7XG4gICAgICByZWplY3QocHJvbWlzZSwgZXJyb3IpO1xuICAgIH1cbiAgfSwgcHJvbWlzZSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZU93blRoZW5hYmxlKHByb21pc2UsIHRoZW5hYmxlKSB7XG4gIGlmICh0aGVuYWJsZS5fc3RhdGUgPT09IEZVTEZJTExFRCkge1xuICAgIGZ1bGZpbGwocHJvbWlzZSwgdGhlbmFibGUuX3Jlc3VsdCk7XG4gIH0gZWxzZSBpZiAodGhlbmFibGUuX3N0YXRlID09PSBSRUpFQ1RFRCkge1xuICAgIHJlamVjdChwcm9taXNlLCB0aGVuYWJsZS5fcmVzdWx0KTtcbiAgfSBlbHNlIHtcbiAgICBzdWJzY3JpYmUodGhlbmFibGUsIHVuZGVmaW5lZCwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgcmV0dXJuIHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGhhbmRsZU1heWJlVGhlbmFibGUocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSwgdGhlbiQkMSkge1xuICBpZiAobWF5YmVUaGVuYWJsZS5jb25zdHJ1Y3RvciA9PT0gcHJvbWlzZS5jb25zdHJ1Y3RvciAmJiB0aGVuJCQxID09PSB0aGVuICYmIG1heWJlVGhlbmFibGUuY29uc3RydWN0b3IucmVzb2x2ZSA9PT0gcmVzb2x2ZSQxKSB7XG4gICAgaGFuZGxlT3duVGhlbmFibGUocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKHRoZW4kJDEgPT09IFRSWV9DQVRDSF9FUlJPUikge1xuICAgICAgcmVqZWN0KHByb21pc2UsIFRSWV9DQVRDSF9FUlJPUi5lcnJvcik7XG4gICAgICBUUllfQ0FUQ0hfRVJST1IuZXJyb3IgPSBudWxsO1xuICAgIH0gZWxzZSBpZiAodGhlbiQkMSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBmdWxmaWxsKHByb21pc2UsIG1heWJlVGhlbmFibGUpO1xuICAgIH0gZWxzZSBpZiAoaXNGdW5jdGlvbih0aGVuJCQxKSkge1xuICAgICAgaGFuZGxlRm9yZWlnblRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUsIHRoZW4kJDEpO1xuICAgIH0gZWxzZSB7XG4gICAgICBmdWxmaWxsKHByb21pc2UsIG1heWJlVGhlbmFibGUpO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiByZXNvbHZlKHByb21pc2UsIHZhbHVlKSB7XG4gIGlmIChwcm9taXNlID09PSB2YWx1ZSkge1xuICAgIHJlamVjdChwcm9taXNlLCBzZWxmRnVsZmlsbG1lbnQoKSk7XG4gIH0gZWxzZSBpZiAob2JqZWN0T3JGdW5jdGlvbih2YWx1ZSkpIHtcbiAgICBoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIHZhbHVlLCBnZXRUaGVuKHZhbHVlKSk7XG4gIH0gZWxzZSB7XG4gICAgZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcHVibGlzaFJlamVjdGlvbihwcm9taXNlKSB7XG4gIGlmIChwcm9taXNlLl9vbmVycm9yKSB7XG4gICAgcHJvbWlzZS5fb25lcnJvcihwcm9taXNlLl9yZXN1bHQpO1xuICB9XG5cbiAgcHVibGlzaChwcm9taXNlKTtcbn1cblxuZnVuY3Rpb24gZnVsZmlsbChwcm9taXNlLCB2YWx1ZSkge1xuICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IFBFTkRJTkcpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBwcm9taXNlLl9yZXN1bHQgPSB2YWx1ZTtcbiAgcHJvbWlzZS5fc3RhdGUgPSBGVUxGSUxMRUQ7XG5cbiAgaWYgKHByb21pc2UuX3N1YnNjcmliZXJzLmxlbmd0aCAhPT0gMCkge1xuICAgIGFzYXAocHVibGlzaCwgcHJvbWlzZSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVqZWN0KHByb21pc2UsIHJlYXNvbikge1xuICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IFBFTkRJTkcpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgcHJvbWlzZS5fc3RhdGUgPSBSRUpFQ1RFRDtcbiAgcHJvbWlzZS5fcmVzdWx0ID0gcmVhc29uO1xuXG4gIGFzYXAocHVibGlzaFJlamVjdGlvbiwgcHJvbWlzZSk7XG59XG5cbmZ1bmN0aW9uIHN1YnNjcmliZShwYXJlbnQsIGNoaWxkLCBvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbikge1xuICB2YXIgX3N1YnNjcmliZXJzID0gcGFyZW50Ll9zdWJzY3JpYmVycztcbiAgdmFyIGxlbmd0aCA9IF9zdWJzY3JpYmVycy5sZW5ndGg7XG5cblxuICBwYXJlbnQuX29uZXJyb3IgPSBudWxsO1xuXG4gIF9zdWJzY3JpYmVyc1tsZW5ndGhdID0gY2hpbGQ7XG4gIF9zdWJzY3JpYmVyc1tsZW5ndGggKyBGVUxGSUxMRURdID0gb25GdWxmaWxsbWVudDtcbiAgX3N1YnNjcmliZXJzW2xlbmd0aCArIFJFSkVDVEVEXSA9IG9uUmVqZWN0aW9uO1xuXG4gIGlmIChsZW5ndGggPT09IDAgJiYgcGFyZW50Ll9zdGF0ZSkge1xuICAgIGFzYXAocHVibGlzaCwgcGFyZW50KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwdWJsaXNoKHByb21pc2UpIHtcbiAgdmFyIHN1YnNjcmliZXJzID0gcHJvbWlzZS5fc3Vic2NyaWJlcnM7XG4gIHZhciBzZXR0bGVkID0gcHJvbWlzZS5fc3RhdGU7XG5cbiAgaWYgKHN1YnNjcmliZXJzLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBjaGlsZCA9IHZvaWQgMCxcbiAgICAgIGNhbGxiYWNrID0gdm9pZCAwLFxuICAgICAgZGV0YWlsID0gcHJvbWlzZS5fcmVzdWx0O1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3Vic2NyaWJlcnMubGVuZ3RoOyBpICs9IDMpIHtcbiAgICBjaGlsZCA9IHN1YnNjcmliZXJzW2ldO1xuICAgIGNhbGxiYWNrID0gc3Vic2NyaWJlcnNbaSArIHNldHRsZWRdO1xuXG4gICAgaWYgKGNoaWxkKSB7XG4gICAgICBpbnZva2VDYWxsYmFjayhzZXR0bGVkLCBjaGlsZCwgY2FsbGJhY2ssIGRldGFpbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhbGxiYWNrKGRldGFpbCk7XG4gICAgfVxuICB9XG5cbiAgcHJvbWlzZS5fc3Vic2NyaWJlcnMubGVuZ3RoID0gMDtcbn1cblxuZnVuY3Rpb24gdHJ5Q2F0Y2goY2FsbGJhY2ssIGRldGFpbCkge1xuICB0cnkge1xuICAgIHJldHVybiBjYWxsYmFjayhkZXRhaWwpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgVFJZX0NBVENIX0VSUk9SLmVycm9yID0gZTtcbiAgICByZXR1cm4gVFJZX0NBVENIX0VSUk9SO1xuICB9XG59XG5cbmZ1bmN0aW9uIGludm9rZUNhbGxiYWNrKHNldHRsZWQsIHByb21pc2UsIGNhbGxiYWNrLCBkZXRhaWwpIHtcbiAgdmFyIGhhc0NhbGxiYWNrID0gaXNGdW5jdGlvbihjYWxsYmFjayksXG4gICAgICB2YWx1ZSA9IHZvaWQgMCxcbiAgICAgIGVycm9yID0gdm9pZCAwLFxuICAgICAgc3VjY2VlZGVkID0gdm9pZCAwLFxuICAgICAgZmFpbGVkID0gdm9pZCAwO1xuXG4gIGlmIChoYXNDYWxsYmFjaykge1xuICAgIHZhbHVlID0gdHJ5Q2F0Y2goY2FsbGJhY2ssIGRldGFpbCk7XG5cbiAgICBpZiAodmFsdWUgPT09IFRSWV9DQVRDSF9FUlJPUikge1xuICAgICAgZmFpbGVkID0gdHJ1ZTtcbiAgICAgIGVycm9yID0gdmFsdWUuZXJyb3I7XG4gICAgICB2YWx1ZS5lcnJvciA9IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN1Y2NlZWRlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgaWYgKHByb21pc2UgPT09IHZhbHVlKSB7XG4gICAgICByZWplY3QocHJvbWlzZSwgY2Fubm90UmV0dXJuT3duKCkpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB2YWx1ZSA9IGRldGFpbDtcbiAgICBzdWNjZWVkZWQgPSB0cnVlO1xuICB9XG5cbiAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBQRU5ESU5HKSB7XG4gICAgLy8gbm9vcFxuICB9IGVsc2UgaWYgKGhhc0NhbGxiYWNrICYmIHN1Y2NlZWRlZCkge1xuICAgIHJlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICB9IGVsc2UgaWYgKGZhaWxlZCkge1xuICAgIHJlamVjdChwcm9taXNlLCBlcnJvcik7XG4gIH0gZWxzZSBpZiAoc2V0dGxlZCA9PT0gRlVMRklMTEVEKSB7XG4gICAgZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG4gIH0gZWxzZSBpZiAoc2V0dGxlZCA9PT0gUkVKRUNURUQpIHtcbiAgICByZWplY3QocHJvbWlzZSwgdmFsdWUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGluaXRpYWxpemVQcm9taXNlKHByb21pc2UsIHJlc29sdmVyKSB7XG4gIHRyeSB7XG4gICAgcmVzb2x2ZXIoZnVuY3Rpb24gcmVzb2x2ZVByb21pc2UodmFsdWUpIHtcbiAgICAgIHJlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICAgIH0sIGZ1bmN0aW9uIHJlamVjdFByb21pc2UocmVhc29uKSB7XG4gICAgICByZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgICB9KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJlamVjdChwcm9taXNlLCBlKTtcbiAgfVxufVxuXG52YXIgaWQgPSAwO1xuZnVuY3Rpb24gbmV4dElkKCkge1xuICByZXR1cm4gaWQrKztcbn1cblxuZnVuY3Rpb24gbWFrZVByb21pc2UocHJvbWlzZSkge1xuICBwcm9taXNlW1BST01JU0VfSURdID0gaWQrKztcbiAgcHJvbWlzZS5fc3RhdGUgPSB1bmRlZmluZWQ7XG4gIHByb21pc2UuX3Jlc3VsdCA9IHVuZGVmaW5lZDtcbiAgcHJvbWlzZS5fc3Vic2NyaWJlcnMgPSBbXTtcbn1cblxuZnVuY3Rpb24gdmFsaWRhdGlvbkVycm9yKCkge1xuICByZXR1cm4gbmV3IEVycm9yKCdBcnJheSBNZXRob2RzIG11c3QgYmUgcHJvdmlkZWQgYW4gQXJyYXknKTtcbn1cblxudmFyIEVudW1lcmF0b3IgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIEVudW1lcmF0b3IoQ29uc3RydWN0b3IsIGlucHV0KSB7XG4gICAgdGhpcy5faW5zdGFuY2VDb25zdHJ1Y3RvciA9IENvbnN0cnVjdG9yO1xuICAgIHRoaXMucHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3Rvcihub29wKTtcblxuICAgIGlmICghdGhpcy5wcm9taXNlW1BST01JU0VfSURdKSB7XG4gICAgICBtYWtlUHJvbWlzZSh0aGlzLnByb21pc2UpO1xuICAgIH1cblxuICAgIGlmIChpc0FycmF5KGlucHV0KSkge1xuICAgICAgdGhpcy5sZW5ndGggPSBpbnB1dC5sZW5ndGg7XG4gICAgICB0aGlzLl9yZW1haW5pbmcgPSBpbnB1dC5sZW5ndGg7XG5cbiAgICAgIHRoaXMuX3Jlc3VsdCA9IG5ldyBBcnJheSh0aGlzLmxlbmd0aCk7XG5cbiAgICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBmdWxmaWxsKHRoaXMucHJvbWlzZSwgdGhpcy5fcmVzdWx0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubGVuZ3RoID0gdGhpcy5sZW5ndGggfHwgMDtcbiAgICAgICAgdGhpcy5fZW51bWVyYXRlKGlucHV0KTtcbiAgICAgICAgaWYgKHRoaXMuX3JlbWFpbmluZyA9PT0gMCkge1xuICAgICAgICAgIGZ1bGZpbGwodGhpcy5wcm9taXNlLCB0aGlzLl9yZXN1bHQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlamVjdCh0aGlzLnByb21pc2UsIHZhbGlkYXRpb25FcnJvcigpKTtcbiAgICB9XG4gIH1cblxuICBFbnVtZXJhdG9yLnByb3RvdHlwZS5fZW51bWVyYXRlID0gZnVuY3Rpb24gX2VudW1lcmF0ZShpbnB1dCkge1xuICAgIGZvciAodmFyIGkgPSAwOyB0aGlzLl9zdGF0ZSA9PT0gUEVORElORyAmJiBpIDwgaW5wdXQubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuX2VhY2hFbnRyeShpbnB1dFtpXSwgaSk7XG4gICAgfVxuICB9O1xuXG4gIEVudW1lcmF0b3IucHJvdG90eXBlLl9lYWNoRW50cnkgPSBmdW5jdGlvbiBfZWFjaEVudHJ5KGVudHJ5LCBpKSB7XG4gICAgdmFyIGMgPSB0aGlzLl9pbnN0YW5jZUNvbnN0cnVjdG9yO1xuICAgIHZhciByZXNvbHZlJCQxID0gYy5yZXNvbHZlO1xuXG5cbiAgICBpZiAocmVzb2x2ZSQkMSA9PT0gcmVzb2x2ZSQxKSB7XG4gICAgICB2YXIgX3RoZW4gPSBnZXRUaGVuKGVudHJ5KTtcblxuICAgICAgaWYgKF90aGVuID09PSB0aGVuICYmIGVudHJ5Ll9zdGF0ZSAhPT0gUEVORElORykge1xuICAgICAgICB0aGlzLl9zZXR0bGVkQXQoZW50cnkuX3N0YXRlLCBpLCBlbnRyeS5fcmVzdWx0KTtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIF90aGVuICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHRoaXMuX3JlbWFpbmluZy0tO1xuICAgICAgICB0aGlzLl9yZXN1bHRbaV0gPSBlbnRyeTtcbiAgICAgIH0gZWxzZSBpZiAoYyA9PT0gUHJvbWlzZSQxKSB7XG4gICAgICAgIHZhciBwcm9taXNlID0gbmV3IGMobm9vcCk7XG4gICAgICAgIGhhbmRsZU1heWJlVGhlbmFibGUocHJvbWlzZSwgZW50cnksIF90aGVuKTtcbiAgICAgICAgdGhpcy5fd2lsbFNldHRsZUF0KHByb21pc2UsIGkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fd2lsbFNldHRsZUF0KG5ldyBjKGZ1bmN0aW9uIChyZXNvbHZlJCQxKSB7XG4gICAgICAgICAgcmV0dXJuIHJlc29sdmUkJDEoZW50cnkpO1xuICAgICAgICB9KSwgaSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3dpbGxTZXR0bGVBdChyZXNvbHZlJCQxKGVudHJ5KSwgaSk7XG4gICAgfVxuICB9O1xuXG4gIEVudW1lcmF0b3IucHJvdG90eXBlLl9zZXR0bGVkQXQgPSBmdW5jdGlvbiBfc2V0dGxlZEF0KHN0YXRlLCBpLCB2YWx1ZSkge1xuICAgIHZhciBwcm9taXNlID0gdGhpcy5wcm9taXNlO1xuXG5cbiAgICBpZiAocHJvbWlzZS5fc3RhdGUgPT09IFBFTkRJTkcpIHtcbiAgICAgIHRoaXMuX3JlbWFpbmluZy0tO1xuXG4gICAgICBpZiAoc3RhdGUgPT09IFJFSkVDVEVEKSB7XG4gICAgICAgIHJlamVjdChwcm9taXNlLCB2YWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9yZXN1bHRbaV0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5fcmVtYWluaW5nID09PSAwKSB7XG4gICAgICBmdWxmaWxsKHByb21pc2UsIHRoaXMuX3Jlc3VsdCk7XG4gICAgfVxuICB9O1xuXG4gIEVudW1lcmF0b3IucHJvdG90eXBlLl93aWxsU2V0dGxlQXQgPSBmdW5jdGlvbiBfd2lsbFNldHRsZUF0KHByb21pc2UsIGkpIHtcbiAgICB2YXIgZW51bWVyYXRvciA9IHRoaXM7XG5cbiAgICBzdWJzY3JpYmUocHJvbWlzZSwgdW5kZWZpbmVkLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIHJldHVybiBlbnVtZXJhdG9yLl9zZXR0bGVkQXQoRlVMRklMTEVELCBpLCB2YWx1ZSk7XG4gICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgcmV0dXJuIGVudW1lcmF0b3IuX3NldHRsZWRBdChSRUpFQ1RFRCwgaSwgcmVhc29uKTtcbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4gRW51bWVyYXRvcjtcbn0oKTtcblxuLyoqXG4gIGBQcm9taXNlLmFsbGAgYWNjZXB0cyBhbiBhcnJheSBvZiBwcm9taXNlcywgYW5kIHJldHVybnMgYSBuZXcgcHJvbWlzZSB3aGljaFxuICBpcyBmdWxmaWxsZWQgd2l0aCBhbiBhcnJheSBvZiBmdWxmaWxsbWVudCB2YWx1ZXMgZm9yIHRoZSBwYXNzZWQgcHJvbWlzZXMsIG9yXG4gIHJlamVjdGVkIHdpdGggdGhlIHJlYXNvbiBvZiB0aGUgZmlyc3QgcGFzc2VkIHByb21pc2UgdG8gYmUgcmVqZWN0ZWQuIEl0IGNhc3RzIGFsbFxuICBlbGVtZW50cyBvZiB0aGUgcGFzc2VkIGl0ZXJhYmxlIHRvIHByb21pc2VzIGFzIGl0IHJ1bnMgdGhpcyBhbGdvcml0aG0uXG5cbiAgRXhhbXBsZTpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlMSA9IHJlc29sdmUoMSk7XG4gIGxldCBwcm9taXNlMiA9IHJlc29sdmUoMik7XG4gIGxldCBwcm9taXNlMyA9IHJlc29sdmUoMyk7XG4gIGxldCBwcm9taXNlcyA9IFsgcHJvbWlzZTEsIHByb21pc2UyLCBwcm9taXNlMyBdO1xuXG4gIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uKGFycmF5KXtcbiAgICAvLyBUaGUgYXJyYXkgaGVyZSB3b3VsZCBiZSBbIDEsIDIsIDMgXTtcbiAgfSk7XG4gIGBgYFxuXG4gIElmIGFueSBvZiB0aGUgYHByb21pc2VzYCBnaXZlbiB0byBgYWxsYCBhcmUgcmVqZWN0ZWQsIHRoZSBmaXJzdCBwcm9taXNlXG4gIHRoYXQgaXMgcmVqZWN0ZWQgd2lsbCBiZSBnaXZlbiBhcyBhbiBhcmd1bWVudCB0byB0aGUgcmV0dXJuZWQgcHJvbWlzZXMnc1xuICByZWplY3Rpb24gaGFuZGxlci4gRm9yIGV4YW1wbGU6XG5cbiAgRXhhbXBsZTpcblxuICBgYGBqYXZhc2NyaXB0XG4gIGxldCBwcm9taXNlMSA9IHJlc29sdmUoMSk7XG4gIGxldCBwcm9taXNlMiA9IHJlamVjdChuZXcgRXJyb3IoXCIyXCIpKTtcbiAgbGV0IHByb21pc2UzID0gcmVqZWN0KG5ldyBFcnJvcihcIjNcIikpO1xuICBsZXQgcHJvbWlzZXMgPSBbIHByb21pc2UxLCBwcm9taXNlMiwgcHJvbWlzZTMgXTtcblxuICBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbihmdW5jdGlvbihhcnJheSl7XG4gICAgLy8gQ29kZSBoZXJlIG5ldmVyIHJ1bnMgYmVjYXVzZSB0aGVyZSBhcmUgcmVqZWN0ZWQgcHJvbWlzZXMhXG4gIH0sIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgLy8gZXJyb3IubWVzc2FnZSA9PT0gXCIyXCJcbiAgfSk7XG4gIGBgYFxuXG4gIEBtZXRob2QgYWxsXG4gIEBzdGF0aWNcbiAgQHBhcmFtIHtBcnJheX0gZW50cmllcyBhcnJheSBvZiBwcm9taXNlc1xuICBAcGFyYW0ge1N0cmluZ30gbGFiZWwgb3B0aW9uYWwgc3RyaW5nIGZvciBsYWJlbGluZyB0aGUgcHJvbWlzZS5cbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAcmV0dXJuIHtQcm9taXNlfSBwcm9taXNlIHRoYXQgaXMgZnVsZmlsbGVkIHdoZW4gYWxsIGBwcm9taXNlc2AgaGF2ZSBiZWVuXG4gIGZ1bGZpbGxlZCwgb3IgcmVqZWN0ZWQgaWYgYW55IG9mIHRoZW0gYmVjb21lIHJlamVjdGVkLlxuICBAc3RhdGljXG4qL1xuZnVuY3Rpb24gYWxsKGVudHJpZXMpIHtcbiAgcmV0dXJuIG5ldyBFbnVtZXJhdG9yKHRoaXMsIGVudHJpZXMpLnByb21pc2U7XG59XG5cbi8qKlxuICBgUHJvbWlzZS5yYWNlYCByZXR1cm5zIGEgbmV3IHByb21pc2Ugd2hpY2ggaXMgc2V0dGxlZCBpbiB0aGUgc2FtZSB3YXkgYXMgdGhlXG4gIGZpcnN0IHBhc3NlZCBwcm9taXNlIHRvIHNldHRsZS5cblxuICBFeGFtcGxlOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UxID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICByZXNvbHZlKCdwcm9taXNlIDEnKTtcbiAgICB9LCAyMDApO1xuICB9KTtcblxuICBsZXQgcHJvbWlzZTIgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIHJlc29sdmUoJ3Byb21pc2UgMicpO1xuICAgIH0sIDEwMCk7XG4gIH0pO1xuXG4gIFByb21pc2UucmFjZShbcHJvbWlzZTEsIHByb21pc2UyXSkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgIC8vIHJlc3VsdCA9PT0gJ3Byb21pc2UgMicgYmVjYXVzZSBpdCB3YXMgcmVzb2x2ZWQgYmVmb3JlIHByb21pc2UxXG4gICAgLy8gd2FzIHJlc29sdmVkLlxuICB9KTtcbiAgYGBgXG5cbiAgYFByb21pc2UucmFjZWAgaXMgZGV0ZXJtaW5pc3RpYyBpbiB0aGF0IG9ubHkgdGhlIHN0YXRlIG9mIHRoZSBmaXJzdFxuICBzZXR0bGVkIHByb21pc2UgbWF0dGVycy4gRm9yIGV4YW1wbGUsIGV2ZW4gaWYgb3RoZXIgcHJvbWlzZXMgZ2l2ZW4gdG8gdGhlXG4gIGBwcm9taXNlc2AgYXJyYXkgYXJndW1lbnQgYXJlIHJlc29sdmVkLCBidXQgdGhlIGZpcnN0IHNldHRsZWQgcHJvbWlzZSBoYXNcbiAgYmVjb21lIHJlamVjdGVkIGJlZm9yZSB0aGUgb3RoZXIgcHJvbWlzZXMgYmVjYW1lIGZ1bGZpbGxlZCwgdGhlIHJldHVybmVkXG4gIHByb21pc2Ugd2lsbCBiZWNvbWUgcmVqZWN0ZWQ6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZTEgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcbiAgICAgIHJlc29sdmUoJ3Byb21pc2UgMScpO1xuICAgIH0sIDIwMCk7XG4gIH0pO1xuXG4gIGxldCBwcm9taXNlMiA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgcmVqZWN0KG5ldyBFcnJvcigncHJvbWlzZSAyJykpO1xuICAgIH0sIDEwMCk7XG4gIH0pO1xuXG4gIFByb21pc2UucmFjZShbcHJvbWlzZTEsIHByb21pc2UyXSkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgIC8vIENvZGUgaGVyZSBuZXZlciBydW5zXG4gIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgLy8gcmVhc29uLm1lc3NhZ2UgPT09ICdwcm9taXNlIDInIGJlY2F1c2UgcHJvbWlzZSAyIGJlY2FtZSByZWplY3RlZCBiZWZvcmVcbiAgICAvLyBwcm9taXNlIDEgYmVjYW1lIGZ1bGZpbGxlZFxuICB9KTtcbiAgYGBgXG5cbiAgQW4gZXhhbXBsZSByZWFsLXdvcmxkIHVzZSBjYXNlIGlzIGltcGxlbWVudGluZyB0aW1lb3V0czpcblxuICBgYGBqYXZhc2NyaXB0XG4gIFByb21pc2UucmFjZShbYWpheCgnZm9vLmpzb24nKSwgdGltZW91dCg1MDAwKV0pXG4gIGBgYFxuXG4gIEBtZXRob2QgcmFjZVxuICBAc3RhdGljXG4gIEBwYXJhbSB7QXJyYXl9IHByb21pc2VzIGFycmF5IG9mIHByb21pc2VzIHRvIG9ic2VydmVcbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2Ugd2hpY2ggc2V0dGxlcyBpbiB0aGUgc2FtZSB3YXkgYXMgdGhlIGZpcnN0IHBhc3NlZFxuICBwcm9taXNlIHRvIHNldHRsZS5cbiovXG5mdW5jdGlvbiByYWNlKGVudHJpZXMpIHtcbiAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cbiAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcblxuICBpZiAoIWlzQXJyYXkoZW50cmllcykpIHtcbiAgICByZXR1cm4gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uIChfLCByZWplY3QpIHtcbiAgICAgIHJldHVybiByZWplY3QobmV3IFR5cGVFcnJvcignWW91IG11c3QgcGFzcyBhbiBhcnJheSB0byByYWNlLicpKTtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciBsZW5ndGggPSBlbnRyaWVzLmxlbmd0aDtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgQ29uc3RydWN0b3IucmVzb2x2ZShlbnRyaWVzW2ldKS50aGVuKHJlc29sdmUsIHJlamVjdCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cblxuLyoqXG4gIGBQcm9taXNlLnJlamVjdGAgcmV0dXJucyBhIHByb21pc2UgcmVqZWN0ZWQgd2l0aCB0aGUgcGFzc2VkIGByZWFzb25gLlxuICBJdCBpcyBzaG9ydGhhbmQgZm9yIHRoZSBmb2xsb3dpbmc6XG5cbiAgYGBgamF2YXNjcmlwdFxuICBsZXQgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgcmVqZWN0KG5ldyBFcnJvcignV0hPT1BTJykpO1xuICB9KTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgIC8vIENvZGUgaGVyZSBkb2Vzbid0IHJ1biBiZWNhdXNlIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkIVxuICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgIC8vIHJlYXNvbi5tZXNzYWdlID09PSAnV0hPT1BTJ1xuICB9KTtcbiAgYGBgXG5cbiAgSW5zdGVhZCBvZiB3cml0aW5nIHRoZSBhYm92ZSwgeW91ciBjb2RlIG5vdyBzaW1wbHkgYmVjb21lcyB0aGUgZm9sbG93aW5nOlxuXG4gIGBgYGphdmFzY3JpcHRcbiAgbGV0IHByb21pc2UgPSBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ1dIT09QUycpKTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpe1xuICAgIC8vIENvZGUgaGVyZSBkb2Vzbid0IHJ1biBiZWNhdXNlIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkIVxuICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgIC8vIHJlYXNvbi5tZXNzYWdlID09PSAnV0hPT1BTJ1xuICB9KTtcbiAgYGBgXG5cbiAgQG1ldGhvZCByZWplY3RcbiAgQHN0YXRpY1xuICBAcGFyYW0ge0FueX0gcmVhc29uIHZhbHVlIHRoYXQgdGhlIHJldHVybmVkIHByb21pc2Ugd2lsbCBiZSByZWplY3RlZCB3aXRoLlxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSByZWplY3RlZCB3aXRoIHRoZSBnaXZlbiBgcmVhc29uYC5cbiovXG5mdW5jdGlvbiByZWplY3QkMShyZWFzb24pIHtcbiAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cbiAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcbiAgdmFyIHByb21pc2UgPSBuZXcgQ29uc3RydWN0b3Iobm9vcCk7XG4gIHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuICByZXR1cm4gcHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gbmVlZHNSZXNvbHZlcigpIHtcbiAgdGhyb3cgbmV3IFR5cGVFcnJvcignWW91IG11c3QgcGFzcyBhIHJlc29sdmVyIGZ1bmN0aW9uIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB0byB0aGUgcHJvbWlzZSBjb25zdHJ1Y3RvcicpO1xufVxuXG5mdW5jdGlvbiBuZWVkc05ldygpIHtcbiAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkZhaWxlZCB0byBjb25zdHJ1Y3QgJ1Byb21pc2UnOiBQbGVhc2UgdXNlIHRoZSAnbmV3JyBvcGVyYXRvciwgdGhpcyBvYmplY3QgY29uc3RydWN0b3IgY2Fubm90IGJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLlwiKTtcbn1cblxuLyoqXG4gIFByb21pc2Ugb2JqZWN0cyByZXByZXNlbnQgdGhlIGV2ZW50dWFsIHJlc3VsdCBvZiBhbiBhc3luY2hyb25vdXMgb3BlcmF0aW9uLiBUaGVcbiAgcHJpbWFyeSB3YXkgb2YgaW50ZXJhY3Rpbmcgd2l0aCBhIHByb21pc2UgaXMgdGhyb3VnaCBpdHMgYHRoZW5gIG1ldGhvZCwgd2hpY2hcbiAgcmVnaXN0ZXJzIGNhbGxiYWNrcyB0byByZWNlaXZlIGVpdGhlciBhIHByb21pc2UncyBldmVudHVhbCB2YWx1ZSBvciB0aGUgcmVhc29uXG4gIHdoeSB0aGUgcHJvbWlzZSBjYW5ub3QgYmUgZnVsZmlsbGVkLlxuXG4gIFRlcm1pbm9sb2d5XG4gIC0tLS0tLS0tLS0tXG5cbiAgLSBgcHJvbWlzZWAgaXMgYW4gb2JqZWN0IG9yIGZ1bmN0aW9uIHdpdGggYSBgdGhlbmAgbWV0aG9kIHdob3NlIGJlaGF2aW9yIGNvbmZvcm1zIHRvIHRoaXMgc3BlY2lmaWNhdGlvbi5cbiAgLSBgdGhlbmFibGVgIGlzIGFuIG9iamVjdCBvciBmdW5jdGlvbiB0aGF0IGRlZmluZXMgYSBgdGhlbmAgbWV0aG9kLlxuICAtIGB2YWx1ZWAgaXMgYW55IGxlZ2FsIEphdmFTY3JpcHQgdmFsdWUgKGluY2x1ZGluZyB1bmRlZmluZWQsIGEgdGhlbmFibGUsIG9yIGEgcHJvbWlzZSkuXG4gIC0gYGV4Y2VwdGlvbmAgaXMgYSB2YWx1ZSB0aGF0IGlzIHRocm93biB1c2luZyB0aGUgdGhyb3cgc3RhdGVtZW50LlxuICAtIGByZWFzb25gIGlzIGEgdmFsdWUgdGhhdCBpbmRpY2F0ZXMgd2h5IGEgcHJvbWlzZSB3YXMgcmVqZWN0ZWQuXG4gIC0gYHNldHRsZWRgIHRoZSBmaW5hbCByZXN0aW5nIHN0YXRlIG9mIGEgcHJvbWlzZSwgZnVsZmlsbGVkIG9yIHJlamVjdGVkLlxuXG4gIEEgcHJvbWlzZSBjYW4gYmUgaW4gb25lIG9mIHRocmVlIHN0YXRlczogcGVuZGluZywgZnVsZmlsbGVkLCBvciByZWplY3RlZC5cblxuICBQcm9taXNlcyB0aGF0IGFyZSBmdWxmaWxsZWQgaGF2ZSBhIGZ1bGZpbGxtZW50IHZhbHVlIGFuZCBhcmUgaW4gdGhlIGZ1bGZpbGxlZFxuICBzdGF0ZS4gIFByb21pc2VzIHRoYXQgYXJlIHJlamVjdGVkIGhhdmUgYSByZWplY3Rpb24gcmVhc29uIGFuZCBhcmUgaW4gdGhlXG4gIHJlamVjdGVkIHN0YXRlLiAgQSBmdWxmaWxsbWVudCB2YWx1ZSBpcyBuZXZlciBhIHRoZW5hYmxlLlxuXG4gIFByb21pc2VzIGNhbiBhbHNvIGJlIHNhaWQgdG8gKnJlc29sdmUqIGEgdmFsdWUuICBJZiB0aGlzIHZhbHVlIGlzIGFsc28gYVxuICBwcm9taXNlLCB0aGVuIHRoZSBvcmlnaW5hbCBwcm9taXNlJ3Mgc2V0dGxlZCBzdGF0ZSB3aWxsIG1hdGNoIHRoZSB2YWx1ZSdzXG4gIHNldHRsZWQgc3RhdGUuICBTbyBhIHByb21pc2UgdGhhdCAqcmVzb2x2ZXMqIGEgcHJvbWlzZSB0aGF0IHJlamVjdHMgd2lsbFxuICBpdHNlbGYgcmVqZWN0LCBhbmQgYSBwcm9taXNlIHRoYXQgKnJlc29sdmVzKiBhIHByb21pc2UgdGhhdCBmdWxmaWxscyB3aWxsXG4gIGl0c2VsZiBmdWxmaWxsLlxuXG5cbiAgQmFzaWMgVXNhZ2U6XG4gIC0tLS0tLS0tLS0tLVxuXG4gIGBgYGpzXG4gIGxldCBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgLy8gb24gc3VjY2Vzc1xuICAgIHJlc29sdmUodmFsdWUpO1xuXG4gICAgLy8gb24gZmFpbHVyZVxuICAgIHJlamVjdChyZWFzb24pO1xuICB9KTtcblxuICBwcm9taXNlLnRoZW4oZnVuY3Rpb24odmFsdWUpIHtcbiAgICAvLyBvbiBmdWxmaWxsbWVudFxuICB9LCBmdW5jdGlvbihyZWFzb24pIHtcbiAgICAvLyBvbiByZWplY3Rpb25cbiAgfSk7XG4gIGBgYFxuXG4gIEFkdmFuY2VkIFVzYWdlOlxuICAtLS0tLS0tLS0tLS0tLS1cblxuICBQcm9taXNlcyBzaGluZSB3aGVuIGFic3RyYWN0aW5nIGF3YXkgYXN5bmNocm9ub3VzIGludGVyYWN0aW9ucyBzdWNoIGFzXG4gIGBYTUxIdHRwUmVxdWVzdGBzLlxuXG4gIGBgYGpzXG4gIGZ1bmN0aW9uIGdldEpTT04odXJsKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICAgIHhoci5vcGVuKCdHRVQnLCB1cmwpO1xuICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGhhbmRsZXI7XG4gICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2pzb24nO1xuICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0FjY2VwdCcsICdhcHBsaWNhdGlvbi9qc29uJyk7XG4gICAgICB4aHIuc2VuZCgpO1xuXG4gICAgICBmdW5jdGlvbiBoYW5kbGVyKCkge1xuICAgICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSB0aGlzLkRPTkUpIHtcbiAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgcmVzb2x2ZSh0aGlzLnJlc3BvbnNlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignZ2V0SlNPTjogYCcgKyB1cmwgKyAnYCBmYWlsZWQgd2l0aCBzdGF0dXM6IFsnICsgdGhpcy5zdGF0dXMgKyAnXScpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBnZXRKU09OKCcvcG9zdHMuanNvbicpLnRoZW4oZnVuY3Rpb24oanNvbikge1xuICAgIC8vIG9uIGZ1bGZpbGxtZW50XG4gIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuICAgIC8vIG9uIHJlamVjdGlvblxuICB9KTtcbiAgYGBgXG5cbiAgVW5saWtlIGNhbGxiYWNrcywgcHJvbWlzZXMgYXJlIGdyZWF0IGNvbXBvc2FibGUgcHJpbWl0aXZlcy5cblxuICBgYGBqc1xuICBQcm9taXNlLmFsbChbXG4gICAgZ2V0SlNPTignL3Bvc3RzJyksXG4gICAgZ2V0SlNPTignL2NvbW1lbnRzJylcbiAgXSkudGhlbihmdW5jdGlvbih2YWx1ZXMpe1xuICAgIHZhbHVlc1swXSAvLyA9PiBwb3N0c0pTT05cbiAgICB2YWx1ZXNbMV0gLy8gPT4gY29tbWVudHNKU09OXG5cbiAgICByZXR1cm4gdmFsdWVzO1xuICB9KTtcbiAgYGBgXG5cbiAgQGNsYXNzIFByb21pc2VcbiAgQHBhcmFtIHtGdW5jdGlvbn0gcmVzb2x2ZXJcbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAY29uc3RydWN0b3JcbiovXG5cbnZhciBQcm9taXNlJDEgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFByb21pc2UocmVzb2x2ZXIpIHtcbiAgICB0aGlzW1BST01JU0VfSURdID0gbmV4dElkKCk7XG4gICAgdGhpcy5fcmVzdWx0ID0gdGhpcy5fc3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fc3Vic2NyaWJlcnMgPSBbXTtcblxuICAgIGlmIChub29wICE9PSByZXNvbHZlcikge1xuICAgICAgdHlwZW9mIHJlc29sdmVyICE9PSAnZnVuY3Rpb24nICYmIG5lZWRzUmVzb2x2ZXIoKTtcbiAgICAgIHRoaXMgaW5zdGFuY2VvZiBQcm9taXNlID8gaW5pdGlhbGl6ZVByb21pc2UodGhpcywgcmVzb2x2ZXIpIDogbmVlZHNOZXcoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgVGhlIHByaW1hcnkgd2F5IG9mIGludGVyYWN0aW5nIHdpdGggYSBwcm9taXNlIGlzIHRocm91Z2ggaXRzIGB0aGVuYCBtZXRob2QsXG4gIHdoaWNoIHJlZ2lzdGVycyBjYWxsYmFja3MgdG8gcmVjZWl2ZSBlaXRoZXIgYSBwcm9taXNlJ3MgZXZlbnR1YWwgdmFsdWUgb3IgdGhlXG4gIHJlYXNvbiB3aHkgdGhlIHByb21pc2UgY2Fubm90IGJlIGZ1bGZpbGxlZC5cbiAgIGBgYGpzXG4gIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbih1c2VyKXtcbiAgICAvLyB1c2VyIGlzIGF2YWlsYWJsZVxuICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgIC8vIHVzZXIgaXMgdW5hdmFpbGFibGUsIGFuZCB5b3UgYXJlIGdpdmVuIHRoZSByZWFzb24gd2h5XG4gIH0pO1xuICBgYGBcbiAgIENoYWluaW5nXG4gIC0tLS0tLS0tXG4gICBUaGUgcmV0dXJuIHZhbHVlIG9mIGB0aGVuYCBpcyBpdHNlbGYgYSBwcm9taXNlLiAgVGhpcyBzZWNvbmQsICdkb3duc3RyZWFtJ1xuICBwcm9taXNlIGlzIHJlc29sdmVkIHdpdGggdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgZmlyc3QgcHJvbWlzZSdzIGZ1bGZpbGxtZW50XG4gIG9yIHJlamVjdGlvbiBoYW5kbGVyLCBvciByZWplY3RlZCBpZiB0aGUgaGFuZGxlciB0aHJvd3MgYW4gZXhjZXB0aW9uLlxuICAgYGBganNcbiAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgcmV0dXJuIHVzZXIubmFtZTtcbiAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIHJldHVybiAnZGVmYXVsdCBuYW1lJztcbiAgfSkudGhlbihmdW5jdGlvbiAodXNlck5hbWUpIHtcbiAgICAvLyBJZiBgZmluZFVzZXJgIGZ1bGZpbGxlZCwgYHVzZXJOYW1lYCB3aWxsIGJlIHRoZSB1c2VyJ3MgbmFtZSwgb3RoZXJ3aXNlIGl0XG4gICAgLy8gd2lsbCBiZSBgJ2RlZmF1bHQgbmFtZSdgXG4gIH0pO1xuICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdGb3VuZCB1c2VyLCBidXQgc3RpbGwgdW5oYXBweScpO1xuICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdgZmluZFVzZXJgIHJlamVjdGVkIGFuZCB3ZSdyZSB1bmhhcHB5Jyk7XG4gIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgLy8gbmV2ZXIgcmVhY2hlZFxuICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgLy8gaWYgYGZpbmRVc2VyYCBmdWxmaWxsZWQsIGByZWFzb25gIHdpbGwgYmUgJ0ZvdW5kIHVzZXIsIGJ1dCBzdGlsbCB1bmhhcHB5Jy5cbiAgICAvLyBJZiBgZmluZFVzZXJgIHJlamVjdGVkLCBgcmVhc29uYCB3aWxsIGJlICdgZmluZFVzZXJgIHJlamVjdGVkIGFuZCB3ZSdyZSB1bmhhcHB5Jy5cbiAgfSk7XG4gIGBgYFxuICBJZiB0aGUgZG93bnN0cmVhbSBwcm9taXNlIGRvZXMgbm90IHNwZWNpZnkgYSByZWplY3Rpb24gaGFuZGxlciwgcmVqZWN0aW9uIHJlYXNvbnMgd2lsbCBiZSBwcm9wYWdhdGVkIGZ1cnRoZXIgZG93bnN0cmVhbS5cbiAgIGBgYGpzXG4gIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgIHRocm93IG5ldyBQZWRhZ29naWNhbEV4Y2VwdGlvbignVXBzdHJlYW0gZXJyb3InKTtcbiAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAvLyBuZXZlciByZWFjaGVkXG4gIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgLy8gbmV2ZXIgcmVhY2hlZFxuICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgLy8gVGhlIGBQZWRnYWdvY2lhbEV4Y2VwdGlvbmAgaXMgcHJvcGFnYXRlZCBhbGwgdGhlIHdheSBkb3duIHRvIGhlcmVcbiAgfSk7XG4gIGBgYFxuICAgQXNzaW1pbGF0aW9uXG4gIC0tLS0tLS0tLS0tLVxuICAgU29tZXRpbWVzIHRoZSB2YWx1ZSB5b3Ugd2FudCB0byBwcm9wYWdhdGUgdG8gYSBkb3duc3RyZWFtIHByb21pc2UgY2FuIG9ubHkgYmVcbiAgcmV0cmlldmVkIGFzeW5jaHJvbm91c2x5LiBUaGlzIGNhbiBiZSBhY2hpZXZlZCBieSByZXR1cm5pbmcgYSBwcm9taXNlIGluIHRoZVxuICBmdWxmaWxsbWVudCBvciByZWplY3Rpb24gaGFuZGxlci4gVGhlIGRvd25zdHJlYW0gcHJvbWlzZSB3aWxsIHRoZW4gYmUgcGVuZGluZ1xuICB1bnRpbCB0aGUgcmV0dXJuZWQgcHJvbWlzZSBpcyBzZXR0bGVkLiBUaGlzIGlzIGNhbGxlZCAqYXNzaW1pbGF0aW9uKi5cbiAgIGBgYGpzXG4gIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgIHJldHVybiBmaW5kQ29tbWVudHNCeUF1dGhvcih1c2VyKTtcbiAgfSkudGhlbihmdW5jdGlvbiAoY29tbWVudHMpIHtcbiAgICAvLyBUaGUgdXNlcidzIGNvbW1lbnRzIGFyZSBub3cgYXZhaWxhYmxlXG4gIH0pO1xuICBgYGBcbiAgIElmIHRoZSBhc3NpbWxpYXRlZCBwcm9taXNlIHJlamVjdHMsIHRoZW4gdGhlIGRvd25zdHJlYW0gcHJvbWlzZSB3aWxsIGFsc28gcmVqZWN0LlxuICAgYGBganNcbiAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgcmV0dXJuIGZpbmRDb21tZW50c0J5QXV0aG9yKHVzZXIpO1xuICB9KS50aGVuKGZ1bmN0aW9uIChjb21tZW50cykge1xuICAgIC8vIElmIGBmaW5kQ29tbWVudHNCeUF1dGhvcmAgZnVsZmlsbHMsIHdlJ2xsIGhhdmUgdGhlIHZhbHVlIGhlcmVcbiAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIC8vIElmIGBmaW5kQ29tbWVudHNCeUF1dGhvcmAgcmVqZWN0cywgd2UnbGwgaGF2ZSB0aGUgcmVhc29uIGhlcmVcbiAgfSk7XG4gIGBgYFxuICAgU2ltcGxlIEV4YW1wbGVcbiAgLS0tLS0tLS0tLS0tLS1cbiAgIFN5bmNocm9ub3VzIEV4YW1wbGVcbiAgIGBgYGphdmFzY3JpcHRcbiAgbGV0IHJlc3VsdDtcbiAgIHRyeSB7XG4gICAgcmVzdWx0ID0gZmluZFJlc3VsdCgpO1xuICAgIC8vIHN1Y2Nlc3NcbiAgfSBjYXRjaChyZWFzb24pIHtcbiAgICAvLyBmYWlsdXJlXG4gIH1cbiAgYGBgXG4gICBFcnJiYWNrIEV4YW1wbGVcbiAgIGBgYGpzXG4gIGZpbmRSZXN1bHQoZnVuY3Rpb24ocmVzdWx0LCBlcnIpe1xuICAgIGlmIChlcnIpIHtcbiAgICAgIC8vIGZhaWx1cmVcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gc3VjY2Vzc1xuICAgIH1cbiAgfSk7XG4gIGBgYFxuICAgUHJvbWlzZSBFeGFtcGxlO1xuICAgYGBgamF2YXNjcmlwdFxuICBmaW5kUmVzdWx0KCkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgIC8vIHN1Y2Nlc3NcbiAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAvLyBmYWlsdXJlXG4gIH0pO1xuICBgYGBcbiAgIEFkdmFuY2VkIEV4YW1wbGVcbiAgLS0tLS0tLS0tLS0tLS1cbiAgIFN5bmNocm9ub3VzIEV4YW1wbGVcbiAgIGBgYGphdmFzY3JpcHRcbiAgbGV0IGF1dGhvciwgYm9va3M7XG4gICB0cnkge1xuICAgIGF1dGhvciA9IGZpbmRBdXRob3IoKTtcbiAgICBib29rcyAgPSBmaW5kQm9va3NCeUF1dGhvcihhdXRob3IpO1xuICAgIC8vIHN1Y2Nlc3NcbiAgfSBjYXRjaChyZWFzb24pIHtcbiAgICAvLyBmYWlsdXJlXG4gIH1cbiAgYGBgXG4gICBFcnJiYWNrIEV4YW1wbGVcbiAgIGBgYGpzXG4gICBmdW5jdGlvbiBmb3VuZEJvb2tzKGJvb2tzKSB7XG4gICB9XG4gICBmdW5jdGlvbiBmYWlsdXJlKHJlYXNvbikge1xuICAgfVxuICAgZmluZEF1dGhvcihmdW5jdGlvbihhdXRob3IsIGVycil7XG4gICAgaWYgKGVycikge1xuICAgICAgZmFpbHVyZShlcnIpO1xuICAgICAgLy8gZmFpbHVyZVxuICAgIH0gZWxzZSB7XG4gICAgICB0cnkge1xuICAgICAgICBmaW5kQm9vb2tzQnlBdXRob3IoYXV0aG9yLCBmdW5jdGlvbihib29rcywgZXJyKSB7XG4gICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgZmFpbHVyZShlcnIpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBmb3VuZEJvb2tzKGJvb2tzKTtcbiAgICAgICAgICAgIH0gY2F0Y2gocmVhc29uKSB7XG4gICAgICAgICAgICAgIGZhaWx1cmUocmVhc29uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBjYXRjaChlcnJvcikge1xuICAgICAgICBmYWlsdXJlKGVycik7XG4gICAgICB9XG4gICAgICAvLyBzdWNjZXNzXG4gICAgfVxuICB9KTtcbiAgYGBgXG4gICBQcm9taXNlIEV4YW1wbGU7XG4gICBgYGBqYXZhc2NyaXB0XG4gIGZpbmRBdXRob3IoKS5cbiAgICB0aGVuKGZpbmRCb29rc0J5QXV0aG9yKS5cbiAgICB0aGVuKGZ1bmN0aW9uKGJvb2tzKXtcbiAgICAgIC8vIGZvdW5kIGJvb2tzXG4gIH0pLmNhdGNoKGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgLy8gc29tZXRoaW5nIHdlbnQgd3JvbmdcbiAgfSk7XG4gIGBgYFxuICAgQG1ldGhvZCB0aGVuXG4gIEBwYXJhbSB7RnVuY3Rpb259IG9uRnVsZmlsbGVkXG4gIEBwYXJhbSB7RnVuY3Rpb259IG9uUmVqZWN0ZWRcbiAgVXNlZnVsIGZvciB0b29saW5nLlxuICBAcmV0dXJuIHtQcm9taXNlfVxuICAqL1xuXG4gIC8qKlxuICBgY2F0Y2hgIGlzIHNpbXBseSBzdWdhciBmb3IgYHRoZW4odW5kZWZpbmVkLCBvblJlamVjdGlvbilgIHdoaWNoIG1ha2VzIGl0IHRoZSBzYW1lXG4gIGFzIHRoZSBjYXRjaCBibG9jayBvZiBhIHRyeS9jYXRjaCBzdGF0ZW1lbnQuXG4gIGBgYGpzXG4gIGZ1bmN0aW9uIGZpbmRBdXRob3IoKXtcbiAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZG4ndCBmaW5kIHRoYXQgYXV0aG9yJyk7XG4gIH1cbiAgLy8gc3luY2hyb25vdXNcbiAgdHJ5IHtcbiAgZmluZEF1dGhvcigpO1xuICB9IGNhdGNoKHJlYXNvbikge1xuICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZ1xuICB9XG4gIC8vIGFzeW5jIHdpdGggcHJvbWlzZXNcbiAgZmluZEF1dGhvcigpLmNhdGNoKGZ1bmN0aW9uKHJlYXNvbil7XG4gIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXG4gIH0pO1xuICBgYGBcbiAgQG1ldGhvZCBjYXRjaFxuICBAcGFyYW0ge0Z1bmN0aW9ufSBvblJlamVjdGlvblxuICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gIEByZXR1cm4ge1Byb21pc2V9XG4gICovXG5cblxuICBQcm9taXNlLnByb3RvdHlwZS5jYXRjaCA9IGZ1bmN0aW9uIF9jYXRjaChvblJlamVjdGlvbikge1xuICAgIHJldHVybiB0aGlzLnRoZW4obnVsbCwgb25SZWplY3Rpb24pO1xuICB9O1xuXG4gIC8qKlxuICAgIGBmaW5hbGx5YCB3aWxsIGJlIGludm9rZWQgcmVnYXJkbGVzcyBvZiB0aGUgcHJvbWlzZSdzIGZhdGUganVzdCBhcyBuYXRpdmVcbiAgICB0cnkvY2F0Y2gvZmluYWxseSBiZWhhdmVzXG4gIFxuICAgIFN5bmNocm9ub3VzIGV4YW1wbGU6XG4gIFxuICAgIGBgYGpzXG4gICAgZmluZEF1dGhvcigpIHtcbiAgICAgIGlmIChNYXRoLnJhbmRvbSgpID4gMC41KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBBdXRob3IoKTtcbiAgICB9XG4gIFxuICAgIHRyeSB7XG4gICAgICByZXR1cm4gZmluZEF1dGhvcigpOyAvLyBzdWNjZWVkIG9yIGZhaWxcbiAgICB9IGNhdGNoKGVycm9yKSB7XG4gICAgICByZXR1cm4gZmluZE90aGVyQXV0aGVyKCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIC8vIGFsd2F5cyBydW5zXG4gICAgICAvLyBkb2Vzbid0IGFmZmVjdCB0aGUgcmV0dXJuIHZhbHVlXG4gICAgfVxuICAgIGBgYFxuICBcbiAgICBBc3luY2hyb25vdXMgZXhhbXBsZTpcbiAgXG4gICAgYGBganNcbiAgICBmaW5kQXV0aG9yKCkuY2F0Y2goZnVuY3Rpb24ocmVhc29uKXtcbiAgICAgIHJldHVybiBmaW5kT3RoZXJBdXRoZXIoKTtcbiAgICB9KS5maW5hbGx5KGZ1bmN0aW9uKCl7XG4gICAgICAvLyBhdXRob3Igd2FzIGVpdGhlciBmb3VuZCwgb3Igbm90XG4gICAgfSk7XG4gICAgYGBgXG4gIFxuICAgIEBtZXRob2QgZmluYWxseVxuICAgIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gICAgQHJldHVybiB7UHJvbWlzZX1cbiAgKi9cblxuXG4gIFByb21pc2UucHJvdG90eXBlLmZpbmFsbHkgPSBmdW5jdGlvbiBfZmluYWxseShjYWxsYmFjaykge1xuICAgIHZhciBwcm9taXNlID0gdGhpcztcbiAgICB2YXIgY29uc3RydWN0b3IgPSBwcm9taXNlLmNvbnN0cnVjdG9yO1xuXG4gICAgaWYgKGlzRnVuY3Rpb24oY2FsbGJhY2spKSB7XG4gICAgICByZXR1cm4gcHJvbWlzZS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gY29uc3RydWN0b3IucmVzb2x2ZShjYWxsYmFjaygpKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH0pO1xuICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICByZXR1cm4gY29uc3RydWN0b3IucmVzb2x2ZShjYWxsYmFjaygpKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0aHJvdyByZWFzb247XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHByb21pc2UudGhlbihjYWxsYmFjaywgY2FsbGJhY2spO1xuICB9O1xuXG4gIHJldHVybiBQcm9taXNlO1xufSgpO1xuXG5Qcm9taXNlJDEucHJvdG90eXBlLnRoZW4gPSB0aGVuO1xuUHJvbWlzZSQxLmFsbCA9IGFsbDtcblByb21pc2UkMS5yYWNlID0gcmFjZTtcblByb21pc2UkMS5yZXNvbHZlID0gcmVzb2x2ZSQxO1xuUHJvbWlzZSQxLnJlamVjdCA9IHJlamVjdCQxO1xuUHJvbWlzZSQxLl9zZXRTY2hlZHVsZXIgPSBzZXRTY2hlZHVsZXI7XG5Qcm9taXNlJDEuX3NldEFzYXAgPSBzZXRBc2FwO1xuUHJvbWlzZSQxLl9hc2FwID0gYXNhcDtcblxuLypnbG9iYWwgc2VsZiovXG5mdW5jdGlvbiBwb2x5ZmlsbCgpIHtcbiAgdmFyIGxvY2FsID0gdm9pZCAwO1xuXG4gIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xuICAgIGxvY2FsID0gZ2xvYmFsO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykge1xuICAgIGxvY2FsID0gc2VsZjtcbiAgfSBlbHNlIHtcbiAgICB0cnkge1xuICAgICAgbG9jYWwgPSBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigncG9seWZpbGwgZmFpbGVkIGJlY2F1c2UgZ2xvYmFsIG9iamVjdCBpcyB1bmF2YWlsYWJsZSBpbiB0aGlzIGVudmlyb25tZW50Jyk7XG4gICAgfVxuICB9XG5cbiAgdmFyIFAgPSBsb2NhbC5Qcm9taXNlO1xuXG4gIGlmIChQKSB7XG4gICAgdmFyIHByb21pc2VUb1N0cmluZyA9IG51bGw7XG4gICAgdHJ5IHtcbiAgICAgIHByb21pc2VUb1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChQLnJlc29sdmUoKSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gc2lsZW50bHkgaWdub3JlZFxuICAgIH1cblxuICAgIGlmIChwcm9taXNlVG9TdHJpbmcgPT09ICdbb2JqZWN0IFByb21pc2VdJyAmJiAhUC5jYXN0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG5cbiAgbG9jYWwuUHJvbWlzZSA9IFByb21pc2UkMTtcbn1cblxuLy8gU3RyYW5nZSBjb21wYXQuLlxuUHJvbWlzZSQxLnBvbHlmaWxsID0gcG9seWZpbGw7XG5Qcm9taXNlJDEuUHJvbWlzZSA9IFByb21pc2UkMTtcblxucmV0dXJuIFByb21pc2UkMTtcblxufSkpKTtcblxuXG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWVzNi1wcm9taXNlLm1hcFxuIiwiLy8gdGhlIHdoYXR3Zy1mZXRjaCBwb2x5ZmlsbCBpbnN0YWxscyB0aGUgZmV0Y2goKSBmdW5jdGlvblxuLy8gb24gdGhlIGdsb2JhbCBvYmplY3QgKHdpbmRvdyBvciBzZWxmKVxuLy9cbi8vIFJldHVybiB0aGF0IGFzIHRoZSBleHBvcnQgZm9yIHVzZSBpbiBXZWJwYWNrLCBCcm93c2VyaWZ5IGV0Yy5cbnJlcXVpcmUoJ3doYXR3Zy1mZXRjaCcpO1xubW9kdWxlLmV4cG9ydHMgPSBzZWxmLmZldGNoLmJpbmQoc2VsZik7XG4iLCIvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG4vLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcbi8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcbi8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cbnZhciBjYWNoZWRTZXRUaW1lb3V0O1xudmFyIGNhY2hlZENsZWFyVGltZW91dDtcblxuZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQgKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG4oZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgIH1cbn0gKCkpXG5mdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuICAgIH0gY2F0Y2goZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRPbmNlTGlzdGVuZXIgPSBub29wO1xuXG5wcm9jZXNzLmxpc3RlbmVycyA9IGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBbXSB9XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuIiwiKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcbiAgdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gZmFjdG9yeShleHBvcnRzKSA6XG4gIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShbJ2V4cG9ydHMnXSwgZmFjdG9yeSkgOlxuICAoZmFjdG9yeSgoZ2xvYmFsLldIQVRXR0ZldGNoID0ge30pKSk7XG59KHRoaXMsIChmdW5jdGlvbiAoZXhwb3J0cykgeyAndXNlIHN0cmljdCc7XG5cbiAgdmFyIHN1cHBvcnQgPSB7XG4gICAgc2VhcmNoUGFyYW1zOiAnVVJMU2VhcmNoUGFyYW1zJyBpbiBzZWxmLFxuICAgIGl0ZXJhYmxlOiAnU3ltYm9sJyBpbiBzZWxmICYmICdpdGVyYXRvcicgaW4gU3ltYm9sLFxuICAgIGJsb2I6XG4gICAgICAnRmlsZVJlYWRlcicgaW4gc2VsZiAmJlxuICAgICAgJ0Jsb2InIGluIHNlbGYgJiZcbiAgICAgIChmdW5jdGlvbigpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBuZXcgQmxvYigpO1xuICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSkoKSxcbiAgICBmb3JtRGF0YTogJ0Zvcm1EYXRhJyBpbiBzZWxmLFxuICAgIGFycmF5QnVmZmVyOiAnQXJyYXlCdWZmZXInIGluIHNlbGZcbiAgfTtcblxuICBmdW5jdGlvbiBpc0RhdGFWaWV3KG9iaikge1xuICAgIHJldHVybiBvYmogJiYgRGF0YVZpZXcucHJvdG90eXBlLmlzUHJvdG90eXBlT2Yob2JqKVxuICB9XG5cbiAgaWYgKHN1cHBvcnQuYXJyYXlCdWZmZXIpIHtcbiAgICB2YXIgdmlld0NsYXNzZXMgPSBbXG4gICAgICAnW29iamVjdCBJbnQ4QXJyYXldJyxcbiAgICAgICdbb2JqZWN0IFVpbnQ4QXJyYXldJyxcbiAgICAgICdbb2JqZWN0IFVpbnQ4Q2xhbXBlZEFycmF5XScsXG4gICAgICAnW29iamVjdCBJbnQxNkFycmF5XScsXG4gICAgICAnW29iamVjdCBVaW50MTZBcnJheV0nLFxuICAgICAgJ1tvYmplY3QgSW50MzJBcnJheV0nLFxuICAgICAgJ1tvYmplY3QgVWludDMyQXJyYXldJyxcbiAgICAgICdbb2JqZWN0IEZsb2F0MzJBcnJheV0nLFxuICAgICAgJ1tvYmplY3QgRmxvYXQ2NEFycmF5XSdcbiAgICBdO1xuXG4gICAgdmFyIGlzQXJyYXlCdWZmZXJWaWV3ID1cbiAgICAgIEFycmF5QnVmZmVyLmlzVmlldyB8fFxuICAgICAgZnVuY3Rpb24ob2JqKSB7XG4gICAgICAgIHJldHVybiBvYmogJiYgdmlld0NsYXNzZXMuaW5kZXhPZihPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKSkgPiAtMVxuICAgICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG5vcm1hbGl6ZU5hbWUobmFtZSkge1xuICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgIG5hbWUgPSBTdHJpbmcobmFtZSk7XG4gICAgfVxuICAgIGlmICgvW15hLXowLTlcXC0jJCUmJyorLl5fYHx+XS9pLnRlc3QobmFtZSkpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgY2hhcmFjdGVyIGluIGhlYWRlciBmaWVsZCBuYW1lJylcbiAgICB9XG4gICAgcmV0dXJuIG5hbWUudG9Mb3dlckNhc2UoKVxuICB9XG5cbiAgZnVuY3Rpb24gbm9ybWFsaXplVmFsdWUodmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgICAgdmFsdWUgPSBTdHJpbmcodmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWVcbiAgfVxuXG4gIC8vIEJ1aWxkIGEgZGVzdHJ1Y3RpdmUgaXRlcmF0b3IgZm9yIHRoZSB2YWx1ZSBsaXN0XG4gIGZ1bmN0aW9uIGl0ZXJhdG9yRm9yKGl0ZW1zKSB7XG4gICAgdmFyIGl0ZXJhdG9yID0ge1xuICAgICAgbmV4dDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IGl0ZW1zLnNoaWZ0KCk7XG4gICAgICAgIHJldHVybiB7ZG9uZTogdmFsdWUgPT09IHVuZGVmaW5lZCwgdmFsdWU6IHZhbHVlfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBpZiAoc3VwcG9ydC5pdGVyYWJsZSkge1xuICAgICAgaXRlcmF0b3JbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gaXRlcmF0b3JcbiAgICAgIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIGl0ZXJhdG9yXG4gIH1cblxuICBmdW5jdGlvbiBIZWFkZXJzKGhlYWRlcnMpIHtcbiAgICB0aGlzLm1hcCA9IHt9O1xuXG4gICAgaWYgKGhlYWRlcnMgaW5zdGFuY2VvZiBIZWFkZXJzKSB7XG4gICAgICBoZWFkZXJzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcbiAgICAgICAgdGhpcy5hcHBlbmQobmFtZSwgdmFsdWUpO1xuICAgICAgfSwgdGhpcyk7XG4gICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGhlYWRlcnMpKSB7XG4gICAgICBoZWFkZXJzLmZvckVhY2goZnVuY3Rpb24oaGVhZGVyKSB7XG4gICAgICAgIHRoaXMuYXBwZW5kKGhlYWRlclswXSwgaGVhZGVyWzFdKTtcbiAgICAgIH0sIHRoaXMpO1xuICAgIH0gZWxzZSBpZiAoaGVhZGVycykge1xuICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoaGVhZGVycykuZm9yRWFjaChmdW5jdGlvbihuYW1lKSB7XG4gICAgICAgIHRoaXMuYXBwZW5kKG5hbWUsIGhlYWRlcnNbbmFtZV0pO1xuICAgICAgfSwgdGhpcyk7XG4gICAgfVxuICB9XG5cbiAgSGVhZGVycy5wcm90b3R5cGUuYXBwZW5kID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICBuYW1lID0gbm9ybWFsaXplTmFtZShuYW1lKTtcbiAgICB2YWx1ZSA9IG5vcm1hbGl6ZVZhbHVlKHZhbHVlKTtcbiAgICB2YXIgb2xkVmFsdWUgPSB0aGlzLm1hcFtuYW1lXTtcbiAgICB0aGlzLm1hcFtuYW1lXSA9IG9sZFZhbHVlID8gb2xkVmFsdWUgKyAnLCAnICsgdmFsdWUgOiB2YWx1ZTtcbiAgfTtcblxuICBIZWFkZXJzLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgZGVsZXRlIHRoaXMubWFwW25vcm1hbGl6ZU5hbWUobmFtZSldO1xuICB9O1xuXG4gIEhlYWRlcnMucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICBuYW1lID0gbm9ybWFsaXplTmFtZShuYW1lKTtcbiAgICByZXR1cm4gdGhpcy5oYXMobmFtZSkgPyB0aGlzLm1hcFtuYW1lXSA6IG51bGxcbiAgfTtcblxuICBIZWFkZXJzLnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwLmhhc093blByb3BlcnR5KG5vcm1hbGl6ZU5hbWUobmFtZSkpXG4gIH07XG5cbiAgSGVhZGVycy5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICB0aGlzLm1hcFtub3JtYWxpemVOYW1lKG5hbWUpXSA9IG5vcm1hbGl6ZVZhbHVlKHZhbHVlKTtcbiAgfTtcblxuICBIZWFkZXJzLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24oY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICBmb3IgKHZhciBuYW1lIGluIHRoaXMubWFwKSB7XG4gICAgICBpZiAodGhpcy5tYXAuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzQXJnLCB0aGlzLm1hcFtuYW1lXSwgbmFtZSwgdGhpcyk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIEhlYWRlcnMucHJvdG90eXBlLmtleXMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaXRlbXMgPSBbXTtcbiAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcbiAgICAgIGl0ZW1zLnB1c2gobmFtZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGl0ZXJhdG9yRm9yKGl0ZW1zKVxuICB9O1xuXG4gIEhlYWRlcnMucHJvdG90eXBlLnZhbHVlcyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpdGVtcyA9IFtdO1xuICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgaXRlbXMucHVzaCh2YWx1ZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGl0ZXJhdG9yRm9yKGl0ZW1zKVxuICB9O1xuXG4gIEhlYWRlcnMucHJvdG90eXBlLmVudHJpZXMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaXRlbXMgPSBbXTtcbiAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcbiAgICAgIGl0ZW1zLnB1c2goW25hbWUsIHZhbHVlXSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGl0ZXJhdG9yRm9yKGl0ZW1zKVxuICB9O1xuXG4gIGlmIChzdXBwb3J0Lml0ZXJhYmxlKSB7XG4gICAgSGVhZGVycy5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXSA9IEhlYWRlcnMucHJvdG90eXBlLmVudHJpZXM7XG4gIH1cblxuICBmdW5jdGlvbiBjb25zdW1lZChib2R5KSB7XG4gICAgaWYgKGJvZHkuYm9keVVzZWQpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgVHlwZUVycm9yKCdBbHJlYWR5IHJlYWQnKSlcbiAgICB9XG4gICAgYm9keS5ib2R5VXNlZCA9IHRydWU7XG4gIH1cblxuICBmdW5jdGlvbiBmaWxlUmVhZGVyUmVhZHkocmVhZGVyKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXNvbHZlKHJlYWRlci5yZXN1bHQpO1xuICAgICAgfTtcbiAgICAgIHJlYWRlci5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlamVjdChyZWFkZXIuZXJyb3IpO1xuICAgICAgfTtcbiAgICB9KVxuICB9XG5cbiAgZnVuY3Rpb24gcmVhZEJsb2JBc0FycmF5QnVmZmVyKGJsb2IpIHtcbiAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICB2YXIgcHJvbWlzZSA9IGZpbGVSZWFkZXJSZWFkeShyZWFkZXIpO1xuICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihibG9iKTtcbiAgICByZXR1cm4gcHJvbWlzZVxuICB9XG5cbiAgZnVuY3Rpb24gcmVhZEJsb2JBc1RleHQoYmxvYikge1xuICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgIHZhciBwcm9taXNlID0gZmlsZVJlYWRlclJlYWR5KHJlYWRlcik7XG4gICAgcmVhZGVyLnJlYWRBc1RleHQoYmxvYik7XG4gICAgcmV0dXJuIHByb21pc2VcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlYWRBcnJheUJ1ZmZlckFzVGV4dChidWYpIHtcbiAgICB2YXIgdmlldyA9IG5ldyBVaW50OEFycmF5KGJ1Zik7XG4gICAgdmFyIGNoYXJzID0gbmV3IEFycmF5KHZpZXcubGVuZ3RoKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmlldy5sZW5ndGg7IGkrKykge1xuICAgICAgY2hhcnNbaV0gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHZpZXdbaV0pO1xuICAgIH1cbiAgICByZXR1cm4gY2hhcnMuam9pbignJylcbiAgfVxuXG4gIGZ1bmN0aW9uIGJ1ZmZlckNsb25lKGJ1Zikge1xuICAgIGlmIChidWYuc2xpY2UpIHtcbiAgICAgIHJldHVybiBidWYuc2xpY2UoMClcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHZpZXcgPSBuZXcgVWludDhBcnJheShidWYuYnl0ZUxlbmd0aCk7XG4gICAgICB2aWV3LnNldChuZXcgVWludDhBcnJheShidWYpKTtcbiAgICAgIHJldHVybiB2aWV3LmJ1ZmZlclxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIEJvZHkoKSB7XG4gICAgdGhpcy5ib2R5VXNlZCA9IGZhbHNlO1xuXG4gICAgdGhpcy5faW5pdEJvZHkgPSBmdW5jdGlvbihib2R5KSB7XG4gICAgICB0aGlzLl9ib2R5SW5pdCA9IGJvZHk7XG4gICAgICBpZiAoIWJvZHkpIHtcbiAgICAgICAgdGhpcy5fYm9keVRleHQgPSAnJztcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGJvZHkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRoaXMuX2JvZHlUZXh0ID0gYm9keTtcbiAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5ibG9iICYmIEJsb2IucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcbiAgICAgICAgdGhpcy5fYm9keUJsb2IgPSBib2R5O1xuICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LmZvcm1EYXRhICYmIEZvcm1EYXRhLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG4gICAgICAgIHRoaXMuX2JvZHlGb3JtRGF0YSA9IGJvZHk7XG4gICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuc2VhcmNoUGFyYW1zICYmIFVSTFNlYXJjaFBhcmFtcy5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSkge1xuICAgICAgICB0aGlzLl9ib2R5VGV4dCA9IGJvZHkudG9TdHJpbmcoKTtcbiAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5hcnJheUJ1ZmZlciAmJiBzdXBwb3J0LmJsb2IgJiYgaXNEYXRhVmlldyhib2R5KSkge1xuICAgICAgICB0aGlzLl9ib2R5QXJyYXlCdWZmZXIgPSBidWZmZXJDbG9uZShib2R5LmJ1ZmZlcik7XG4gICAgICAgIC8vIElFIDEwLTExIGNhbid0IGhhbmRsZSBhIERhdGFWaWV3IGJvZHkuXG4gICAgICAgIHRoaXMuX2JvZHlJbml0ID0gbmV3IEJsb2IoW3RoaXMuX2JvZHlBcnJheUJ1ZmZlcl0pO1xuICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LmFycmF5QnVmZmVyICYmIChBcnJheUJ1ZmZlci5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSB8fCBpc0FycmF5QnVmZmVyVmlldyhib2R5KSkpIHtcbiAgICAgICAgdGhpcy5fYm9keUFycmF5QnVmZmVyID0gYnVmZmVyQ2xvbmUoYm9keSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9ib2R5VGV4dCA9IGJvZHkgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYm9keSk7XG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy5oZWFkZXJzLmdldCgnY29udGVudC10eXBlJykpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBib2R5ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIHRoaXMuaGVhZGVycy5zZXQoJ2NvbnRlbnQtdHlwZScsICd0ZXh0L3BsYWluO2NoYXJzZXQ9VVRGLTgnKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5QmxvYiAmJiB0aGlzLl9ib2R5QmxvYi50eXBlKSB7XG4gICAgICAgICAgdGhpcy5oZWFkZXJzLnNldCgnY29udGVudC10eXBlJywgdGhpcy5fYm9keUJsb2IudHlwZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5zZWFyY2hQYXJhbXMgJiYgVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG4gICAgICAgICAgdGhpcy5oZWFkZXJzLnNldCgnY29udGVudC10eXBlJywgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PVVURi04Jyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKHN1cHBvcnQuYmxvYikge1xuICAgICAgdGhpcy5ibG9iID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciByZWplY3RlZCA9IGNvbnN1bWVkKHRoaXMpO1xuICAgICAgICBpZiAocmVqZWN0ZWQpIHtcbiAgICAgICAgICByZXR1cm4gcmVqZWN0ZWRcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9ib2R5QmxvYikge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5fYm9keUJsb2IpXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUFycmF5QnVmZmVyKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgQmxvYihbdGhpcy5fYm9keUFycmF5QnVmZmVyXSkpXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUZvcm1EYXRhKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZCBub3QgcmVhZCBGb3JtRGF0YSBib2R5IGFzIGJsb2InKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IEJsb2IoW3RoaXMuX2JvZHlUZXh0XSkpXG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHRoaXMuYXJyYXlCdWZmZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKHRoaXMuX2JvZHlBcnJheUJ1ZmZlcikge1xuICAgICAgICAgIHJldHVybiBjb25zdW1lZCh0aGlzKSB8fCBQcm9taXNlLnJlc29sdmUodGhpcy5fYm9keUFycmF5QnVmZmVyKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB0aGlzLmJsb2IoKS50aGVuKHJlYWRCbG9iQXNBcnJheUJ1ZmZlcilcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG5cbiAgICB0aGlzLnRleHQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciByZWplY3RlZCA9IGNvbnN1bWVkKHRoaXMpO1xuICAgICAgaWYgKHJlamVjdGVkKSB7XG4gICAgICAgIHJldHVybiByZWplY3RlZFxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5fYm9keUJsb2IpIHtcbiAgICAgICAgcmV0dXJuIHJlYWRCbG9iQXNUZXh0KHRoaXMuX2JvZHlCbG9iKVxuICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5QXJyYXlCdWZmZXIpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShyZWFkQXJyYXlCdWZmZXJBc1RleHQodGhpcy5fYm9keUFycmF5QnVmZmVyKSlcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUZvcm1EYXRhKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignY291bGQgbm90IHJlYWQgRm9ybURhdGEgYm9keSBhcyB0ZXh0JylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5fYm9keVRleHQpXG4gICAgICB9XG4gICAgfTtcblxuICAgIGlmIChzdXBwb3J0LmZvcm1EYXRhKSB7XG4gICAgICB0aGlzLmZvcm1EYXRhID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRleHQoKS50aGVuKGRlY29kZSlcbiAgICAgIH07XG4gICAgfVxuXG4gICAgdGhpcy5qc29uID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy50ZXh0KCkudGhlbihKU09OLnBhcnNlKVxuICAgIH07XG5cbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgLy8gSFRUUCBtZXRob2RzIHdob3NlIGNhcGl0YWxpemF0aW9uIHNob3VsZCBiZSBub3JtYWxpemVkXG4gIHZhciBtZXRob2RzID0gWydERUxFVEUnLCAnR0VUJywgJ0hFQUQnLCAnT1BUSU9OUycsICdQT1NUJywgJ1BVVCddO1xuXG4gIGZ1bmN0aW9uIG5vcm1hbGl6ZU1ldGhvZChtZXRob2QpIHtcbiAgICB2YXIgdXBjYXNlZCA9IG1ldGhvZC50b1VwcGVyQ2FzZSgpO1xuICAgIHJldHVybiBtZXRob2RzLmluZGV4T2YodXBjYXNlZCkgPiAtMSA/IHVwY2FzZWQgOiBtZXRob2RcbiAgfVxuXG4gIGZ1bmN0aW9uIFJlcXVlc3QoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICB2YXIgYm9keSA9IG9wdGlvbnMuYm9keTtcblxuICAgIGlmIChpbnB1dCBpbnN0YW5jZW9mIFJlcXVlc3QpIHtcbiAgICAgIGlmIChpbnB1dC5ib2R5VXNlZCkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBbHJlYWR5IHJlYWQnKVxuICAgICAgfVxuICAgICAgdGhpcy51cmwgPSBpbnB1dC51cmw7XG4gICAgICB0aGlzLmNyZWRlbnRpYWxzID0gaW5wdXQuY3JlZGVudGlhbHM7XG4gICAgICBpZiAoIW9wdGlvbnMuaGVhZGVycykge1xuICAgICAgICB0aGlzLmhlYWRlcnMgPSBuZXcgSGVhZGVycyhpbnB1dC5oZWFkZXJzKTtcbiAgICAgIH1cbiAgICAgIHRoaXMubWV0aG9kID0gaW5wdXQubWV0aG9kO1xuICAgICAgdGhpcy5tb2RlID0gaW5wdXQubW9kZTtcbiAgICAgIHRoaXMuc2lnbmFsID0gaW5wdXQuc2lnbmFsO1xuICAgICAgaWYgKCFib2R5ICYmIGlucHV0Ll9ib2R5SW5pdCAhPSBudWxsKSB7XG4gICAgICAgIGJvZHkgPSBpbnB1dC5fYm9keUluaXQ7XG4gICAgICAgIGlucHV0LmJvZHlVc2VkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy51cmwgPSBTdHJpbmcoaW5wdXQpO1xuICAgIH1cblxuICAgIHRoaXMuY3JlZGVudGlhbHMgPSBvcHRpb25zLmNyZWRlbnRpYWxzIHx8IHRoaXMuY3JlZGVudGlhbHMgfHwgJ3NhbWUtb3JpZ2luJztcbiAgICBpZiAob3B0aW9ucy5oZWFkZXJzIHx8ICF0aGlzLmhlYWRlcnMpIHtcbiAgICAgIHRoaXMuaGVhZGVycyA9IG5ldyBIZWFkZXJzKG9wdGlvbnMuaGVhZGVycyk7XG4gICAgfVxuICAgIHRoaXMubWV0aG9kID0gbm9ybWFsaXplTWV0aG9kKG9wdGlvbnMubWV0aG9kIHx8IHRoaXMubWV0aG9kIHx8ICdHRVQnKTtcbiAgICB0aGlzLm1vZGUgPSBvcHRpb25zLm1vZGUgfHwgdGhpcy5tb2RlIHx8IG51bGw7XG4gICAgdGhpcy5zaWduYWwgPSBvcHRpb25zLnNpZ25hbCB8fCB0aGlzLnNpZ25hbDtcbiAgICB0aGlzLnJlZmVycmVyID0gbnVsbDtcblxuICAgIGlmICgodGhpcy5tZXRob2QgPT09ICdHRVQnIHx8IHRoaXMubWV0aG9kID09PSAnSEVBRCcpICYmIGJvZHkpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0JvZHkgbm90IGFsbG93ZWQgZm9yIEdFVCBvciBIRUFEIHJlcXVlc3RzJylcbiAgICB9XG4gICAgdGhpcy5faW5pdEJvZHkoYm9keSk7XG4gIH1cblxuICBSZXF1ZXN0LnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgUmVxdWVzdCh0aGlzLCB7Ym9keTogdGhpcy5fYm9keUluaXR9KVxuICB9O1xuXG4gIGZ1bmN0aW9uIGRlY29kZShib2R5KSB7XG4gICAgdmFyIGZvcm0gPSBuZXcgRm9ybURhdGEoKTtcbiAgICBib2R5XG4gICAgICAudHJpbSgpXG4gICAgICAuc3BsaXQoJyYnKVxuICAgICAgLmZvckVhY2goZnVuY3Rpb24oYnl0ZXMpIHtcbiAgICAgICAgaWYgKGJ5dGVzKSB7XG4gICAgICAgICAgdmFyIHNwbGl0ID0gYnl0ZXMuc3BsaXQoJz0nKTtcbiAgICAgICAgICB2YXIgbmFtZSA9IHNwbGl0LnNoaWZ0KCkucmVwbGFjZSgvXFwrL2csICcgJyk7XG4gICAgICAgICAgdmFyIHZhbHVlID0gc3BsaXQuam9pbignPScpLnJlcGxhY2UoL1xcKy9nLCAnICcpO1xuICAgICAgICAgIGZvcm0uYXBwZW5kKGRlY29kZVVSSUNvbXBvbmVudChuYW1lKSwgZGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIHJldHVybiBmb3JtXG4gIH1cblxuICBmdW5jdGlvbiBwYXJzZUhlYWRlcnMocmF3SGVhZGVycykge1xuICAgIHZhciBoZWFkZXJzID0gbmV3IEhlYWRlcnMoKTtcbiAgICAvLyBSZXBsYWNlIGluc3RhbmNlcyBvZiBcXHJcXG4gYW5kIFxcbiBmb2xsb3dlZCBieSBhdCBsZWFzdCBvbmUgc3BhY2Ugb3IgaG9yaXpvbnRhbCB0YWIgd2l0aCBhIHNwYWNlXG4gICAgLy8gaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzcyMzAjc2VjdGlvbi0zLjJcbiAgICB2YXIgcHJlUHJvY2Vzc2VkSGVhZGVycyA9IHJhd0hlYWRlcnMucmVwbGFjZSgvXFxyP1xcbltcXHQgXSsvZywgJyAnKTtcbiAgICBwcmVQcm9jZXNzZWRIZWFkZXJzLnNwbGl0KC9cXHI/XFxuLykuZm9yRWFjaChmdW5jdGlvbihsaW5lKSB7XG4gICAgICB2YXIgcGFydHMgPSBsaW5lLnNwbGl0KCc6Jyk7XG4gICAgICB2YXIga2V5ID0gcGFydHMuc2hpZnQoKS50cmltKCk7XG4gICAgICBpZiAoa2V5KSB7XG4gICAgICAgIHZhciB2YWx1ZSA9IHBhcnRzLmpvaW4oJzonKS50cmltKCk7XG4gICAgICAgIGhlYWRlcnMuYXBwZW5kKGtleSwgdmFsdWUpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBoZWFkZXJzXG4gIH1cblxuICBCb2R5LmNhbGwoUmVxdWVzdC5wcm90b3R5cGUpO1xuXG4gIGZ1bmN0aW9uIFJlc3BvbnNlKGJvZHlJbml0LCBvcHRpb25zKSB7XG4gICAgaWYgKCFvcHRpb25zKSB7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuXG4gICAgdGhpcy50eXBlID0gJ2RlZmF1bHQnO1xuICAgIHRoaXMuc3RhdHVzID0gb3B0aW9ucy5zdGF0dXMgPT09IHVuZGVmaW5lZCA/IDIwMCA6IG9wdGlvbnMuc3RhdHVzO1xuICAgIHRoaXMub2sgPSB0aGlzLnN0YXR1cyA+PSAyMDAgJiYgdGhpcy5zdGF0dXMgPCAzMDA7XG4gICAgdGhpcy5zdGF0dXNUZXh0ID0gJ3N0YXR1c1RleHQnIGluIG9wdGlvbnMgPyBvcHRpb25zLnN0YXR1c1RleHQgOiAnT0snO1xuICAgIHRoaXMuaGVhZGVycyA9IG5ldyBIZWFkZXJzKG9wdGlvbnMuaGVhZGVycyk7XG4gICAgdGhpcy51cmwgPSBvcHRpb25zLnVybCB8fCAnJztcbiAgICB0aGlzLl9pbml0Qm9keShib2R5SW5pdCk7XG4gIH1cblxuICBCb2R5LmNhbGwoUmVzcG9uc2UucHJvdG90eXBlKTtcblxuICBSZXNwb25zZS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IFJlc3BvbnNlKHRoaXMuX2JvZHlJbml0LCB7XG4gICAgICBzdGF0dXM6IHRoaXMuc3RhdHVzLFxuICAgICAgc3RhdHVzVGV4dDogdGhpcy5zdGF0dXNUZXh0LFxuICAgICAgaGVhZGVyczogbmV3IEhlYWRlcnModGhpcy5oZWFkZXJzKSxcbiAgICAgIHVybDogdGhpcy51cmxcbiAgICB9KVxuICB9O1xuXG4gIFJlc3BvbnNlLmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHJlc3BvbnNlID0gbmV3IFJlc3BvbnNlKG51bGwsIHtzdGF0dXM6IDAsIHN0YXR1c1RleHQ6ICcnfSk7XG4gICAgcmVzcG9uc2UudHlwZSA9ICdlcnJvcic7XG4gICAgcmV0dXJuIHJlc3BvbnNlXG4gIH07XG5cbiAgdmFyIHJlZGlyZWN0U3RhdHVzZXMgPSBbMzAxLCAzMDIsIDMwMywgMzA3LCAzMDhdO1xuXG4gIFJlc3BvbnNlLnJlZGlyZWN0ID0gZnVuY3Rpb24odXJsLCBzdGF0dXMpIHtcbiAgICBpZiAocmVkaXJlY3RTdGF0dXNlcy5pbmRleE9mKHN0YXR1cykgPT09IC0xKSB7XG4gICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW52YWxpZCBzdGF0dXMgY29kZScpXG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBSZXNwb25zZShudWxsLCB7c3RhdHVzOiBzdGF0dXMsIGhlYWRlcnM6IHtsb2NhdGlvbjogdXJsfX0pXG4gIH07XG5cbiAgZXhwb3J0cy5ET01FeGNlcHRpb24gPSBzZWxmLkRPTUV4Y2VwdGlvbjtcbiAgdHJ5IHtcbiAgICBuZXcgZXhwb3J0cy5ET01FeGNlcHRpb24oKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgZXhwb3J0cy5ET01FeGNlcHRpb24gPSBmdW5jdGlvbihtZXNzYWdlLCBuYW1lKSB7XG4gICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgIHZhciBlcnJvciA9IEVycm9yKG1lc3NhZ2UpO1xuICAgICAgdGhpcy5zdGFjayA9IGVycm9yLnN0YWNrO1xuICAgIH07XG4gICAgZXhwb3J0cy5ET01FeGNlcHRpb24ucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpO1xuICAgIGV4cG9ydHMuRE9NRXhjZXB0aW9uLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGV4cG9ydHMuRE9NRXhjZXB0aW9uO1xuICB9XG5cbiAgZnVuY3Rpb24gZmV0Y2goaW5wdXQsIGluaXQpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KGlucHV0LCBpbml0KTtcblxuICAgICAgaWYgKHJlcXVlc3Quc2lnbmFsICYmIHJlcXVlc3Quc2lnbmFsLmFib3J0ZWQpIHtcbiAgICAgICAgcmV0dXJuIHJlamVjdChuZXcgZXhwb3J0cy5ET01FeGNlcHRpb24oJ0Fib3J0ZWQnLCAnQWJvcnRFcnJvcicpKVxuICAgICAgfVxuXG4gICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICAgIGZ1bmN0aW9uIGFib3J0WGhyKCkge1xuICAgICAgICB4aHIuYWJvcnQoKTtcbiAgICAgIH1cblxuICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgICBzdGF0dXM6IHhoci5zdGF0dXMsXG4gICAgICAgICAgc3RhdHVzVGV4dDogeGhyLnN0YXR1c1RleHQsXG4gICAgICAgICAgaGVhZGVyczogcGFyc2VIZWFkZXJzKHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSB8fCAnJylcbiAgICAgICAgfTtcbiAgICAgICAgb3B0aW9ucy51cmwgPSAncmVzcG9uc2VVUkwnIGluIHhociA/IHhoci5yZXNwb25zZVVSTCA6IG9wdGlvbnMuaGVhZGVycy5nZXQoJ1gtUmVxdWVzdC1VUkwnKTtcbiAgICAgICAgdmFyIGJvZHkgPSAncmVzcG9uc2UnIGluIHhociA/IHhoci5yZXNwb25zZSA6IHhoci5yZXNwb25zZVRleHQ7XG4gICAgICAgIHJlc29sdmUobmV3IFJlc3BvbnNlKGJvZHksIG9wdGlvbnMpKTtcbiAgICAgIH07XG5cbiAgICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlamVjdChuZXcgVHlwZUVycm9yKCdOZXR3b3JrIHJlcXVlc3QgZmFpbGVkJykpO1xuICAgICAgfTtcblxuICAgICAgeGhyLm9udGltZW91dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZWplY3QobmV3IFR5cGVFcnJvcignTmV0d29yayByZXF1ZXN0IGZhaWxlZCcpKTtcbiAgICAgIH07XG5cbiAgICAgIHhoci5vbmFib3J0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlamVjdChuZXcgZXhwb3J0cy5ET01FeGNlcHRpb24oJ0Fib3J0ZWQnLCAnQWJvcnRFcnJvcicpKTtcbiAgICAgIH07XG5cbiAgICAgIHhoci5vcGVuKHJlcXVlc3QubWV0aG9kLCByZXF1ZXN0LnVybCwgdHJ1ZSk7XG5cbiAgICAgIGlmIChyZXF1ZXN0LmNyZWRlbnRpYWxzID09PSAnaW5jbHVkZScpIHtcbiAgICAgICAgeGhyLndpdGhDcmVkZW50aWFscyA9IHRydWU7XG4gICAgICB9IGVsc2UgaWYgKHJlcXVlc3QuY3JlZGVudGlhbHMgPT09ICdvbWl0Jykge1xuICAgICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIGlmICgncmVzcG9uc2VUeXBlJyBpbiB4aHIgJiYgc3VwcG9ydC5ibG9iKSB7XG4gICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYmxvYic7XG4gICAgICB9XG5cbiAgICAgIHJlcXVlc3QuaGVhZGVycy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7XG4gICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKG5hbWUsIHZhbHVlKTtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAocmVxdWVzdC5zaWduYWwpIHtcbiAgICAgICAgcmVxdWVzdC5zaWduYWwuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBhYm9ydFhocik7XG5cbiAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIC8vIERPTkUgKHN1Y2Nlc3Mgb3IgZmFpbHVyZSlcbiAgICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgPT09IDQpIHtcbiAgICAgICAgICAgIHJlcXVlc3Quc2lnbmFsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgYWJvcnRYaHIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgeGhyLnNlbmQodHlwZW9mIHJlcXVlc3QuX2JvZHlJbml0ID09PSAndW5kZWZpbmVkJyA/IG51bGwgOiByZXF1ZXN0Ll9ib2R5SW5pdCk7XG4gICAgfSlcbiAgfVxuXG4gIGZldGNoLnBvbHlmaWxsID0gdHJ1ZTtcblxuICBpZiAoIXNlbGYuZmV0Y2gpIHtcbiAgICBzZWxmLmZldGNoID0gZmV0Y2g7XG4gICAgc2VsZi5IZWFkZXJzID0gSGVhZGVycztcbiAgICBzZWxmLlJlcXVlc3QgPSBSZXF1ZXN0O1xuICAgIHNlbGYuUmVzcG9uc2UgPSBSZXNwb25zZTtcbiAgfVxuXG4gIGV4cG9ydHMuSGVhZGVycyA9IEhlYWRlcnM7XG4gIGV4cG9ydHMuUmVxdWVzdCA9IFJlcXVlc3Q7XG4gIGV4cG9ydHMuUmVzcG9uc2UgPSBSZXNwb25zZTtcbiAgZXhwb3J0cy5mZXRjaCA9IGZldGNoO1xuXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5cbn0pKSk7XG4iLCJpbXBvcnQgTW9iaWxlU2VydmVyQnJpZGdlQmFzZSBmcm9tICcuLi8uLi8uLi9zaGFyZWQvanMvY2xhc3Nlcy9Nb2JpbGVTZXJ2ZXJCcmlkZ2UnO1xuaW1wb3J0IHtDb25zdGFudHN9IGZyb20gJy4uLy4uLy4uL3NoYXJlZC9qcy9Db25zdGFudHMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb2JpbGVTZXJ2ZXJCcmlkZ2UgZXh0ZW5kcyBNb2JpbGVTZXJ2ZXJCcmlkZ2VCYXNle1xuXG4gIGNvbnN0cnVjdG9yKHByZXNlbnRhdGlvbiwgc2V0dGluZ3MpIHtcbiAgICBzdXBlcihwcmVzZW50YXRpb24sIHNldHRpbmdzKTtcbiAgICBiZWFuLm9uKHRoaXMucHJlc2VudGF0aW9uLCBDb25zdGFudHMuU0VUX0NVUlJFTlRfU0xJREVfSU5ERVgsIHRoaXMuY3VycmVudFNsaWRlSW5kZXhDaGFuZ2VkLmJpbmQodGhpcykpO1xuICB9XG5cbiAgc29ja2V0Q29ubmVjdEhhbmRsZXIoKSB7XG4gICAgc3VwZXIuc29ja2V0Q29ubmVjdEhhbmRsZXIoKTtcbiAgICB0aGlzLnRyeVRvU2VuZChDb25zdGFudHMuTUVTU0FHRSwge1xuICAgICAgdGFyZ2V0OiB7XG4gICAgICAgIGNsaWVudDogYG1vYmlsZWAsXG4gICAgICB9LFxuICAgICAgY29udGVudDoge1xuICAgICAgICBhY3Rpb246IENvbnN0YW50cy5TRVRfQ1VSUkVOVF9TTElERV9JTkRFWCxcbiAgICAgICAgY3VycmVudFNsaWRlSW5kZXg6IHRoaXMucHJlc2VudGF0aW9uLmN1cnJlbnRTbGlkZUluZGV4XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBjdXJyZW50U2xpZGVJbmRleENoYW5nZWQoY3VycmVudFNsaWRlSW5kZXgpIHtcbiAgICB0aGlzLnRyeVRvU2VuZChDb25zdGFudHMuTUVTU0FHRSwge1xuICAgICAgdGFyZ2V0OiB7XG4gICAgICAgIGNsaWVudDogYG1vYmlsZWAsXG4gICAgICB9LFxuICAgICAgY29udGVudDoge1xuICAgICAgICBhY3Rpb246IENvbnN0YW50cy5TRVRfQ1VSUkVOVF9TTElERV9JTkRFWCxcbiAgICAgICAgY3VycmVudFNsaWRlSW5kZXg6IGN1cnJlbnRTbGlkZUluZGV4XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxufVxuIiwiY29uc3QgY2hpbGRQcm9jZXNzID0gcmVxdWlyZU5vZGUoYGNoaWxkX3Byb2Nlc3NgKTtcbmNvbnN0IEV2ZW50RW1pdHRlciA9IHJlcXVpcmVOb2RlKGBldmVudHNgKS5FdmVudEVtaXR0ZXI7XG5jb25zdCBwYXRoID0gcmVxdWlyZU5vZGUoYHBhdGhgKTtcblxuY29uc3QgcGxhdGZvcm0gPSByZXF1aXJlTm9kZShgZWxlY3Ryb25gKS5yZW1vdGUucHJvY2Vzcy5wbGF0Zm9ybTtcbmNvbnN0IGlzV2luID0gL153aW4vLnRlc3QocGxhdGZvcm0pO1xuXG4vL2tpbGwgZW50aXJlIHByb2Nlc3MgdHJlZVxuLy9odHRwOi8va3Jhc2ltaXJ0c29uZXYuY29tL2Jsb2cvYXJ0aWNsZS9Ob2RlanMtbWFuYWdpbmctY2hpbGQtcHJvY2Vzc2VzLXN0YXJ0aW5nLXN0b3BwaW5nLWV4ZWMtc3Bhd25cbmNvbnN0IGtpbGwgPSAocGlkLCBzaWduYWwpID0+IHtcbiAgc2lnbmFsID0gc2lnbmFsIHx8IGBTSUdLSUxMYDtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgIGlmKCFpc1dpbikge1xuICAgICAgY29uc3QgcHNUcmVlID0gcmVxdWlyZU5vZGUoYHBzLXRyZWVgKTtcbiAgICAgIGNvbnN0IGtpbGxUcmVlID0gdHJ1ZTtcbiAgICAgIGlmKGtpbGxUcmVlKSB7XG4gICAgICAgIHBzVHJlZShwaWQsIChlcnIsIGNoaWxkcmVuKSA9PiB7XG4gICAgICAgICAgW3BpZF0uY29uY2F0KGNoaWxkcmVuLm1hcChwID0+IHAuUElEKSkuZm9yRWFjaCh0cGlkID0+IHtcbiAgICAgICAgICAgIHRyeSB7IHByb2Nlc3Mua2lsbCh0cGlkLCBzaWduYWwpOyB9XG4gICAgICAgICAgICBjYXRjaCAoZXgpIHsgY29uc29sZS5lcnJvcihleCk7IH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0cnkgeyBwcm9jZXNzLmtpbGwocGlkLCBzaWduYWwpOyB9XG4gICAgICAgIGNhdGNoIChleCkgeyBjb25zb2xlLmVycm9yKGV4KTsgfVxuICAgICAgfVxuICAgICAgcmVzb2x2ZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjaGlsZFByb2Nlc3MuZXhlYyhgdGFza2tpbGwgL1BJRCAkeyAgcGlkICB9IC9UIC9GYCwgKCkgPT4ge1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTm9kZUFwcFJ1bm5lciBleHRlbmRzIEV2ZW50RW1pdHRlciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gIH1cbiAgcnVuKGFwcGxpY2F0aW9uUGF0aCkge1xuICAgIHJldHVybiB0aGlzLnN0b3AoKVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgIHRoaXMuY3dkID0gcGF0aC5kaXJuYW1lKGFwcGxpY2F0aW9uUGF0aCk7XG4gICAgICB0aGlzLm51bURhdGFFdmVudHNSZWNlaXZlZCA9IDA7XG4gICAgICB0aGlzLmlnbm9yZUZpcnN0RXZlbnRzQW1vdW50ID0gMDtcbiAgICAgIGlmKGlzV2luKSB7XG4gICAgICAgIHRoaXMuaWdub3JlRmlyc3RFdmVudHNBbW91bnQgPSAyO1xuICAgICAgICB0aGlzLnJ1bm5lciA9IGNoaWxkUHJvY2Vzcy5zcGF3bihgY21kYCwgW2Budm13YCwgYHVzZWAsIGBpb2pzLXYyLjMuMWBdLCB7Y3dkOiB0aGlzLmN3ZH0pO1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICB0aGlzLnJ1bm5lci5zdGRpbi53cml0ZShgbm9kZSAkeyAgYXBwbGljYXRpb25QYXRoICB9XFxuYCk7XG4gICAgICAgIH0sIDUwMCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZyhgbm9kZSAkeyAgYXBwbGljYXRpb25QYXRofWApO1xuICAgICAgICB0aGlzLnJ1bm5lciA9IGNoaWxkUHJvY2Vzcy5zcGF3bihgbm9kZWAsIFthcHBsaWNhdGlvblBhdGhdLCB7Y3dkOiB0aGlzLmN3ZH0pO1xuICAgICAgfVxuICAgICAgdGhpcy5ydW5uZXIuc3Rkb3V0Lm9uKGBkYXRhYCwgZGF0YSA9PiB0aGlzLm9uUnVubmVyRGF0YShkYXRhKSk7XG4gICAgICB0aGlzLnJ1bm5lci5zdGRlcnIub24oYGRhdGFgLCBlcnJvciA9PiB0aGlzLm9uUnVubmVyRXJyb3IoZXJyb3IpKTtcbiAgICAgIHRoaXMucnVubmVyLm9uKGBkaXNjb25uZWN0YCwgKCkgPT4gdGhpcy5vbkRpc2Nvbm5lY3QoKSk7XG4gICAgICB0aGlzLnJ1bm5lci5vbihgY2xvc2VgLCAoKSA9PiB0aGlzLm9uQ2xvc2UoKSk7XG4gICAgICB0aGlzLnJ1bm5lci5vbihgZXhpdGAsICgpID0+IHRoaXMub25FeGl0KCkpO1xuICAgIH0pO1xuICB9XG4gIG9uUnVubmVyRGF0YShkYXRhKSB7XG4gICAgdGhpcy5udW1EYXRhRXZlbnRzUmVjZWl2ZWQrKztcbiAgICBpZih0aGlzLm51bURhdGFFdmVudHNSZWNlaXZlZCA8PSB0aGlzLmlnbm9yZUZpcnN0RXZlbnRzQW1vdW50KSB7XG4gICAgICAvL2lnbm9yZSB0aGUgZmlyc3QgeC1tZXNzYWdlc1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkYXRhID0gZGF0YS50b1N0cmluZygpLnRyaW0oKTtcbiAgICBpZihkYXRhLmluZGV4T2YodGhpcy5jd2QpID09PSAwKSB7XG4gICAgICBkYXRhID0gZGF0YS5zdWJzdHIodGhpcy5jd2QubGVuZ3RoKTtcbiAgICAgIGlmKGRhdGEubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5lbWl0KGBzdGRvdXQtZGF0YWAsIGRhdGEpO1xuICB9XG5cbiAgb25SdW5uZXJFcnJvcihlcnJvcikge1xuICAgIHRoaXMuZW1pdChgc3RkZXJyLWRhdGFgLCBlcnJvci50b1N0cmluZygpLnRyaW0oKSk7XG4gIH1cblxuICBvbkRpc2Nvbm5lY3QoKSB7XG4gICAgY29uc29sZS5sb2coYFtDaGlsZEFwcF0gcnVubmVyIGRpc2Nvbm5lY3RlZGApO1xuICAgIHRoaXMucnVubmVyID0gZmFsc2U7XG4gIH1cblxuICBvbkNsb3NlKCkge1xuICAgIGNvbnNvbGUubG9nKGBbQ2hpbGRBcHBdIHJ1bm5lciBjbG9zZWRgKTtcbiAgICB0aGlzLnJ1bm5lciA9IGZhbHNlO1xuICB9XG5cbiAgb25FeGl0KCkge1xuICAgIGNvbnNvbGUubG9nKGBbQ2hpbGRBcHBdIHJ1bm5lciBleGl0ZWRgKTtcbiAgICB0aGlzLnJ1bm5lciA9IGZhbHNlO1xuICB9XG5cbiAgc3RvcCgpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBpZighdGhpcy5ydW5uZXIpIHtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfVxuICAgICAgdGhpcy5ydW5uZXIuc3Rkb3V0LnJlbW92ZUFsbExpc3RlbmVycygpO1xuICAgICAgdGhpcy5ydW5uZXIuc3RkZXJyLnJlbW92ZUFsbExpc3RlbmVycygpO1xuICAgICAgdGhpcy5ydW5uZXIuc3RkaW4uZW5kKCk7XG4gICAgICAvL2xpc3RlbiBmb3IgcnVubmVyIGV2ZW50cyBhbmQgcmVzb2x2ZSBvbiB0aGUgb25lIHRoYXQgb2NjdXJzXG4gICAgICAvLyBjb25zdCBjYkNhbGxlZCA9IGZhbHNlO1xuICAgICAgLy8gdGhpcy5ydW5uZXIub24oJ2Rpc2Nvbm5lY3QnLCAoKSA9PiB7XG4gICAgICAvLyAgIGNvbnNvbGUubG9nKCdkaXNjb25uZWN0Jyk7XG4gICAgICAvLyAgIGlmKCFjYkNhbGxlZCkge1xuICAgICAgLy8gICAgIHJlc29sdmUoKTtcbiAgICAgIC8vICAgfVxuICAgICAgLy8gfSk7XG4gICAgICAvLyB0aGlzLnJ1bm5lci5vbignY2xvc2UnLCAoKSA9PiB7XG4gICAgICAvLyAgIGNvbnNvbGUubG9nKCdjbG9zZScpO1xuICAgICAgLy8gICBpZighY2JDYWxsZWQpIHtcbiAgICAgIC8vICAgICByZXNvbHZlKCk7XG4gICAgICAvLyAgIH1cbiAgICAgIC8vIH0pO1xuICAgICAgLy8gdGhpcy5ydW5uZXIub24oJ2V4aXQnLCAoKSA9PiB7XG4gICAgICAvLyAgIGNvbnNvbGUubG9nKCdleGl0Jyk7XG4gICAgICAvLyAgIGlmKCFjYkNhbGxlZCkge1xuICAgICAgLy8gICAgIHJlc29sdmUoKTtcbiAgICAgIC8vICAgfVxuICAgICAgLy8gfSk7XG4gICAgICBraWxsKHRoaXMucnVubmVyLnBpZCkudGhlbigoKSA9PiB7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5ydW5uZXIgPSBmYWxzZTtcbiAgICB9KTtcbiAgfVxuICBkZXN0cm95KCkge1xuICAgIHJldHVybiB0aGlzLnN0b3AoKVxuICAgIC50aGVuKCgpID0+IHtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IHtDb25zdGFudHN9IGZyb20gJy4uLy4uLy4uL3NoYXJlZC9qcy9Db25zdGFudHMnO1xuaW1wb3J0IFByZXNlbnRhdGlvbkJhc2UgZnJvbSAnLi4vLi4vLi4vc2hhcmVkL2pzL2NsYXNzZXMvUHJlc2VudGF0aW9uJztcbmltcG9ydCBTbGlkZUJyaWRnZSBmcm9tICcuL1NsaWRlQnJpZGdlJztcbmltcG9ydCBNb2JpbGVTZXJ2ZXJCcmlkZ2UgZnJvbSAnLi9Nb2JpbGVTZXJ2ZXJCcmlkZ2UnO1xuXG5jb25zdCBwYXRoID0gcmVxdWlyZU5vZGUoYHBhdGhgKTtcblxuY29uc3QgS0VZQ09ERV9MRUZUID0gMzc7XG5jb25zdCBLRVlDT0RFX1JJR0hUID0gMzk7XG5jb25zdCBLRVlDT0RFX1NQQUNFID0gMzI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFByZXNlbnRhdGlvbiBleHRlbmRzIFByZXNlbnRhdGlvbkJhc2Uge1xuICBjb25zdHJ1Y3RvcihkYXRhLCByb2xlLCBzZXR0aW5ncykge1xuICAgIHN1cGVyKGRhdGEsIHJvbGUsIHNldHRpbmdzKTtcblxuICAgIHdpbmRvdy5vbmJlZm9yZXVubG9hZCA9IGV2ZW50ID0+IHRoaXMuY2xvc2VIYW5kbGVyKGV2ZW50KTtcbiAgICAkKHdpbmRvdykub24oYGtleWRvd25gLCBldmVudCA9PiB0aGlzLmtleWRvd25IYW5kbGVyKGV2ZW50KSk7XG4gICAgYmVhbi5vbih0aGlzLCBDb25zdGFudHMuU0VUX0NVUlJFTlRfU0xJREVfSU5ERVgsIHRoaXMuY3VycmVudFNsaWRlSW5kZXhDaGFuZ2VkSGFuZGxlci5iaW5kKHRoaXMpKTtcblxuICAgICQoYGJvZHlgKS5vbihDb25zdGFudHMuR09fVE9fUFJFVklPVVNfU0xJREUsIHRoaXMuZ29Ub1ByZXZpb3VzU2xpZGUuYmluZCh0aGlzKSk7XG4gICAgJChgYm9keWApLm9uKENvbnN0YW50cy5HT19UT19ORVhUX1NMSURFLCB0aGlzLmdvVG9OZXh0U2xpZGUuYmluZCh0aGlzKSk7XG4gICAgJChgYm9keWApLm9uKENvbnN0YW50cy5PUEVOX0NPTU1BTkRfTElORSwgdGhpcy5vcGVuQ29tbWFuZExpbmUuYmluZCh0aGlzKSk7XG4gICAgJChgYm9keWApLm9uKENvbnN0YW50cy5PUEVOX0NBTUVSQSwgdGhpcy5vcGVuQ2FtZXJhLmJpbmQodGhpcykpO1xuICB9XG5cbiAgY2xvc2VIYW5kbGVyKGV2ZW50KSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgfVxuXG4gIGN1cnJlbnRTbGlkZUluZGV4Q2hhbmdlZEhhbmRsZXIoc2xpZGVJbmRleCkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG4gIH1cblxuICBjcmVhdGVNb2JpbGVTZXJ2ZXJCcmlkZ2UoKSB7XG4gICAgcmV0dXJuIG5ldyBNb2JpbGVTZXJ2ZXJCcmlkZ2UodGhpcywgdGhpcy5zZXR0aW5ncyk7XG4gIH1cblxuICB0b2dnbGVFbGV2YXRvck11c2ljKCkge1xuICAgIHRoaXMuZWxldmF0b3JNdXNpY1BsYXlpbmcgPSAhdGhpcy5lbGV2YXRvck11c2ljUGxheWluZztcbiAgICBpZih0aGlzLmVsZXZhdG9yTXVzaWNQbGF5aW5nKSB7XG4gICAgICB0aGlzLmVsZXZhdG9yTXVzaWMucGxheSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVsZXZhdG9yTXVzaWMucGF1c2UoKTtcbiAgICB9XG4gIH1cblxuICAvL3ByZXBlbmQgdXJscyB3aXRoIGZpbGU6Ly8vIChmYXN0ZXI/KVxuICBwcm9jZXNzU2xpZGVTcmMoc3JjKSB7XG4gICAgc3JjID0gYGZpbGU6Ly8vJHsgIHBhdGgucmVzb2x2ZSh0aGlzLnNldHRpbmdzLnByZXNlbnRhdGlvblBhdGgsIHNyYyl9YDtcbiAgICBzcmMgPSBzcmMucmVwbGFjZSgvXFxcXC9nLCBgL2ApO1xuICAgIHJldHVybiBzcmM7XG4gIH1cblxuICBjcmVhdGVTbGlkZUJyaWRnZXMoZGF0YSkge1xuICAgIFByZXNlbnRhdGlvbkJhc2UucHJvdG90eXBlLmNyZWF0ZVNsaWRlQnJpZGdlcy5jYWxsKHRoaXMsIGRhdGEpO1xuICAgIGNvbnN0IHRoYXQgPSB0aGlzO1xuICAgIGNvbnN0ICRzbGlkZU1lbnUgPSAkKGAjc2xpZGVNZW51YCk7XG4gICAgY29uc3QgbnVtU2xpZGVCcmlkZ2VzID0gdGhpcy5zbGlkZUJyaWRnZXMubGVuZ3RoO1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPCBudW1TbGlkZUJyaWRnZXM7IGkrKykge1xuICAgICAgY29uc3Qgc2xpZGVCcmlkZ2UgPSB0aGlzLnNsaWRlQnJpZGdlc1tpXTtcbiAgICAgICRzbGlkZU1lbnUuYXBwZW5kKGA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBkYXRhLXNsaWRlbnI9XCIkeyAgaSAgfVwiIGNsYXNzPVwiZHJvcGRvd24taXRlbVwiPiR7ICBpICsgMSAgfSAkeyAgc2xpZGVCcmlkZ2UubmFtZSAgfTwvYnV0dG9uPmApO1xuICAgIH1cbiAgICAkc2xpZGVNZW51LmZpbmQoYGJ1dHRvbmApLm9uKGBjbGlja2AsIGZ1bmN0aW9uKGV2ZW50KXtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGF0LnNldEN1cnJlbnRTbGlkZUluZGV4KHBhcnNlSW50KCQodGhpcykuZGF0YShgc2xpZGVucmApKSk7XG4gICAgfSk7XG4gIH1cblxuICBjcmVhdGVTbGlkZUJyaWRnZShzbGlkZSkge1xuICAgIC8vdXNlIG91ciBvd24gYnJpZGdlIHdoaWNoIGRvZXNuJ3QgdXNlIGZldGNoXG4gICAgcmV0dXJuIG5ldyBTbGlkZUJyaWRnZShzbGlkZSk7XG4gIH1cblxuICBzbGlkZU1lc3NhZ2VIYW5kbGVyKGV2ZW50KSB7XG4gICAgUHJlc2VudGF0aW9uQmFzZS5wcm90b3R5cGUuc2xpZGVNZXNzYWdlSGFuZGxlci5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgICBpZighZXZlbnQuZGF0YSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzd2l0Y2goZXZlbnQuZGF0YS5hY3Rpb24pIHtcbiAgICBjYXNlIENvbnN0YW50cy5HT19UT19QUkVWSU9VU19TTElERTpcbiAgICAgIHRoaXMuZ29Ub1ByZXZpb3VzU2xpZGUoKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgQ29uc3RhbnRzLkdPX1RPX05FWFRfU0xJREU6XG4gICAgICB0aGlzLmdvVG9OZXh0U2xpZGUoKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgQ29uc3RhbnRzLk9QRU5fQ09NTUFORF9MSU5FOlxuICAgICAgdGhpcy5vcGVuQ29tbWFuZExpbmUoKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgQ29uc3RhbnRzLk9QRU5fQ0FNRVJBOlxuICAgICAgdGhpcy5vcGVuQ2FtZXJhKCk7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBrZXlkb3duSGFuZGxlcihldmVudCkge1xuICAgIC8vb25lIGZyYW1lIGRlbGF5XG4gICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG4gICAgICBpZihldmVudC5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHN3aXRjaChldmVudC5rZXlDb2RlKSB7XG4gICAgICBjYXNlIEtFWUNPREVfTEVGVDpcbiAgICAgICAgdGhpcy5nb1RvUHJldmlvdXNTbGlkZSgpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgS0VZQ09ERV9SSUdIVDpcbiAgICAgICAgdGhpcy5nb1RvTmV4dFNsaWRlKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBLRVlDT0RFX1NQQUNFOlxuICAgICAgICAkKGAjcHJlc2VudGF0aW9uLWNvbnRyb2xzYCkudG9nZ2xlKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgY2hpbGRBcHBEYXRhSGFuZGxlcihkYXRhKSB7XG4gICAgY29uc3QgY3VycmVudFNsaWRlQnJpZGdlID0gdGhpcy5nZXRTbGlkZUJyaWRnZUJ5SW5kZXgodGhpcy5jdXJyZW50U2xpZGVJbmRleCk7XG4gICAgaWYoY3VycmVudFNsaWRlQnJpZGdlKSB7XG4gICAgICBjdXJyZW50U2xpZGVCcmlkZ2UudHJ5VG9Qb3N0TWVzc2FnZSh7XG4gICAgICAgIGFjdGlvbjogQ29uc3RhbnRzLkNISUxEX0FQUF9TVERPVVRfREFUQSxcbiAgICAgICAgZGF0YTogZGF0YVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgY2hpbGRBcHBFcnJvckhhbmRsZXIoZGF0YSkge1xuICAgIGNvbnN0IGN1cnJlbnRTbGlkZUJyaWRnZSA9IHRoaXMuZ2V0U2xpZGVCcmlkZ2VCeUluZGV4KHRoaXMuY3VycmVudFNsaWRlSW5kZXgpO1xuICAgIGlmKGN1cnJlbnRTbGlkZUJyaWRnZSkge1xuICAgICAgY3VycmVudFNsaWRlQnJpZGdlLnRyeVRvUG9zdE1lc3NhZ2Uoe1xuICAgICAgICBhY3Rpb246IENvbnN0YW50cy5DSElMRF9BUFBfU1RERVJSX0RBVEEsXG4gICAgICAgIGRhdGE6IGRhdGFcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIG9wZW5Db21tYW5kTGluZSgpIHtcbiAgICAkKGAjY29uc29sZU1vZGFsYCkubW9kYWwoYHNob3dgKTtcbiAgfVxuXG4gIG9wZW5DYW1lcmEoKSB7XG4gICAgJChgI3dlYmNhbU1vZGFsYCkubW9kYWwoYHNob3dgKTtcbiAgfVxuXG4gIGhhbmRsZU1vYmlsZVNlcnZlck1lc3NhZ2UobWVzc2FnZSkge1xuICAgIGlmKG1lc3NhZ2UuY29udGVudCkge1xuICAgICAgaWYobWVzc2FnZS5jb250ZW50LmFjdGlvbiA9PT0gYGdvVG9OZXh0U2xpZGVgKSB7XG4gICAgICAgIHRoaXMuZ29Ub05leHRTbGlkZSgpO1xuICAgICAgfSBlbHNlIGlmKG1lc3NhZ2UuY29udGVudC5hY3Rpb24gPT09IGBnb1RvUHJldmlvdXNTbGlkZWApIHtcbiAgICAgICAgdGhpcy5nb1RvUHJldmlvdXNTbGlkZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IFNsaWRlQnJpZGdlQmFzZSBmcm9tICcuLi8uLi8uLi9zaGFyZWQvanMvY2xhc3Nlcy9TbGlkZUJyaWRnZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNsaWRlQnJpZGdlIGV4dGVuZHMgU2xpZGVCcmlkZ2VCYXNlIHtcblxuICBhdHRhY2hUb1NsaWRlSG9sZGVyKHNsaWRlSG9sZGVyLCBzcmMsIGNiKSB7XG4gICAgLy8gY29uc29sZS5sb2coJ2F0dGFjaFRvU2xpZGVIb2xkZXInLCBzcmMpO1xuICAgIC8vIGNvbnNvbGUubG9nKHNsaWRlSG9sZGVyKTtcbiAgICB0aGlzLnNsaWRlSG9sZGVyID0gc2xpZGVIb2xkZXI7XG4gICAgLy9ub3RpZnkgdGhlIGNvbnRlbnQgaXQgaXMgYmVpbmcgY2xlYXJlZFxuICAgIHRoaXMudHJ5VG9Qb3N0TWVzc2FnZSh7YWN0aW9uOiBgZGVzdHJveWB9KTtcbiAgICAvL2NsZWFyIHRoZSBjdXJyZW50IGNvbnRlbnRcbiAgICB0aGlzLnNsaWRlSG9sZGVyLmlubmVySFRNTCA9IGBgO1xuICAgICQoc2xpZGVIb2xkZXIpLmF0dHIoYGRhdGEtbmFtZWAsIHRoaXMubmFtZSk7XG4gICAgJChzbGlkZUhvbGRlcikuYWRkQ2xhc3MoYGxvYWRpbmdgKTtcblxuICAgICQoc2xpZGVIb2xkZXIpLm9mZihgbG9hZGApO1xuICAgICQoc2xpZGVIb2xkZXIpLm9uKGBsb2FkYCwgKCkgPT4ge1xuICAgICAgdGhpcy50cnlUb1Bvc3RNZXNzYWdlKHtcbiAgICAgICAgYWN0aW9uOiBgc2V0U3RhdGVgLFxuICAgICAgICBzdGF0ZTogdGhpcy5zdGF0ZVxuICAgICAgfSk7XG4gICAgICAkKHNsaWRlSG9sZGVyKS5vZmYoYGxvYWRgKTtcbiAgICB9KTtcblxuICAgIGlmIChzcmMgIT09ICQoc2xpZGVIb2xkZXIpLmF0dHIoYGRhdGEtc3JjYCkpIHtcbiAgICAgIC8vY3JlYXRlIGh0bWwgaW1wb3J0XG4gICAgICBjb25zdCAkaW1wb3J0RWwgPSAkKGA8bGluayByZWw9XCJpbXBvcnRcIj5gKTtcbiAgICAgIGNvbnN0IGltcG9ydEVsID0gJGltcG9ydEVsWzBdO1xuICAgICAgJGltcG9ydEVsLm9uKGBsb2FkYCwgKCkgPT4ge1xuICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IGltcG9ydEVsLmltcG9ydC5xdWVyeVNlbGVjdG9yKGB0ZW1wbGF0ZWApO1xuICAgICAgICBpZih0ZW1wbGF0ZSkge1xuICAgICAgICAgIGNvbnN0IGNsb25lID0gZG9jdW1lbnQuaW1wb3J0Tm9kZSh0ZW1wbGF0ZS5jb250ZW50LCB0cnVlKTtcbiAgICAgICAgICB0aGlzLnNsaWRlSG9sZGVyLmFwcGVuZENoaWxkKGNsb25lKTtcbiAgICAgICAgfVxuICAgICAgICAkaW1wb3J0RWwucmVtb3ZlKCk7XG4gICAgICAgICQoc2xpZGVIb2xkZXIpLnJlbW92ZUNsYXNzKGBsb2FkaW5nYCk7XG4gICAgICAgIGNiKCk7XG4gICAgICB9KTtcbiAgICAgICRpbXBvcnRFbC5hdHRyKGBocmVmYCwgc3JjKTtcbiAgICAgICQoc2xpZGVIb2xkZXIpLmF0dHIoYGRhdGEtc3JjYCwgc3JjKTtcbiAgICAgICQoc2xpZGVIb2xkZXIpLmh0bWwoJGltcG9ydEVsKTtcbiAgICB9XG4gIH1cbn1cbiIsImNvbnN0IGZzID0gcmVxdWlyZU5vZGUoYGZzLWV4dHJhYCk7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvZGVFbGVtZW50IHtcbiAgY29uc3RydWN0b3IoZWwsIG9wdGlvbnMpIHtcbiAgICB0aGlzLmVsID0gZWw7XG4gICAgdGhpcy4kZWwgPSAkKGVsKTtcbiAgICAvL29wdGlvbnNcbiAgICBpZighb3B0aW9ucylcbiAgICB7XG4gICAgICBvcHRpb25zID0ge307XG4gICAgfVxuXG4gICAgY29uc3Qgd2lkdGggPSAkKGVsKS5wYXJlbnQoKVswXS5zdHlsZS53aWR0aCB8fCBgMTAwJWA7XG4gICAgY29uc3QgaGVpZ2h0ID0gJChlbCkucGFyZW50KClbMF0uc3R5bGUuaGVpZ2h0IHx8IGAxMDAlYDtcblxuICAgIC8vd3JhcCBlbGVtZW50IGluIGEgY29udGFpbmVyXG4gICAgdGhpcy4kd3JhcHBlckVsID0gJChlbCkud3JhcChgPGRpdiBjbGFzcz1cImxpdmUtY29kZS1lbGVtZW50IGxpdmUtY29kZS1jb2RlLWVsZW1lbnRcIj48L2Rpdj5gKS5wYXJlbnQoKTtcbiAgICB0aGlzLndyYXBwZXJFbCA9IHRoaXMuJHdyYXBwZXJFbFswXTtcblxuICAgIHRoaXMuaWQgPSB0aGlzLiRlbC5hdHRyKGBkYXRhLWlkYCk7XG4gICAgdGhpcy5maWxlID0gdGhpcy4kZWwuZGF0YShgZmlsZWApO1xuXG4gICAgaWYoIXRoaXMuaWQgJiYgdGhpcy5maWxlKVxuICAgIHtcbiAgICAgIHRoaXMuaWQgPSB0aGlzLmZpbGU7XG4gICAgfVxuICAgIGlmKCF0aGlzLmlkKVxuICAgIHtcbiAgICAgIHRoaXMuaWQgPSBgY29kZS0keyAgTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMTAwMCAqIG5ldyBEYXRlKCkuZ2V0VGltZSgpKX1gO1xuICAgIH1cbiAgICB0aGlzLiRlbC5hdHRyKGBkYXRhLWlkYCwgdGhpcy5pZCk7XG5cbiAgICB0aGlzLnJ1bnRpbWUgPSB0aGlzLiRlbC5kYXRhKGBydW50aW1lYCk7XG4gICAgaWYoIXRoaXMucnVudGltZSlcbiAgICB7XG4gICAgICB0aGlzLnJ1bnRpbWUgPSBgYnJvd3NlcmA7XG4gICAgfVxuXG4gICAgdGhpcy5jb25zb2xlID0gdGhpcy4kZWwuZGF0YShgY29uc29sZWApO1xuICAgIHRoaXMucHJvY2Vzc29yID0gdGhpcy4kZWwuZGF0YShgcHJvY2Vzc29yYCk7XG5cbiAgICAvL2xhbmd1YWdlIGlzIHByb2dyYW1taW5nIGxhbmd1YWdlIC0gdXNlZCBmb3IgaW5qZWN0aW5nIGluIGh0bWxcbiAgICB0aGlzLmxhbmd1YWdlID0gdGhpcy4kZWwuZGF0YShgbGFuZ3VhZ2VgKTtcbiAgICBpZighdGhpcy5sYW5ndWFnZSlcbiAgICB7XG4gICAgICAvL2RlZmF1bHQgdG8gamF2YXNjcmlwdFxuICAgICAgdGhpcy5sYW5ndWFnZSA9IGBqYXZhc2NyaXB0YDtcbiAgICB9XG5cbiAgICAvL21vZGUgaXMgbW9kZSBmb3IgY29kZW1pcnJvclxuICAgIHRoaXMubW9kZSA9IHRoaXMuJGVsLmRhdGEoYG1vZGVgKTtcbiAgICBpZighdGhpcy5tb2RlKVxuICAgIHtcbiAgICAgIC8vZGVmYXVsdCB0byB0aGUgbGFuZ3VhZ2VcbiAgICAgIHRoaXMubW9kZSA9IHRoaXMubGFuZ3VhZ2U7XG4gICAgfVxuXG4gICAgdGhpcy5jb2RlTWlycm9yID0gQ29kZU1pcnJvci5mcm9tVGV4dEFyZWEodGhpcy5lbCwge1xuICAgICAgbGluZU51bWJlcnM6IHRydWUsXG4gICAgICBtb2RlOiB0aGlzLm1vZGUsXG4gICAgICBleHRyYUtleXM6IHtcIkN0cmwtU3BhY2VcIjogYGF1dG9jb21wbGV0ZWB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmNvZGVNaXJyb3Iuc2V0U2l6ZSh3aWR0aCwgaGVpZ2h0KTtcblxuICAgIC8vdGhpcy4kZWwuY3NzKCd3aWR0aCcsICcxMDAlJykuY3NzKCdoZWlnaHQnLCAnMTAwJScpO1xuICAgIHRoaXMubGF5b3V0KCk7XG4gIH1cblxuICBwYXVzZSgpIHtcbiAgICAvL25vIHJlYWwgcmVhc29uIHRvIGRvIHBhdXNlIC8gcmVzdW1lXG4gIH1cblxuICByZXN1bWUoKSB7XG4gICAgLy9ubyByZWFsIHJlYXNvbiB0byBkbyBwYXVzZSAvIHJlc3VtZVxuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLnBhdXNlKCk7XG4gIH1cblxuICBnZXRWYWx1ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5jb2RlTWlycm9yLmdldFZhbHVlKCk7XG4gIH1cblxuICBzZXRWYWx1ZSh2YWx1ZSkge1xuICAgIHRoaXMuY29kZU1pcnJvci5zZXRWYWx1ZSh2YWx1ZSk7XG4gIH1cblxuICBzYXZlVG9GaWxlKGZpbGVQYXRoKSB7XG4gICAgcmV0dXJuIGZzLndyaXRlRmlsZShmaWxlUGF0aCwgdGhpcy5nZXRWYWx1ZSgpKTtcbiAgfVxuXG4gIHJlYWRGcm9tRmlsZShmaWxlUGF0aCkge1xuICAgIHJldHVybiBmcy5yZWFkRmlsZShmaWxlUGF0aCwgYHV0ZjhgKVxuICAgICAgLnRoZW4oZGF0YSA9PiB7XG4gICAgICAgIHRoaXMuc2V0VmFsdWUoZGF0YSk7XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChlID0+IHtcbiAgICAgICAgdGhpcy5zZXRWYWx1ZSgnJyk7XG4gICAgICAgIHRocm93IGU7XG4gICAgICB9KTtcbiAgfVxuXG4gIGxheW91dCgpIHtcbiAgICAvLyB0aGlzLiR3cmFwcGVyRWwuZmluZCgnLkNvZGVNaXJyb3Itc2Nyb2xsJykuY3NzKCdtYXgtaGVpZ2h0JywgdGhpcy4kd3JhcHBlckVsLmNzcygnaGVpZ2h0JykpO1xuICAgIHRoaXMuY29kZU1pcnJvci5yZWZyZXNoKCk7XG4gIH1cbn1cbiIsImltcG9ydCBOb2RlQXBwUnVubmVyIGZyb20gJy4uL05vZGVBcHBSdW5uZXInO1xuXG5jb25zdCBodG1sRXNjYXBlID0gc3RyID0+IHtcbiAgcmV0dXJuIFN0cmluZyhzdHIpLnJlcGxhY2UoLyYvZywgYCZhbXA7YClcbiAgICAucmVwbGFjZSgvXFxcIi9nLCBgJnF1b3Q7YClcbiAgICAucmVwbGFjZSgvJy9nLCBgJiMzOTtgKVxuICAgIC5yZXBsYWNlKC88L2csIGAmbHQ7YClcbiAgICAucmVwbGFjZSgvPi9nLCBgJmd0O2ApO1xufTtcblxuY29uc3QgbmVlZHNKU09OQ29udmVyc2lvbiA9IGFyZyA9PiB7XG4gIGlmKFxuICAgIHR5cGVvZiBhcmcgPT09IGBudW1iZXJgIHx8XG4gICAgdHlwZW9mIGFyZyA9PT0gYHN0cmluZ2AgfHxcbiAgICB0eXBlb2YgYXJnID09PSBgYm9vbGVhbmBcbiAgKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiB0cnVlO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29uc29sZUVsZW1lbnQge1xuXG4gIGNvbnN0cnVjdG9yKGVsLCBvcHRpb25zKSB7XG4gICAgdGhpcy5lbCA9IGVsO1xuICAgIHRoaXMuJGVsID0gJChlbCk7XG5cbiAgICB0aGlzLm5vZGVBcHBSdW5uZXIgPSBuZXcgTm9kZUFwcFJ1bm5lcigpO1xuICAgIHRoaXMubm9kZUFwcFJ1bm5lci5vbihgc3Rkb3V0LWRhdGFgLCBkYXRhID0+IHRoaXMuaW5mbyhbZGF0YV0pKTtcbiAgICB0aGlzLm5vZGVBcHBSdW5uZXIub24oYHN0ZGVyci1kYXRhYCwgZXJyb3IgPT4gdGhpcy5lcnJvcihbZXJyb3JdKSk7XG5cbiAgICAvL29wdGlvbnNcbiAgICBpZighb3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgIH1cbiAgICAvL3dyYXAgZWxlbWVudCBpbiBhIGNvbnRhaW5lclxuICAgIHRoaXMuJHdyYXBwZXJFbCA9ICQoZWwpLndyYXAoYDxkaXYgY2xhc3M9XCJsaXZlLWNvZGUtZWxlbWVudCBsaXZlLWNvZGUtY29uc29sZS1lbGVtZW50IHVucmVzZXRcIj48L2Rpdj5gKS5wYXJlbnQoKTtcbiAgICB0aGlzLndyYXBwZXJFbCA9IHRoaXMuJHdyYXBwZXJFbFswXTtcblxuICAgIHRoaXMuaWQgPSB0aGlzLiRlbC5hdHRyKGBkYXRhLWlkYCk7XG4gICAgaWYoIXRoaXMuaWQpXG4gICAge1xuICAgICAgLy9nZW5lcmF0ZSBpZFxuICAgICAgdGhpcy5pZCA9IGBjb2RlLSR7ICBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAxMDAwICogbmV3IERhdGUoKS5nZXRUaW1lKCkpfWA7XG4gICAgICB0aGlzLiRlbC5hdHRyKGBkYXRhLWlkYCwgdGhpcy5pZCk7XG4gICAgfVxuXG4gICAgdGhpcy5maWxlID0gdGhpcy4kZWwuZGF0YShgZmlsZWApO1xuXG4gICAgdGhpcy4kZWwuY3NzKGB3aWR0aGAsIGAxMDAlYCkuY3NzKGBoZWlnaHRgLCBgMTAwJWApO1xuXG4gICAgdGhpcy5sb2dzID0gW107XG5cbiAgICB0aGlzLmlzUnVubmluZyA9IGZhbHNlO1xuICB9XG5cbiAgcGF1c2UoKSB7XG4gICAgaWYoIXRoaXMuaXNSdW5uaW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuaXNSdW5uaW5nID0gZmFsc2U7XG4gICAgdGhpcy5ub2RlQXBwUnVubmVyLnN0b3AoKTtcbiAgfVxuXG4gIHJlc3VtZSgpIHtcbiAgICBpZih0aGlzLmlzUnVubmluZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZighdGhpcy5hcHBsaWNhdGlvblBhdGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5ub2RlQXBwUnVubmVyLnJ1bih0aGlzLmFwcGxpY2F0aW9uUGF0aCk7XG4gICAgdGhpcy5pc1J1bm5pbmcgPSB0cnVlO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLnBhdXNlKCk7XG4gIH1cblxuICBydW5Ob2RlQXBwKGFwcGxpY2F0aW9uUGF0aCkge1xuICAgIHRoaXMucGF1c2UoKTtcbiAgICB0aGlzLmFwcGxpY2F0aW9uUGF0aCA9IGFwcGxpY2F0aW9uUGF0aDtcbiAgICB0aGlzLnJlc3VtZSgpO1xuICB9XG5cbiAgbWVzc2FnZShldmVudCkge1xuICAgIGxldCBzdHIgPSBodG1sRXNjYXBlKGV2ZW50Lm1lc3NhZ2UpO1xuICAgIC8vIHJlbW92ZSAlYyBkaXJlY3RpdmVzLCBhcyB3ZSBkb24ndCByZWNlaXZlIHRoZSBleHRyYSBzdHlsaW5nIGluZm8gaW4gdGhpcyBldmVudFxuICAgIHN0ciA9IHN0ci5yZXBsYWNlKC9cXCVjL2dpLCBgYCk7XG4gICAgbGV0IGZpbGVOYW1lID0gZXZlbnQuc291cmNlSWQuc3BsaXQoYC9gKTtcbiAgICBmaWxlTmFtZSA9IGZpbGVOYW1lW2ZpbGVOYW1lLmxlbmd0aCAtIDFdO1xuICAgIHRoaXMubG9ncy5wdXNoKGA8ZGl2IGNsYXNzPVwiY29uc29sZS1tZXNzYWdlXCI+XG4gICAgICA8cHJlIGNsYXNzPVwiY29uc29sZS1tZXNzYWdlX19jb250ZW50IGNvbnNvbGUtbWVzc2FnZV9fY29udGVudC0tbGV2ZWwke2V2ZW50LmxldmVsfVwiPiR7ICBzdHIgIH08L3ByZT5cbiAgICAgIDxkaXYgY2xhc3M9XCJjb25zb2xlLW1lc3NhZ2VfX29yaWdpblwiPiR7ZmlsZU5hbWV9OiR7ZXZlbnQubGluZX08L2Rpdj5cbiAgICA8L2Rpdj5gKTtcbiAgICB3aGlsZSh0aGlzLmxvZ3MubGVuZ3RoID4gMjApIHtcbiAgICAgIHRoaXMubG9ncy5zaGlmdCgpO1xuICAgIH1cbiAgICBjb25zdCBodG1sID0gdGhpcy5sb2dzLmpvaW4oYGApO1xuICAgIHRoaXMuZWwuaW5uZXJIVE1MID0gaHRtbDtcbiAgICB0aGlzLndyYXBwZXJFbC5zY3JvbGxUb3AgPSB0aGlzLndyYXBwZXJFbC5zY3JvbGxIZWlnaHQ7XG4gIH1cbn1cbiIsImNvbnN0IHJlbW90ZSA9IHJlcXVpcmVOb2RlKCdlbGVjdHJvbicpLnJlbW90ZTtcbmNvbnN0IHBhdGggPSByZXF1aXJlTm9kZSgncGF0aCcpO1xuY29uc3Qgb3MgPSByZXF1aXJlTm9kZSgnb3MnKTtcbmNvbnN0IHB0eSA9IHJlcXVpcmVOb2RlKCdub2RlLXB0eScpO1xuY29uc3QgVGVybWluYWwgPSByZXF1aXJlTm9kZSgneHRlcm0nKS5UZXJtaW5hbDtcbmNvbnN0IGZpdCA9IHJlcXVpcmVOb2RlKCd4dGVybS9saWIvYWRkb25zL2ZpdC9maXQnKTtcblxuVGVybWluYWwuYXBwbHlBZGRvbihmaXQpO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUZXJtaW5hbEVsZW1lbnQge1xuXG4gIGNvbnN0cnVjdG9yKGVsLCBvcHRpb25zKSB7XG4gICAgdGhpcy5lbCA9IGVsO1xuICAgIHRoaXMuJGVsID0gJChlbCk7XG5cbiAgICAvL29wdGlvbnNcbiAgICBpZighb3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgIH1cbiAgICAvL3dyYXAgZWxlbWVudCBpbiBhIGNvbnRhaW5lclxuICAgIHRoaXMuJHdyYXBwZXJFbCA9ICQoZWwpLndyYXAoYDxkaXYgY2xhc3M9XCJsaXZlLWNvZGUtZWxlbWVudCBsaXZlLWNvZGUtdGVybWluYWwtZWxlbWVudFwiPjwvZGl2PmApLnBhcmVudCgpO1xuICAgIHRoaXMud3JhcHBlckVsID0gdGhpcy4kd3JhcHBlckVsWzBdO1xuXG4gICAgdGhpcy5pZCA9IHRoaXMuJGVsLmF0dHIoYGRhdGEtaWRgKTtcbiAgICBpZighdGhpcy5pZClcbiAgICB7XG4gICAgICAvL2dlbmVyYXRlIGlkXG4gICAgICB0aGlzLmlkID0gYGNvZGUtJHsgIE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDEwMDAgKiBuZXcgRGF0ZSgpLmdldFRpbWUoKSl9YDtcbiAgICAgIHRoaXMuJGVsLmF0dHIoYGRhdGEtaWRgLCB0aGlzLmlkKTtcbiAgICB9XG5cbiAgICB0aGlzLmRpciA9IHRoaXMuJGVsLmRhdGEoYGRpcmApO1xuICAgIGlmICh0aGlzLmRpcikge1xuICAgICAgdGhpcy5kaXIgPSBwYXRoLnJlc29sdmUocmVtb3RlLmdldEdsb2JhbChgX19kaXJuYW1lYCksIHRoaXMuZGlyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5kaXIgPSByZW1vdGUuZ2V0R2xvYmFsKGBfX2Rpcm5hbWVgKTtcbiAgICB9XG4gICAgdGhpcy5hdXRvcnVuID0gdGhpcy4kZWwuZGF0YShgYXV0b3J1bmApO1xuXG4gICAgdGhpcy4kZWwuY3NzKGB3aWR0aGAsIGAxMDAlYCkuY3NzKGBoZWlnaHRgLCBgMTAwJWApO1xuXG4gICAgdGhpcy5pc1J1bm5pbmcgPSBmYWxzZTtcblxuICAgIC8vIEluaXRpYWxpemUgbm9kZS1wdHkgd2l0aCBhbiBhcHByb3ByaWF0ZSBzaGVsbFxuICAgIHRoaXMuc2hlbGwgPSBwcm9jZXNzLmVudltvcy5wbGF0Zm9ybSgpID09PSAnd2luMzInID8gJ0NPTVNQRUMnIDogJ1NIRUxMJ107XG4gICAgdGhpcy5wdHlQcm9jZXNzID0gcHR5LnNwYXduKHRoaXMuc2hlbGwsIFtdLCB7XG4gICAgICBuYW1lOiAneHRlcm0tY29sb3InLFxuICAgICAgY29sczogODAsXG4gICAgICByb3dzOiAzMCxcbiAgICAgIGN3ZDogdGhpcy5kaXIsXG4gICAgICBlbnY6IHByb2Nlc3MuZW52XG4gICAgfSk7XG5cbiAgICAvLyBJbml0aWFsaXplIHh0ZXJtLmpzIGFuZCBhdHRhY2ggaXQgdG8gdGhlIERPTVxuICAgIHRoaXMueHRlcm0gPSBuZXcgVGVybWluYWwoKTtcbiAgICB0aGlzLnh0ZXJtLnNldE9wdGlvbignZm9udFNpemUnLCAnMjQnKTtcbiAgICB0aGlzLnh0ZXJtLm9wZW4odGhpcy5lbCk7XG5cbiAgICB0aGlzLnh0ZXJtLm9uKCdkYXRhJywgKGRhdGEpID0+IHtcbiAgICAgIHRoaXMucHR5UHJvY2Vzcy53cml0ZShkYXRhKTtcbiAgICB9KTtcbiAgICB0aGlzLnB0eVByb2Nlc3Mub24oJ2RhdGEnLCAoZGF0YSkgPT4ge1xuICAgICAgdGhpcy54dGVybS53cml0ZShkYXRhKTtcbiAgICB9KTtcblxuICAgIGlmKHRoaXMuYXV0b3J1bikge1xuICAgICAgdGhpcy5leGVjdXRlQ29tbWFuZCh0aGlzLmF1dG9ydW4gKyBcIlxcblwiKTtcbiAgICB9XG4gIH1cblxuICBsYXlvdXQoKSB7XG4gICAgdGhpcy54dGVybS5maXQoKTtcbiAgfVxuXG4gIHBhdXNlKCkge1xuICAgIHRoaXMuaXNSdW5uaW5nID0gZmFsc2U7XG4gIH1cblxuICByZXN1bWUoKSB7XG4gICAgaWYgKHRoaXMuaXNSdW5uaW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuaXNSdW5uaW5nID0gdHJ1ZTtcbiAgfVxuXG4gIGV4ZWN1dGVDb21tYW5kKGNvbW1hbmRTdHJpbmcpIHtcbiAgICB0aGlzLnB0eVByb2Nlc3Mud3JpdGUoY29tbWFuZFN0cmluZyk7XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIHRoaXMucGF1c2UoKTtcbiAgICB0aGlzLnh0ZXJtLm9mZignZGF0YScpO1xuICAgIHRoaXMucHR5UHJvY2Vzcy5vZmYoJ2RhdGEnKTtcbiAgICB0aGlzLnB0eVByb2Nlc3Mua2lsbCgpO1xuICAgIHRoaXMueHRlcm0uZGVzdHJveSgpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBXZWJQcmV2aWV3RWxlbWVudCB7XG5cbiAgY29uc3RydWN0b3IoZWwsIG9wdGlvbnMpIHtcbiAgICB0aGlzLmVsID0gZWw7XG4gICAgdGhpcy4kZWwgPSAkKGVsKTtcbiAgICAvL29wdGlvbnNcbiAgICBpZighb3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IHt9O1xuICAgIH1cblx0XHQvL3dyYXAgZWxlbWVudCBpbiBhIGNvbnRhaW5lclxuICAgIHRoaXMuJHdyYXBwZXJFbCA9ICQoZWwpLndyYXAoYDxkaXYgY2xhc3M9XCJsaXZlLWNvZGUtZWxlbWVudCBsaXZlLWNvZGUtd2ViLXByZXZpZXctZWxlbWVudFwiPjwvZGl2PmApLnBhcmVudCgpO1xuICAgIHRoaXMud3JhcHBlckVsID0gdGhpcy4kd3JhcHBlckVsWzBdO1xuXG4gICAgdGhpcy5pZCA9IHRoaXMuJGVsLmF0dHIoYGRhdGEtaWRgKTtcbiAgICBpZighdGhpcy5pZClcblx0XHR7XG5cdFx0XHQvL2dlbmVyYXRlIGlkXG4gICAgICB0aGlzLmlkID0gYGNvZGUtJHsgIE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSAqIDEwMDAgKiBuZXcgRGF0ZSgpLmdldFRpbWUoKSl9YDtcbiAgICAgIHRoaXMuJGVsLmF0dHIoYGRhdGEtaWRgLCB0aGlzLmlkKTtcbiAgICB9XG5cbiAgICB0aGlzLmZpbGUgPSB0aGlzLiRlbC5kYXRhKGBmaWxlYCkgfHwgdGhpcy4kZWwuZGF0YShgdXJsYCk7XG4gICAgdGhpcy5hdXRvbG9hZCA9IHRoaXMuJGVsLmRhdGEoYGF1dG9sb2FkYCkgfHwgZmFsc2U7XG4gICAgdGhpcy56b29tZmFjdG9yID0gdGhpcy4kZWwuZGF0YShgem9vbWZhY3RvcmApIHx8IGZhbHNlO1xuXG4gICAgdGhpcy5jb25zb2xlID0gdGhpcy4kZWwuZGF0YShgY29uc29sZWApIHx8IGZhbHNlO1xuXG4gICAgdGhpcy4kZWwuY3NzKGB3aWR0aGAsIGAxMDAlYCkuY3NzKGBoZWlnaHRgLCBgMTAwJWApO1xuXG4gICAgdGhpcy51cmwgPSBmYWxzZTtcbiAgICB0aGlzLmJsb2NrcyA9IGZhbHNlO1xuICAgIHRoaXMuaXNSdW5uaW5nID0gZmFsc2U7XG5cdFx0Ly93ZWJ2aWV3IGdldHMgY3JlYXRlZCBieSBjYWxsaW5nIHVwZGF0ZVVybCBvciB1cGRhdGVDb2RlXG4gIH1cblxuICBnZXQgbmVlZHNPdXRwdXRQYXRoUHJlZml4KCkge1xuICAgIHJldHVybiAhKHRoaXMuJGVsLmRhdGEoYHVybGApKTtcbiAgfVxuXG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy5wYXVzZSgpO1xuICB9XG5cbiAgcGF1c2UoKSB7XG4gICAgdGhpcy5pc1J1bm5pbmcgPSBmYWxzZTtcbiAgICBpZih0aGlzLndlYnZpZXcpIHtcbiAgICAgIHRoaXMud2Vidmlldy5yZW1vdmVFdmVudExpc3RlbmVyKGBkaWQtZ2V0LXJlc3BvbnNlLWRldGFpbHNgLCB0aGlzLl9kaWRHZXRSZXNwb25zZURldGFpbHNIYW5kbGVyKTtcbiAgICAgIHRoaXMud2Vidmlldy5yZW1vdmVFdmVudExpc3RlbmVyKGBkb20tcmVhZHlgLCB0aGlzLl9kb21SZWFkeUhhbmRsZXIpO1xuICAgICAgdGhpcy53ZWJ2aWV3LnJlbW92ZUV2ZW50TGlzdGVuZXIoYGRpZC1mYWlsLWxvYWRgLCB0aGlzLl9kaWRGYWlsTG9hZEhhbmRsZXIpO1xuICAgICAgdGhpcy53ZWJ2aWV3LnJlbW92ZUV2ZW50TGlzdGVuZXIoYGlwYy1tZXNzYWdlYCwgdGhpcy5faXBjTWVzc2FnZUhhbmRsZXIpO1xuICAgICAgdGhpcy53ZWJ2aWV3LnJlbW92ZUV2ZW50TGlzdGVuZXIoYGNvbnNvbGUtbWVzc2FnZWAsIHRoaXMuX2NvbnNvbGVNZXNzYWdlSGFuZGxlcik7XG4gICAgICB0aGlzLndlYnZpZXcucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLndlYnZpZXcpO1xuICAgICAgdGhpcy53ZWJ2aWV3ID0gZmFsc2U7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5yZXRyeVRpbWVvdXQpO1xuICAgIH1cbiAgfVxuXG4gIHJlc3VtZSgpIHtcbiAgICBpZih0aGlzLmlzUnVubmluZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZih0aGlzLnVybCA9PT0gZmFsc2UgJiYgdGhpcy5ibG9ja3MgPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuaXNSdW5uaW5nID0gdHJ1ZTtcbiAgICB0aGlzLl9jcmVhdGVXZWJ2aWV3KCk7XG4gIH1cblxuICBfY3JlYXRlV2VidmlldygpIHtcbiAgICAvL2NyZWF0ZSBhIHdlYnZpZXcgdGFnXG4gICAgaWYodGhpcy53ZWJ2aWV3KSB7XG4gICAgICB0aGlzLndlYnZpZXcucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLndlYnZpZXcpO1xuICAgICAgdGhpcy53ZWJ2aWV3ID0gZmFsc2U7XG4gICAgfVxuICAgIHRoaXMud2VidmlldyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYHdlYnZpZXdgKTtcbiAgICB0aGlzLndlYnZpZXcuc3R5bGUud2lkdGggPSBgMTAwJWA7XG4gICAgdGhpcy53ZWJ2aWV3LnN0eWxlLmhlaWdodCA9IGAxMDAlYDtcbiAgICB0aGlzLndlYnZpZXcucHJlbG9hZCA9IGBqcy9saXZlY29kZS13ZWJwcmV2aWV3LmpzYDtcbiAgICB0aGlzLmVsLmFwcGVuZENoaWxkKHRoaXMud2Vidmlldyk7XG5cbiAgICBjb25zdCB1cmwgPSAodGhpcy51cmwgIT09IGZhbHNlKSA/IHRoaXMudXJsIDogYHdlYnByZXZpZXcuaHRtbGA7XG4gICAgbGV0IGh0bWxTcmMgPSBgYDtcbiAgICBpZih0aGlzLmJsb2NrcyAhPT0gZmFsc2UpIHtcbiAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLmJsb2Nrcy5sZW5ndGg7IGkrKylcblx0XHRcdHtcbiAgICAgICAgaHRtbFNyYyArPSB0aGlzLmJsb2Nrc1tpXS5jb2RlO1xuICAgICAgfVxuICAgIH1cblxuXHRcdC8vYWRkIGxpc3RlbmVyc1xuICAgIHRoaXMuX2RpZEdldFJlc3BvbnNlRGV0YWlsc0hhbmRsZXIgPSBlID0+IHtcbiAgICAgIGlmKGUub3JpZ2luYWxVUkwgIT09IHRoaXMud2Vidmlldy5zcmMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYodGhpcy4kZWwuYXR0cihgZGF0YS1vcGVuLWRldnRvb2xzYCkpIHtcbiAgICAgICAgdGhpcy53ZWJ2aWV3Lm9wZW5EZXZUb29scygpO1xuICAgICAgfVxuICAgIH07XG4gICAgdGhpcy53ZWJ2aWV3LmFkZEV2ZW50TGlzdGVuZXIoYGRpZC1nZXQtcmVzcG9uc2UtZGV0YWlsc2AsIHRoaXMuX2RpZEdldFJlc3BvbnNlRGV0YWlsc0hhbmRsZXIpO1xuXG4gICAgdGhpcy5fZG9tUmVhZHlIYW5kbGVyID0gKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuem9vbWZhY3Rvcikge1xuICAgICAgICBjb25zdCB6b29tZmFjdG9yID0gcGFyc2VGbG9hdCh0aGlzLnpvb21mYWN0b3IpO1xuICAgICAgICB0aGlzLndlYnZpZXcuc2V0Wm9vbUZhY3Rvcih6b29tZmFjdG9yKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMud2Vidmlldy5hZGRFdmVudExpc3RlbmVyKGBkb20tcmVhZHlgLCB0aGlzLl9kb21SZWFkeUhhbmRsZXIpO1xuXG4gICAgdGhpcy5fZGlkRmFpbExvYWRIYW5kbGVyID0gKCkgPT4ge1xuICAgICAgdGhpcy5yZXRyeVRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5wYXVzZSgpO1xuICAgICAgICB0aGlzLnJlc3VtZSgpO1xuICAgICAgfSwgMTAwMCk7XG4gICAgfTtcbiAgICB0aGlzLndlYnZpZXcuYWRkRXZlbnRMaXN0ZW5lcihgZGlkLWZhaWwtbG9hZGAsIHRoaXMuX2RpZEZhaWxMb2FkSGFuZGxlcik7XG5cbiAgICB0aGlzLl9jb25zb2xlTWVzc2FnZUhhbmRsZXIgPSBlID0+IHtcbiAgICAgIHRoaXMuJHdyYXBwZXJFbC50cmlnZ2VyKGBjb25zb2xlLW1lc3NhZ2VgLCBlKTtcbiAgICB9O1xuICAgIHRoaXMud2Vidmlldy5hZGRFdmVudExpc3RlbmVyKGBjb25zb2xlLW1lc3NhZ2VgLCB0aGlzLl9jb25zb2xlTWVzc2FnZUhhbmRsZXIpO1xuXG4gICAgdGhpcy5faXBjTWVzc2FnZUhhbmRsZXIgPSBldmVudCA9PiB7XG4gICAgICBpZihldmVudC5jaGFubmVsID09PSBgcmVxdWVzdC1odG1sYClcbiAgICAgIHtcbiAgICAgICAgdGhpcy53ZWJ2aWV3LnNlbmQoYHJlY2VpdmUtaHRtbGAsIGh0bWxTcmMpO1xuICAgICAgfVxuICAgIH07XG4gICAgdGhpcy53ZWJ2aWV3LmFkZEV2ZW50TGlzdGVuZXIoYGlwYy1tZXNzYWdlYCwgdGhpcy5faXBjTWVzc2FnZUhhbmRsZXIpO1xuXG4gICAgaWYoIXRoaXMuJGVsLmF0dHIoYGRhdGEtZGlzYWJsZS1ub2RlaW50ZWdyYXRpb25gKSkge1xuICAgICAgdGhpcy53ZWJ2aWV3LnNldEF0dHJpYnV0ZShgbm9kZWludGVncmF0aW9uYCwgYGApO1xuICAgIH1cbiAgICB0aGlzLndlYnZpZXcuc2V0QXR0cmlidXRlKGBzcmNgLCB1cmwpO1xuICB9XG5cbiAgdXBkYXRlVXJsKHVybCkge1xuICAgIHRoaXMucGF1c2UoKTtcbiAgICB0aGlzLnVybCA9IHVybDtcbiAgICB0aGlzLmJsb2NrcyA9IGZhbHNlO1xuICAgIHRoaXMucmVzdW1lKCk7XG4gIH1cblxuICB1cGRhdGVDb2RlKGJsb2Nrcykge1xuICAgIHRoaXMucGF1c2UoKTtcbiAgICB0aGlzLnVybCA9IGZhbHNlO1xuICAgIHRoaXMuYmxvY2tzID0gYmxvY2tzO1xuICAgIHRoaXMucmVzdW1lKCk7XG4gIH1cblxuICBvcGVuRGV2VG9vbHMoKSB7XG4gICAgdGhpcy53ZWJ2aWV3Lm9wZW5EZXZUb29scygpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBXZWJjYW1FbGVtZW50IHtcblxuICBjb25zdHJ1Y3RvcihlbCwgb3B0aW9ucykge1xuICAgIHRoaXMuZWwgPSBlbDtcbiAgICB0aGlzLiRlbCA9ICQoZWwpO1xuXG4gICAgLy9vcHRpb25zXG4gICAgaWYoIW9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSB7fTtcbiAgICB9XG5cbiAgICB0aGlzLmlkID0gdGhpcy4kZWwuYXR0cihgZGF0YS1pZGApO1xuICAgIGlmKCF0aGlzLmlkKVxuICAgIHtcbiAgICAgIC8vZ2VuZXJhdGUgaWRcbiAgICAgIHRoaXMuaWQgPSBgd2ViY2FtLSR7ICBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAxMDAwICogbmV3IERhdGUoKS5nZXRUaW1lKCkpfWA7XG4gICAgICB0aGlzLiRlbC5hdHRyKGBkYXRhLWlkYCwgdGhpcy5pZCk7XG4gICAgfVxuXG4gICAgdGhpcy5zb3VyY2UgPSB0aGlzLiRlbC5hdHRyKGBkYXRhLXNvdXJjZWApO1xuICAgIGlmKHRoaXMuc291cmNlKSB7XG4gICAgICB0aGlzLnNvdXJjZUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLnNvdXJjZSk7XG4gICAgfVxuXG4gICAgdGhpcy5jdHggPSB0aGlzLmVsLmdldENvbnRleHQoYDJkYCk7XG5cbiAgICB0aGlzLmlzUnVubmluZyA9IGZhbHNlO1xuICB9XG5cbiAgZGVzdHJveSgpIHtcbiAgICB0aGlzLnBhdXNlKCk7XG4gIH1cblxuICBwYXVzZSgpIHtcbiAgICB0aGlzLmlzUnVubmluZyA9IGZhbHNlO1xuICAgIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLmFuaW1hdGlvbkZyYW1lSWQpO1xuICB9XG5cbiAgcmVzdW1lKCkge1xuICAgIGlmKHRoaXMuaXNSdW5uaW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuaXNSdW5uaW5nID0gdHJ1ZTtcbiAgICB0aGlzLmFuaW1hdGlvbkZyYW1lSWQgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHRoaXMuZHJhd0xvb3AoKSk7XG4gIH1cblxuICBkcmF3TG9vcCgpIHtcbiAgICBpZih0aGlzLmlzUnVubmluZykge1xuICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLmRyYXdMb29wKCkpO1xuICAgIH1cbiAgICBpZighdGhpcy5zb3VyY2VFbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmVsLndpZHRoID0gdGhpcy5zb3VyY2VFbC53aWR0aDtcbiAgICB0aGlzLmVsLmhlaWdodCA9IHRoaXMuc291cmNlRWwuaGVpZ2h0O1xuICAgIHRoaXMuY3R4LmNsZWFyUmVjdCgwLCAwLCB0aGlzLmVsLndpZHRoLCB0aGlzLmVsLmhlaWdodCk7XG4gICAgdGhpcy5jdHguZHJhd0ltYWdlKHRoaXMuc291cmNlRWwsIDAsIDApO1xuICB9XG59XG4iLCJpbXBvcnQgQ29uc29sZUVsZW1lbnQgZnJvbSAnLi9Db25zb2xlRWxlbWVudCc7XG5pbXBvcnQgVGVybWluYWxFbGVtZW50IGZyb20gJy4vVGVybWluYWxFbGVtZW50JztcbmltcG9ydCBDb2RlRWxlbWVudCBmcm9tICcuL0NvZGVFbGVtZW50JztcbmltcG9ydCBXZWJQcmV2aWV3RWxlbWVudCBmcm9tICcuL1dlYlByZXZpZXdFbGVtZW50JztcbmltcG9ydCBXZWJjYW1FbGVtZW50IGZyb20gJy4vV2ViY2FtRWxlbWVudCc7XG5cbmNvbnN0IHBhdGggPSByZXF1aXJlTm9kZShgcGF0aGApO1xuY29uc3QgZnMgPSByZXF1aXJlTm9kZShgZnMtZXh0cmFgKTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGl2ZUNvZGUge1xuXG4gIGNvbnN0cnVjdG9yKCRlbCwgY29uZmlnLCByZWFkeUNhbGxiYWNrKSB7XG4gICAgdGhpcy4kZWwgPSAkZWw7XG4gICAgdGhpcy5lbCA9IHRoaXMuJGVsWzBdO1xuXG4gICAgaWYodGhpcy4kZWwuYXR0cihgZGF0YS1lbnRyeS1wYXRoYCkpIHtcbiAgICAgIHRoaXMuZW50cnlQYXRoID0gcGF0aC5qb2luKGNvbmZpZy5wcmVzZW50YXRpb25QYXRoLCB0aGlzLiRlbC5hdHRyKGBkYXRhLWVudHJ5LXBhdGhgKSk7XG4gICAgfVxuICAgIGlmKHRoaXMuJGVsLmF0dHIoYGRhdGEtb3V0cHV0LXBhdGhgKSkge1xuICAgICAgdGhpcy5vdXRwdXRQYXRoID0gcGF0aC5qb2luKGNvbmZpZy5wcmVzZW50YXRpb25QYXRoLCB0aGlzLiRlbC5hdHRyKGBkYXRhLW91dHB1dC1wYXRoYCkpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZih0aGlzLmVudHJ5UGF0aCkge1xuICAgICAgICB0aGlzLm91dHB1dFBhdGggPSB0aGlzLmVudHJ5UGF0aDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBwID0gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgcC50aGVuKCgpID0+IHtcbiAgICAgIGlmKHRoaXMuZW50cnlQYXRoICYmIHRoaXMuZW50cnlQYXRoICE9PSB0aGlzLm91dHB1dFBhdGgpIHtcbiAgICAgICAgcmV0dXJuIGZzLmNvcHkodGhpcy5lbnRyeVBhdGgsIHRoaXMub3V0cHV0UGF0aCk7XG4gICAgICB9XG4gICAgfSlcbiAgICAudGhlbigoKSA9PiB7XG4gICAgICAvL2NyZWF0ZSB0aGUgY29uc29sZXNcbiAgICAgIHRoaXMuY29uc29sZUVsZW1lbnRzID0ge307XG4gICAgICB0aGlzLiRlbC5maW5kKGBbZGF0YS10eXBlPVwiY29uc29sZVwiXWApLmVhY2goKChpbmRleCwgY29uc29sZUVsKSA9PiB0aGlzLmNyZWF0ZUNvbnNvbGVFbGVtZW50KGNvbnNvbGVFbCkpKTtcblxuICAgICAgLy9jcmVhdGUgdGhlIHRlcm1pbmFsc1xuICAgICAgdGhpcy50ZXJtaW5hbEVsZW1lbnRzID0ge307XG4gICAgICB0aGlzLiRlbC5maW5kKGBbZGF0YS10eXBlPVwidGVybWluYWxcIl1gKS5lYWNoKCgoaW5kZXgsIHRlcm1pbmFsRWwpID0+IHRoaXMuY3JlYXRlVGVybWluYWxFbGVtZW50KHRlcm1pbmFsRWwpKSk7XG5cbiAgICAgIC8vY3JlYXRlIHRoZSBwcmV2aWV3c1xuICAgICAgdGhpcy53ZWJQcmV2aWV3RWxlbWVudHMgPSB7fTtcbiAgICAgIHRoaXMuJGVsLmZpbmQoYFtkYXRhLXR5cGU9XCJ3ZWItcHJldmlld1wiXWApLmVhY2goKChpbmRleCwgd2ViUHJldmlld0VsKSA9PiB0aGlzLmNyZWF0ZVdlYlByZXZpZXdFbGVtZW50KHdlYlByZXZpZXdFbCkpKTtcblxuICAgICAgLy9jcmVhdGUgdGhlIGNvZGUgZWRpdG9yc1xuICAgICAgdGhpcy5jb2RlRWxlbWVudHMgPSB7fTtcbiAgICAgIHRoaXMuJGVsLmZpbmQoYFtkYXRhLXR5cGU9XCJjb2RlXCJdYCkuZWFjaCgoKGluZGV4LCBjb2RlRWwpID0+IHRoaXMuY3JlYXRlQ29kZUVsZW1lbnQoY29kZUVsKSkpO1xuXG4gICAgICAvL2NyZWF0ZSB0aGUgd2ViY2FtIGVsZW1lbnRzXG4gICAgICB0aGlzLndlYmNhbUVsZW1lbnRzID0ge307XG4gICAgICB0aGlzLiRlbC5maW5kKGBbZGF0YS10eXBlPVwid2ViY2FtXCJdYCkuZWFjaCgoKGluZGV4LCB3ZWJjYW1FbCkgPT4gdGhpcy5jcmVhdGVXZWJjYW1FbGVtZW50KHdlYmNhbUVsKSkpO1xuXG4gICAgICAvL2NyZWF0ZSBydW4gYnV0dG9uc1xuICAgICAgdGhpcy5ydW5CdXR0b25FbHMgPSBbXTtcbiAgICAgIHRoaXMuJGVsLmZpbmQoYFtkYXRhLXR5cGU9XCJydW4tYnV0dG9uXCJdYCkuZWFjaCgoKGluZGV4LCBydW5CdXR0b25FbCkgPT4gdGhpcy5jcmVhdGVSdW5CdXR0b24ocnVuQnV0dG9uRWwpKSk7XG5cbiAgICAgIC8vY3JlYXRlIHNhdmUgYnV0dG9uc1xuICAgICAgdGhpcy5zYXZlQnV0dG9uRWxzID0gW107XG4gICAgICB0aGlzLiRlbC5maW5kKGBbZGF0YS10eXBlPVwic2F2ZS1idXR0b25cIl1gKS5lYWNoKCgoaW5kZXgsIHNhdmVCdXR0b25FbCkgPT4gdGhpcy5jcmVhdGVTYXZlQnV0dG9uKHNhdmVCdXR0b25FbCkpKTtcblxuICAgICAgLy9jcmVhdGUgcmVsb2FkIGJ1dHRvbnNcbiAgICAgIHRoaXMucmVsb2FkQnV0dG9uRWxzID0gW107XG4gICAgICB0aGlzLiRlbC5maW5kKGBbZGF0YS10eXBlPVwicmVsb2FkLWJ1dHRvblwiXWApLmVhY2goKChpbmRleCwgcmVsb2FkQnV0dG9uRWwpID0+IHRoaXMuY3JlYXRlUmVsb2FkQnV0dG9uKHJlbG9hZEJ1dHRvbkVsKSkpO1xuXG4gICAgICAvL2NyZWF0ZSByZWxvYWQgYnV0dG9uc1xuICAgICAgdGhpcy5kZXZUb29sc0J1dHRvbkVscyA9IFtdO1xuICAgICAgdGhpcy4kZWwuZmluZChgW2RhdGEtdHlwZT1cImRldnRvb2xzLWJ1dHRvblwiXWApLmVhY2goKChpbmRleCwgZGV2VG9vbHNCdXR0b25FbCkgPT4gdGhpcy5jcmVhdGVEZXZUb29sc0J1dHRvbihkZXZUb29sc0J1dHRvbkVsKSkpO1xuXG4gICAgfSlcbiAgICAudGhlbigoKSA9PiB0aGlzLnNldENvZGVFbGVtZW50VmFsdWVzRnJvbUZpbGVzKCkpXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgICAgdGhpcy5sb2FkZWQgPSB0cnVlO1xuICAgICAgaWYodGhpcy5pc1J1bm5pbmcpIHtcbiAgICAgICAgdGhpcy5pc1J1bm5pbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5yZXN1bWUoKTtcbiAgICAgIH1cbiAgICB9KVxuICAgIC50aGVuKHJlYWR5Q2FsbGJhY2spLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKTtcblxuICAgIC8vZGlzYWJsZSBrZXlib2FyZCBidWJibGluZyB1cFxuICAgICQod2luZG93KS5vbihga2V5ZG93bmAsIGV2ZW50ID0+IHRoaXMua2V5RG93bkhhbmRsZXIoZXZlbnQpKTtcbiAgfVxuXG4gIGtleURvd25IYW5kbGVyKGUpIHtcbiAgICBpZih0aGlzLmVsLmNvbnRhaW5zKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQpKSB7XG4gICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiByZXR1cm4gYSBwcmV2aW91c2x5IGNyZWF0ZWQgY29kZSBlbGVtZW50LCBiYXNlZCBvbiB0aGUgaW5wdXRcbiAgICogaW5wdXQgY2FuIGJlOlxuICAgKiAgLSBodG1sIGRvbSBlbGVtZW50XG4gICAqICAtIGlkIG9mIGNvZGUgZWxlbWVudFxuICAgKlxuICAgKiByZXR1cm5zIHRoZSBjb2RlIGVsZW1lbnQgaWYgZm91bmQsIG90aGVyd2lzZSByZXR1cm5zIGZhbHNlXG4gICAqL1xuICBnZXRDb2RlRWxlbWVudChpbnB1dCkge1xuICAgIHJldHVybiB0aGlzLmdldEVsZW1lbnQodGhpcy5jb2RlRWxlbWVudHMsIGlucHV0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiByZXR1cm4gYSBwcmV2aW91c2x5IGNyZWF0ZWQgd2ViIHByZXZpZXcgZWxlbWVudCwgYmFzZWQgb24gdGhlIGlucHV0XG4gICAqIGlucHV0IGNhbiBiZTpcbiAgICogIC0gaHRtbCBkb20gZWxlbWVudFxuICAgKiAgLSBpZCBvZiBjb2RlIGVsZW1lbnRcbiAgICpcbiAgICogcmV0dXJucyB0aGUgd2ViIHByZXZpZXcgZWxlbWVudCBpZiBmb3VuZCwgb3RoZXJ3aXNlIHJldHVybnMgZmFsc2VcbiAgICovXG4gIGdldFdlYlByZXZpZXdFbGVtZW50KGlucHV0KSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0RWxlbWVudCh0aGlzLndlYlByZXZpZXdFbGVtZW50cywgaW5wdXQpO1xuICB9XG5cbiAgZ2V0RWxlbWVudChlbGVtZW50c0NvbGxlY3Rpb24sIGlucHV0KSB7XG4gICAgbGV0IHByb3BlcnR5VG9DaGVjayA9IGBpZGA7XG4gICAgaWYoaW5wdXQubm9kZU5hbWUpIHtcbiAgICAgIHByb3BlcnR5VG9DaGVjayA9IGBlbGA7XG4gICAgfVxuICAgIGZvcihjb25zdCBrZXkgaW4gZWxlbWVudHNDb2xsZWN0aW9uKVxuICAgIHtcbiAgICAgIGlmKGVsZW1lbnRzQ29sbGVjdGlvbltrZXldW3Byb3BlcnR5VG9DaGVja10gPT09IGlucHV0KSB7XG4gICAgICAgIHJldHVybiBlbGVtZW50c0NvbGxlY3Rpb25ba2V5XTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgc2V0Q29kZUVsZW1lbnRWYWx1ZUZyb21GaWxlKGNvZGVFbGVtZW50LCBmaWxlUGF0aCkge1xuICAgIHJldHVybiBjb2RlRWxlbWVudC5yZWFkRnJvbUZpbGUoZmlsZVBhdGgpO1xuICB9XG5cbiAgc2F2ZUNvZGVFbGVtZW50VG9GaWxlKGNvZGVFbGVtZW50LCBmaWxlUGF0aCkge1xuICAgIHJldHVybiBjb2RlRWxlbWVudC5zYXZlVG9GaWxlKGZpbGVQYXRoKTtcbiAgfVxuXG4gIGdldEZpbGVQYXRoKGZpbGUpIHtcbiAgICBpZighZmlsZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZih0aGlzLm91dHB1dFBhdGgpIHtcbiAgICAgIHJldHVybiBwYXRoLmpvaW4odGhpcy5vdXRwdXRQYXRoLCBmaWxlKTtcbiAgICB9XG4gICAgcmV0dXJuIGZpbGU7XG4gIH1cblxuICBnZXRGaWxlUGF0aEZvckNvZGVFbGVtZW50KGNvZGVFbGVtZW50KSB7XG4gICAgaWYoIWNvZGVFbGVtZW50LmZpbGUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZ2V0RmlsZVBhdGgoY29kZUVsZW1lbnQuZmlsZSk7XG4gIH1cblxuICBzZXRDb2RlRWxlbWVudFZhbHVlc0Zyb21GaWxlcygpIHtcbiAgICBjb25zdCB0YXNrcyA9IFtdO1xuICAgIGxldCBrZXk7XG4gICAgbGV0IGNvZGVFbGVtZW50O1xuICAgIGxldCBmaWxlUGF0aDtcbiAgICBmb3Ioa2V5IGluIHRoaXMuY29kZUVsZW1lbnRzKVxuICAgIHtcbiAgICAgIGNvZGVFbGVtZW50ID0gdGhpcy5jb2RlRWxlbWVudHNba2V5XTtcbiAgICAgIGZpbGVQYXRoID0gdGhpcy5nZXRGaWxlUGF0aEZvckNvZGVFbGVtZW50KGNvZGVFbGVtZW50KTtcbiAgICAgIGlmKGZpbGVQYXRoKVxuICAgICAge1xuICAgICAgICB0YXNrcy5wdXNoKHRoaXMuc2V0Q29kZUVsZW1lbnRWYWx1ZUZyb21GaWxlKGNvZGVFbGVtZW50LCBmaWxlUGF0aCkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gUHJvbWlzZS5hbGwodGFza3MpO1xuICB9XG5cbiAgYXV0b1N0YXJ0V2VicHJldmlld0VsZW1lbnRzV2hlbk5lZWRlZCgpIHtcbiAgICBmb3IoY29uc3Qga2V5IGluIHRoaXMud2ViUHJldmlld0VsZW1lbnRzKVxuICAgIHtcbiAgICAgIGNvbnN0IHdlYlByZXZpZXdFbGVtZW50ID0gdGhpcy53ZWJQcmV2aWV3RWxlbWVudHNba2V5XTtcbiAgICAgIGlmKHdlYlByZXZpZXdFbGVtZW50LmF1dG9sb2FkKSB7XG4gICAgICAgIHRoaXMucmVsb2FkV2ViUHJldmlld0VsZW1lbnQod2ViUHJldmlld0VsZW1lbnQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHNhdmVDb2RlRWxlbWVudHNUb0ZpbGVzKCkge1xuICAgIGNvbnN0IHRhc2tzID0gW107XG4gICAgbGV0IGtleTtcbiAgICBsZXQgY29kZUVsZW1lbnQ7XG4gICAgbGV0IGZpbGVQYXRoO1xuICAgIGZvcihrZXkgaW4gdGhpcy5jb2RlRWxlbWVudHMpXG4gICAge1xuICAgICAgY29kZUVsZW1lbnQgPSB0aGlzLmNvZGVFbGVtZW50c1trZXldO1xuICAgICAgZmlsZVBhdGggPSB0aGlzLmdldEZpbGVQYXRoRm9yQ29kZUVsZW1lbnQoY29kZUVsZW1lbnQpO1xuICAgICAgaWYoZmlsZVBhdGgpXG4gICAgICB7XG4gICAgICAgIHRhc2tzLnB1c2godGhpcy5zYXZlQ29kZUVsZW1lbnRUb0ZpbGUoY29kZUVsZW1lbnQsIGZpbGVQYXRoKSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLmFsbCh0YXNrcyk7XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIGxldCBrZXk7XG4gICAgZm9yKGtleSBpbiB0aGlzLmNvbnNvbGVFbGVtZW50cylcbiAgICB7XG4gICAgICB0aGlzLmRlc3Ryb3lDb25zb2xlRWxlbWVudCh0aGlzLmNvbnNvbGVFbGVtZW50c1trZXldKTtcbiAgICB9XG4gICAgZm9yKGtleSBpbiB0aGlzLnRlcm1pbmFsRWxlbWVudHMpXG4gICAge1xuICAgICAgdGhpcy5kZXN0cm95VGVybWluYWxFbGVtZW50KHRoaXMudGVybWluYWxFbGVtZW50c1trZXldKTtcbiAgICB9XG4gICAgZm9yKGtleSBpbiB0aGlzLndlYlByZXZpZXdFbGVtZW50cylcbiAgICB7XG4gICAgICB0aGlzLmRlc3Ryb3lXZWJQcmV2aWV3RWxlbWVudCh0aGlzLndlYlByZXZpZXdFbGVtZW50c1trZXldKTtcbiAgICB9XG4gICAgZm9yKGtleSBpbiB0aGlzLmNvZGVFbGVtZW50cylcbiAgICB7XG4gICAgICB0aGlzLmRlc3Ryb3lDb2RlRWxlbWVudCh0aGlzLmNvZGVFbGVtZW50c1trZXldKTtcbiAgICB9XG4gICAgZm9yKGtleSBpbiB0aGlzLndlYmNhbUVsZW1lbnRzKVxuICAgIHtcbiAgICAgIHRoaXMuZGVzdHJveVdlYmNhbUVsZW1lbnQodGhpcy53ZWJjYW1FbGVtZW50c1trZXldKTtcbiAgICB9XG4gICAgdGhpcy5ydW5CdXR0b25FbHMuZm9yRWFjaChlbCA9PiB0aGlzLmRlc3Ryb3lSdW5CdXR0b24oZWwpKTtcbiAgICB0aGlzLnNhdmVCdXR0b25FbHMuZm9yRWFjaChlbCA9PiB0aGlzLmRlc3Ryb3lTYXZlQnV0dG9uKGVsKSk7XG4gICAgdGhpcy5yZWxvYWRCdXR0b25FbHMuZm9yRWFjaChlbCA9PiB0aGlzLmRlc3Ryb3lSZWxvYWRCdXR0b24oZWwpKTtcbiAgICB0aGlzLmRldlRvb2xzQnV0dG9uRWxzLmZvckVhY2goZWwgPT4gdGhpcy5kZXN0cm95RGV2VG9vbHNCdXR0b24oZWwpKTtcbiAgICAvL1RPRE86IGRlc3Ryb3kgdGhlIHRtcCBkaXJlY3RvcnkgZm9yIHRoaXMgaW5zdGFuY2VcbiAgfVxuXG4gIHBhdXNlKCkge1xuICAgIHRoaXMuaXNSdW5uaW5nID0gZmFsc2U7XG4gICAgaWYoIXRoaXMubG9hZGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCBrZXk7XG4gICAgZm9yKGtleSBpbiB0aGlzLmNvbnNvbGVFbGVtZW50cylcbiAgICB7XG4gICAgICB0aGlzLmNvbnNvbGVFbGVtZW50c1trZXldLnBhdXNlKCk7XG4gICAgfVxuICAgIGZvcihrZXkgaW4gdGhpcy50ZXJtaW5hbEVsZW1lbnRzKVxuICAgIHtcbiAgICAgIHRoaXMudGVybWluYWxFbGVtZW50c1trZXldLnBhdXNlKCk7XG4gICAgfVxuICAgIGZvcihrZXkgaW4gdGhpcy53ZWJQcmV2aWV3RWxlbWVudHMpXG4gICAge1xuICAgICAgdGhpcy53ZWJQcmV2aWV3RWxlbWVudHNba2V5XS5wYXVzZSgpO1xuICAgIH1cbiAgICBmb3Ioa2V5IGluIHRoaXMuY29kZUVsZW1lbnRzKVxuICAgIHtcbiAgICAgIHRoaXMuY29kZUVsZW1lbnRzW2tleV0ucGF1c2UoKTtcbiAgICB9XG4gICAgZm9yKGtleSBpbiB0aGlzLndlYmNhbUVsZW1lbnRzKVxuICAgIHtcbiAgICAgIHRoaXMud2ViY2FtRWxlbWVudHNba2V5XS5wYXVzZSgpO1xuICAgIH1cbiAgfVxuXG4gIHJlc3VtZSgpIHtcbiAgICB0aGlzLmlzUnVubmluZyA9IHRydWU7XG4gICAgaWYoIXRoaXMubG9hZGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCBrZXk7XG4gICAgZm9yKGtleSBpbiB0aGlzLmNvbnNvbGVFbGVtZW50cylcbiAgICB7XG4gICAgICB0aGlzLmNvbnNvbGVFbGVtZW50c1trZXldLnJlc3VtZSgpO1xuICAgIH1cbiAgICBmb3Ioa2V5IGluIHRoaXMudGVybWluYWxFbGVtZW50cylcbiAgICB7XG4gICAgICB0aGlzLnRlcm1pbmFsRWxlbWVudHNba2V5XS5yZXN1bWUoKTtcbiAgICB9XG4gICAgZm9yKGtleSBpbiB0aGlzLndlYlByZXZpZXdFbGVtZW50cylcbiAgICB7XG4gICAgICB0aGlzLndlYlByZXZpZXdFbGVtZW50c1trZXldLnJlc3VtZSgpO1xuICAgIH1cbiAgICBmb3Ioa2V5IGluIHRoaXMuY29kZUVsZW1lbnRzKVxuICAgIHtcbiAgICAgIHRoaXMuY29kZUVsZW1lbnRzW2tleV0ucmVzdW1lKCk7XG4gICAgfVxuICAgIGZvcihrZXkgaW4gdGhpcy53ZWJjYW1FbGVtZW50cylcbiAgICB7XG4gICAgICB0aGlzLndlYmNhbUVsZW1lbnRzW2tleV0ucmVzdW1lKCk7XG4gICAgfVxuICAgIHRoaXMuYXV0b1N0YXJ0V2VicHJldmlld0VsZW1lbnRzV2hlbk5lZWRlZCgpO1xuICB9XG5cbiAgbGF5b3V0KCkge1xuICAgIC8vbWlnaHQgYmUgdHJpZ2dlcmVkIGFmdGVyIHNwbGl0IHBhbmUgcmVzaXplIG9yIHRhYiBzd2l0Y2hcbiAgICAvL2NvZGVtaXJyb3IgaW5zdGFuY2VzIG5lZWQgdG8gYmUgdXBkYXRlZFxuICAgIGZvcihjb25zdCBrZXkgaW4gdGhpcy5jb2RlRWxlbWVudHMpXG4gICAge1xuICAgICAgdGhpcy5jb2RlRWxlbWVudHNba2V5XS5sYXlvdXQoKTtcbiAgICB9XG4gICAgZm9yKGNvbnN0IGtleSBpbiB0aGlzLnRlcm1pbmFsRWxlbWVudHMpXG4gICAge1xuICAgICAgdGhpcy50ZXJtaW5hbEVsZW1lbnRzW2tleV0ubGF5b3V0KCk7XG4gICAgfVxuICB9XG5cbiAgY3JlYXRlQ29uc29sZUVsZW1lbnQoY29uc29sZUVsKSB7XG4gICAgY29uc3QgY29uc29sZUVsZW1lbnQgPSBuZXcgQ29uc29sZUVsZW1lbnQoY29uc29sZUVsKTtcbiAgICB0aGlzLmNvbnNvbGVFbGVtZW50c1tjb25zb2xlRWxlbWVudC5pZF0gPSBjb25zb2xlRWxlbWVudDtcbiAgfVxuXG4gIGRlc3Ryb3lDb25zb2xlRWxlbWVudChjb25zb2xlRWxlbWVudCkge1xuICAgIGNvbnNvbGVFbGVtZW50LmRlc3Ryb3koKTtcbiAgfVxuXG4gIGNyZWF0ZVRlcm1pbmFsRWxlbWVudCh0ZXJtaW5hbEVsKSB7XG4gICAgY29uc3QgdGVybWluYWxFbGVtZW50ID0gbmV3IFRlcm1pbmFsRWxlbWVudCh0ZXJtaW5hbEVsKTtcbiAgICB0aGlzLnRlcm1pbmFsRWxlbWVudHNbdGVybWluYWxFbGVtZW50LmlkXSA9IHRlcm1pbmFsRWxlbWVudDtcbiAgfVxuXG4gIGRlc3Ryb3lUZXJtaW5hbEVsZW1lbnQodGVybWluYWxFbGVtZW50KSB7XG4gICAgdGVybWluYWxFbGVtZW50LmRlc3Ryb3koKTtcbiAgfVxuXG4gIGNyZWF0ZVdlYlByZXZpZXdFbGVtZW50KHdlYlByZXZpZXdFbCkge1xuICAgIGNvbnN0IHdlYlByZXZpZXdFbGVtZW50ID0gbmV3IFdlYlByZXZpZXdFbGVtZW50KHdlYlByZXZpZXdFbCk7XG4gICAgd2ViUHJldmlld0VsZW1lbnQuJHdyYXBwZXJFbC5vbihgY29uc29sZS1tZXNzYWdlYCwgdGhpcy53ZWJQcmV2aWV3Q29uc29sZU1lc3NhZ2VIYW5kbGVyLmJpbmQodGhpcywgd2ViUHJldmlld0VsZW1lbnQpKTtcbiAgICB0aGlzLndlYlByZXZpZXdFbGVtZW50c1t3ZWJQcmV2aWV3RWxlbWVudC5pZF0gPSB3ZWJQcmV2aWV3RWxlbWVudDtcbiAgfVxuXG4gIGRlc3Ryb3lXZWJQcmV2aWV3RWxlbWVudCh3ZWJQcmV2aWV3RWxlbWVudCkge1xuICAgIHdlYlByZXZpZXdFbGVtZW50LiR3cmFwcGVyRWwub2ZmKGBjb25zb2xlLW1lc3NhZ2VgKTtcbiAgICB3ZWJQcmV2aWV3RWxlbWVudC5kZXN0cm95KCk7XG4gIH1cblxuICBjcmVhdGVDb2RlRWxlbWVudChjb2RlRWwpIHtcbiAgICBjb25zdCBjb2RlRWxlbWVudCA9IG5ldyBDb2RlRWxlbWVudChjb2RlRWwpO1xuICAgIHRoaXMuY29kZUVsZW1lbnRzW2NvZGVFbGVtZW50LmlkXSA9IGNvZGVFbGVtZW50O1xuICB9XG5cbiAgZGVzdHJveUNvZGVFbGVtZW50KGNvZGVFbGVtZW50KSB7XG4gICAgY29kZUVsZW1lbnQuZGVzdHJveSgpO1xuICB9XG5cbiAgY3JlYXRlV2ViY2FtRWxlbWVudCh3ZWJjYW1FbCkge1xuICAgIGNvbnN0IHdlYmNhbUVsZW1lbnQgPSBuZXcgV2ViY2FtRWxlbWVudCh3ZWJjYW1FbCk7XG4gICAgdGhpcy53ZWJjYW1FbGVtZW50c1t3ZWJjYW1FbGVtZW50LmlkXSA9IHdlYmNhbUVsZW1lbnQ7XG4gIH1cblxuICBkZXN0cm95V2ViY2FtRWxlbWVudCh3ZWJjYW1FbGVtZW50KSB7XG4gICAgd2ViY2FtRWxlbWVudC5kZXN0cm95KCk7XG4gIH1cblxuICBjcmVhdGVSdW5CdXR0b24ocnVuQnV0dG9uRWwpIHtcbiAgICB0aGlzLnJ1bkJ1dHRvbkVscy5wdXNoKHJ1bkJ1dHRvbkVsKTtcbiAgICAkKHJ1bkJ1dHRvbkVsKS5vbihgY2xpY2tgLCBlID0+IHtcbiAgICAgIGlmKHRoaXMud2ViUHJldmlld0VsZW1lbnRzWyQocnVuQnV0dG9uRWwpLmRhdGEoYHRhcmdldGApXSkge1xuICAgICAgICAvL3NhdmUgdGhlIGZpbGVzIGZpcnN0XG4gICAgICAgIHRoaXMuc2F2ZUNvZGVFbGVtZW50c1RvRmlsZXMoKVxuICAgICAgICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSlcbiAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAvL3VwZGF0ZSB0aGUgd2ViIHByZXZpZXdcbiAgICAgICAgICAgIHRoaXMudXBkYXRlV2ViUHJldmlld0VsZW1lbnQodGhpcy53ZWJQcmV2aWV3RWxlbWVudHNbJChydW5CdXR0b25FbCkuZGF0YShgdGFyZ2V0YCldKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZih0aGlzLmNvbnNvbGVFbGVtZW50c1skKHJ1bkJ1dHRvbkVsKS5kYXRhKGB0YXJnZXRgKV0pIHtcbiAgICAgICAgY29uc3QgYXBwbGljYXRpb25QYXRoID0gdGhpcy5nZXRGaWxlUGF0aCh0aGlzLmNvbnNvbGVFbGVtZW50c1skKHJ1bkJ1dHRvbkVsKS5kYXRhKGB0YXJnZXRgKV0uZmlsZSk7XG4gICAgICAgIHRoaXMuY29uc29sZUVsZW1lbnRzWyQocnVuQnV0dG9uRWwpLmRhdGEoYHRhcmdldGApXS5ydW5Ob2RlQXBwKGFwcGxpY2F0aW9uUGF0aCk7XG4gICAgICB9XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgIH0pO1xuICB9XG5cbiAgZGVzdHJveVJ1bkJ1dHRvbihydW5CdXR0b25FbCkge1xuICAgICQocnVuQnV0dG9uRWwpLm9mZihgY2xpY2tgKTtcbiAgfVxuXG4gIGNyZWF0ZVNhdmVCdXR0b24oc2F2ZUJ1dHRvbkVsKSB7XG4gICAgdGhpcy5zYXZlQnV0dG9uRWxzLnB1c2goc2F2ZUJ1dHRvbkVsKTtcbiAgICAkKHNhdmVCdXR0b25FbCkub24oYGNsaWNrYCwgZSA9PiB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgICAgLy9nZXQgdGhlIHRhcmdldCBlbGVtZW50IGZvciB0aGlzIGJ1dHRvblxuICAgICAgY29uc3QgdGFyZ2V0U3RyaW5nID0gJChzYXZlQnV0dG9uRWwpLmRhdGEoYHRhcmdldGApO1xuICAgICAgaWYodGFyZ2V0U3RyaW5nID09PSBgYWxsYCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zYXZlQ29kZUVsZW1lbnRzVG9GaWxlcygpO1xuICAgICAgfVxuICAgICAgY29uc3QgY29kZUVsZW1lbnQgPSB0aGlzLmdldENvZGVFbGVtZW50KHRhcmdldFN0cmluZyk7XG4gICAgICBpZighY29kZUVsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgZmlsZVBhdGggPSB0aGlzLmdldEZpbGVQYXRoRm9yQ29kZUVsZW1lbnQoY29kZUVsZW1lbnQpO1xuICAgICAgaWYoIWZpbGVQYXRoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvZGVFbGVtZW50LnNhdmVUb0ZpbGUoZmlsZVBhdGgpLmNhdGNoKGZ1bmN0aW9uKGVycikgeyBjb25zb2xlLmxvZyhlcnIpOyB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGRlc3Ryb3lTYXZlQnV0dG9uKHNhdmVCdXR0b25FbCkge1xuICAgICQoc2F2ZUJ1dHRvbkVsKS5vZmYoYGNsaWNrYCk7XG4gIH1cblxuICBjcmVhdGVSZWxvYWRCdXR0b24ocmVsb2FkQnV0dG9uRWwpIHtcbiAgICB0aGlzLnJlbG9hZEJ1dHRvbkVscy5wdXNoKHJlbG9hZEJ1dHRvbkVsKTtcbiAgICAkKHJlbG9hZEJ1dHRvbkVsKS5vbihgY2xpY2tgLCBlID0+IHtcbiAgICAgIC8vZ2V0IHRoZSByZWxvYWQgYnV0dG9uIHRhcmdldFxuICAgICAgbGV0IHJlbG9hZFRhcmdldEVsZW1lbnQgPSB0aGlzLmdldENvZGVFbGVtZW50KCQocmVsb2FkQnV0dG9uRWwpLmRhdGEoYHRhcmdldGApKTtcbiAgICAgIGlmKHJlbG9hZFRhcmdldEVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5yZWxvYWRDb2RlRWxlbWVudChyZWxvYWRUYXJnZXRFbGVtZW50KTtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICByZWxvYWRUYXJnZXRFbGVtZW50ID0gdGhpcy5nZXRXZWJQcmV2aWV3RWxlbWVudCgkKHJlbG9hZEJ1dHRvbkVsKS5kYXRhKGB0YXJnZXRgKSk7XG4gICAgICBpZihyZWxvYWRUYXJnZXRFbGVtZW50KSB7XG4gICAgICAgIHRoaXMucmVsb2FkV2ViUHJldmlld0VsZW1lbnQocmVsb2FkVGFyZ2V0RWxlbWVudCk7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgLy8gcmVsb2FkIGFsbCBlbGVtZW50c1xuICAgICAgdGhpcy5yZWxvYWRBbGxDb2RlRWxlbWVudHMoKS50aGVuKCgpID0+IHRoaXMucmVsb2FkQWxsV2ViUHJldmlld0VsZW1lbnRzKCkpO1xuICAgIH0pO1xuICB9XG5cbiAgcmVsb2FkQWxsQ29kZUVsZW1lbnRzKCkge1xuICAgIGNvbnN0IHRhc2tzID0gW107XG4gICAgZm9yKGNvbnN0IGtleSBpbiB0aGlzLmNvZGVFbGVtZW50cylcbiAgICB7XG4gICAgICB0YXNrcy5wdXNoKHRoaXMucmVsb2FkQ29kZUVsZW1lbnQodGhpcy5jb2RlRWxlbWVudHNba2V5XSkpO1xuICAgIH1cbiAgICByZXR1cm4gUHJvbWlzZS5hbGwodGFza3MpO1xuICB9XG5cbiAgcmVsb2FkQ29kZUVsZW1lbnQoY29kZUVsZW1lbnQpIHtcbiAgICBjb25zdCBmaWxlUGF0aCA9IHRoaXMuZ2V0RmlsZVBhdGhGb3JDb2RlRWxlbWVudChjb2RlRWxlbWVudCk7XG4gICAgaWYoIWZpbGVQYXRoKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHJldHVybiBjb2RlRWxlbWVudC5yZWFkRnJvbUZpbGUoZmlsZVBhdGgpLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKTtcbiAgfVxuXG4gIHJlbG9hZEFsbFdlYlByZXZpZXdFbGVtZW50cygpIHtcbiAgICBjb25zdCB0YXNrcyA9IFtdO1xuICAgIGZvcihjb25zdCBrZXkgaW4gdGhpcy53ZWJQcmV2aWV3RWxlbWVudHMpXG4gICAge1xuICAgICAgdGFza3MucHVzaCh0aGlzLnJlbG9hZFdlYlByZXZpZXdFbGVtZW50KHRoaXMud2ViUHJldmlld0VsZW1lbnRzW2tleV0pKTtcbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHRhc2tzKTtcbiAgfVxuXG4gIHJlbG9hZFdlYlByZXZpZXdFbGVtZW50KHdlYlByZXZpZXdFbGVtZW50KSB7XG4gICAgcmV0dXJuIHRoaXMudXBkYXRlV2ViUHJldmlld0VsZW1lbnQod2ViUHJldmlld0VsZW1lbnQpO1xuICB9XG5cbiAgZGVzdHJveVJlbG9hZEJ1dHRvbihyZWxvYWRCdXR0b25FbCkge1xuICAgICQocmVsb2FkQnV0dG9uRWwpLm9mZihgY2xpY2tgKTtcbiAgfVxuXG4gIGNyZWF0ZURldlRvb2xzQnV0dG9uKGRldlRvb2xzQnV0dG9uRWwpIHtcbiAgICB0aGlzLmRldlRvb2xzQnV0dG9uRWxzLnB1c2goZGV2VG9vbHNCdXR0b25FbCk7XG4gICAgJChkZXZUb29sc0J1dHRvbkVsKS5vbihgY2xpY2tgLCBlID0+IHtcbiAgICAgIC8vZ2V0IHRoZSB0YXJnZXQgZWxlbWVudCBmb3IgdGhpcyBidXR0b25cbiAgICAgIGNvbnN0IHdlYlByZXZpZXdFbGVtZW50ID0gdGhpcy5nZXRXZWJQcmV2aWV3RWxlbWVudCgkKGRldlRvb2xzQnV0dG9uRWwpLmRhdGEoYHRhcmdldGApKTtcbiAgICAgIGlmICghd2ViUHJldmlld0VsZW1lbnQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgd2ViUHJldmlld0VsZW1lbnQub3BlbkRldlRvb2xzKCk7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgIH0pO1xuICB9XG5cbiAgZGVzdHJveURldlRvb2xzQnV0dG9uKGRldlRvb2xzQnV0dG9uRWwpIHtcbiAgICAkKGRldlRvb2xzQnV0dG9uRWwpLm9mZihgY2xpY2tgKTtcbiAgfVxuXG4gIHdlYlByZXZpZXdDb25zb2xlTWVzc2FnZUhhbmRsZXIod2ViUHJldmlld0VsZW1lbnQsIGpxRXZlbnQsIGV2ZW50KSB7XG4gICAgLy9nZXQgdGhlIGNvbnNvbGUgZWxlbWVudCBmb3IgdGhpcyB3ZWIgcHJldmlld1xuICAgIGNvbnN0IGNvbnNvbGVFbGVtZW50ID0gdGhpcy5nZXRDb25zb2xlRWxlbWVudEZvcldlYlByZXZpZXcod2ViUHJldmlld0VsZW1lbnQpO1xuICAgIGlmKGNvbnNvbGVFbGVtZW50KVxuICAgIHtcbiAgICAgIGNvbnNvbGVFbGVtZW50Lm1lc3NhZ2UoZXZlbnQpO1xuICAgIH1cbiAgfVxuXG4gIGdldENvbnNvbGVFbGVtZW50Rm9yV2ViUHJldmlldyh3ZWJQcmV2aWV3RWxlbWVudCkge1xuICAgIHJldHVybiB0aGlzLmNvbnNvbGVFbGVtZW50c1t3ZWJQcmV2aWV3RWxlbWVudC5jb25zb2xlXTtcbiAgfVxuXG4gIGdldFdlYlByZXZpZXdFbGVtZW50Rm9yQ29kZUVsZW1lbnQoY29kZUVsZW1lbnQpIHtcbiAgICByZXR1cm4gdGhpcy53ZWJQcmV2aWV3RWxlbWVudHNbY29kZUVsZW1lbnQucHJvY2Vzc29yXTtcbiAgfVxuXG4gIHVwZGF0ZVdlYlByZXZpZXdFbGVtZW50KHdlYlByZXZpZXdFbGVtZW50KSB7XG4gICAgLy9sb2FkIGEgZmlsZSBvciBjb2RlIGJsb2Nrcz9cbiAgICBpZih3ZWJQcmV2aWV3RWxlbWVudC5maWxlKSB7XG4gICAgICBpZih0aGlzLm91dHB1dFBhdGggJiYgd2ViUHJldmlld0VsZW1lbnQubmVlZHNPdXRwdXRQYXRoUHJlZml4KSB7XG4gICAgICAgIHJldHVybiB3ZWJQcmV2aWV3RWxlbWVudC51cGRhdGVVcmwocGF0aC5qb2luKHRoaXMub3V0cHV0UGF0aCwgd2ViUHJldmlld0VsZW1lbnQuZmlsZSkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHdlYlByZXZpZXdFbGVtZW50LnVwZGF0ZVVybCh3ZWJQcmV2aWV3RWxlbWVudC5maWxlKTtcbiAgICB9XG5cbiAgICAvL2dhdGhlciBhbGwgdGhlIGNvZGUgZm9yIHRoaXMgZWxlbWVudFxuICAgIGNvbnN0IGJsb2NrcyA9IFtdO1xuICAgIGZvcihjb25zdCBrZXkgaW4gdGhpcy5jb2RlRWxlbWVudHMpXG4gICAge1xuICAgICAgY29uc3QgY29kZUVsZW1lbnQgPSB0aGlzLmNvZGVFbGVtZW50c1trZXldO1xuICAgICAgaWYoY29kZUVsZW1lbnQucHJvY2Vzc29yID09PSB3ZWJQcmV2aWV3RWxlbWVudC5pZClcbiAgICAgIHtcbiAgICAgICAgY29uc3QgYmxvY2sgPSB7XG4gICAgICAgICAgbGFuZ3VhZ2U6IGNvZGVFbGVtZW50Lmxhbmd1YWdlLFxuICAgICAgICAgIGNvZGU6IGNvZGVFbGVtZW50LmdldFZhbHVlKClcbiAgICAgICAgfTtcbiAgICAgICAgYmxvY2tzLnB1c2goYmxvY2spO1xuICAgICAgfVxuICAgIH1cbiAgICB3ZWJQcmV2aWV3RWxlbWVudC51cGRhdGVDb2RlKGJsb2Nrcyk7XG4gIH1cblxufVxuIiwicmVxdWlyZShgZXM2LXByb21pc2VgKS5wb2x5ZmlsbCgpO1xuXG5pbXBvcnQgUHJlc2VudGF0aW9uIGZyb20gJy4vY2xhc3Nlcy9QcmVzZW50YXRpb24nO1xuaW1wb3J0IFNsaWRlc0ZvbGRlclBhcnNlciBmcm9tICcuLi8uLi9zZXJ2ZXIvY2xhc3Nlcy9TbGlkZXNGb2xkZXJQYXJzZXInO1xuXG4oKCkgPT4ge1xuXG4gIGNvbnN0IHJlbW90ZSA9IHJlcXVpcmVOb2RlKGBlbGVjdHJvbmApLnJlbW90ZTtcbiAgY29uc3QgcHJlc2VudGF0aW9uUGF0aCA9IHJlbW90ZS5nZXRHbG9iYWwoYF9fZGlybmFtZWApO1xuICBjb25zdCBwYXRoID0gcmVxdWlyZU5vZGUoYHBhdGhgKTtcblxuICBjb25zdCBpbml0ID0gKCkgPT4ge1xuICAgIGNvbnN0IHNldHRpbmdzID0ge1xuICAgICAgcHJlc2VudGF0aW9uUGF0aDogcHJlc2VudGF0aW9uUGF0aCxcbiAgICAgIC8vIG1vYmlsZVNlcnZlclVybDogJ2h0dHBzOi8vYmJyaWRnZXMuaGVyb2t1YXBwLmNvbScsXG4gICAgICAvLyBtb2JpbGVTZXJ2ZXJVcmw6IGBodHRwOi8vbG9jYWxob3N0OjUwMDBgLFxuICAgICAgLy8gbW9iaWxlU2VydmVyVXNlcm5hbWU6IGB3b3V0ZXIudmVyd2VpcmRlckBnbWFpbC5jb21gLFxuICAgICAgLy8gbW9iaWxlU2VydmVyUGFzc3dvcmQ6IGBnZWhlaW1gXG4gICAgfTtcbiAgICBjb25zdCBzbGlkZXNGb2xkZXJQYXJzZXIgPSBuZXcgU2xpZGVzRm9sZGVyUGFyc2VyKCk7XG4gICAgc2xpZGVzRm9sZGVyUGFyc2VyLnBhcnNlKHByZXNlbnRhdGlvblBhdGgsIHBhdGgucmVzb2x2ZShwcmVzZW50YXRpb25QYXRoLCBgc2xpZGVzYCkpXG4gICAgICAudGhlbihkYXRhID0+IHtcbiAgICAgICAgbmV3IFByZXNlbnRhdGlvbihkYXRhLCBgcHJlc2VudGF0aW9uYCwgc2V0dGluZ3MpO1xuICAgICAgfSk7XG4gIH07XG5cbiAgaW5pdCgpO1xufSkoKTtcbiIsImxldCByZXF1aXJlTm9kZTtcbmlmKCEodHlwZW9mIHdpbmRvdyAhPT0gYHVuZGVmaW5lZGAgJiYgd2luZG93KSkge1xuICByZXF1aXJlTm9kZSA9IHJlcXVpcmU7XG59IGVsc2Uge1xuICByZXF1aXJlTm9kZSA9IHdpbmRvdy5yZXF1aXJlTm9kZTtcbn1cblxuY29uc3QgZnMgPSByZXF1aXJlTm9kZShgZnMtZXh0cmFgKTtcbmNvbnN0IHBhdGggPSByZXF1aXJlTm9kZShgcGF0aGApO1xuXG5jb25zdCBnZXRGaWxlUHJvcGVydGllcyA9IGZpbGVQYXRoID0+IHtcbiAgbGV0IF9mZCwgX287XG4gIHJldHVybiBmcy5vcGVuKGZpbGVQYXRoLCBgcmApXG4gICAgLnRoZW4oZmQgPT4ge1xuICAgICAgX2ZkID0gZmQ7XG4gICAgICByZXR1cm4gZmQ7XG4gICAgfSlcbiAgICAudGhlbihmZCA9PiBmcy5mc3RhdChmZCkpXG4gICAgLnRoZW4obyA9PiB7XG4gICAgICBfbyA9IG87XG4gICAgICByZXR1cm4gX287XG4gICAgfSlcbiAgICAudGhlbigoKSA9PiBmcy5jbG9zZShfZmQpKVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHBhdGg6IGZpbGVQYXRoLFxuICAgICAgICBpc0RpcmVjdG9yeTogX28uaXNEaXJlY3RvcnkoKSxcbiAgICAgICAgaXNGaWxlOiBfby5pc0ZpbGUoKVxuICAgICAgfTtcbiAgICB9KTtcbn07XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTbGlkZXNGb2xkZXJQYXJzZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgfVxuICBwYXJzZShwcmVzZW50YXRpb25QYXRoLCBzbGlkZXNGb2xkZXJQYXRoKSB7XG4gICAgLy9yZWFkIHRoZSBjb250ZW50cyBvZiB0aGUgc2xpZGVzIGRpcmVjdG9yeVxuICAgIHJldHVybiBmcy5yZWFkZGlyKHNsaWRlc0ZvbGRlclBhdGgpXG4gICAgICAudGhlbihyZXN1bHQgPT4gcmVzdWx0LmZpbHRlcihuYW1lID0+IG5hbWUuaW5kZXhPZihgLmApID4gMCkpXG4gICAgICAudGhlbihyZXN1bHQgPT4gcmVzdWx0Lm1hcChuYW1lID0+IHBhdGgucmVzb2x2ZShzbGlkZXNGb2xkZXJQYXRoLCBuYW1lKSkpXG4gICAgICAudGhlbihyZXN1bHQgPT4gUHJvbWlzZS5hbGwocmVzdWx0Lm1hcChmaWxlUGF0aCA9PiBnZXRGaWxlUHJvcGVydGllcyhmaWxlUGF0aCkpKSlcbiAgICAgIC50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgICAgc2xpZGVzOiBbXVxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBzbGlkZXNCeU5hbWUgPSB7fTtcbiAgICAgICAgcmVzdWx0LmZvckVhY2gocHJvcHMgPT4ge1xuICAgICAgICAgIGNvbnN0IHNsaWRlID0gdGhpcy5jcmVhdGVTbGlkZU9iamVjdEJhc2VkT25GaWxlUHJvcGVydGllcyhwcm9wcywgcHJlc2VudGF0aW9uUGF0aCwgc2xpZGVzQnlOYW1lKTtcbiAgICAgICAgICBpZighc2xpZGVzQnlOYW1lW3NsaWRlLm5hbWVdKSB7XG4gICAgICAgICAgICBkYXRhLnNsaWRlcy5wdXNoKHNsaWRlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2xpZGVzQnlOYW1lW3NsaWRlLm5hbWVdID0gc2xpZGU7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhkYXRhLnNsaWRlcyk7XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaChlID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgcGFyc2VTbGlkZUJhc2VOYW1lKHNsaWRlQmFzZU5hbWUpIHtcbiAgICBjb25zdCBwYXJzZWQgPSB7fTtcbiAgICBwYXJzZWQuZXh0ID0gcGF0aC5leHRuYW1lKHNsaWRlQmFzZU5hbWUpO1xuICAgIHBhcnNlZC5uYW1lID0gc2xpZGVCYXNlTmFtZS5zdWJzdHIoMCwgc2xpZGVCYXNlTmFtZS5sZW5ndGggLSBwYXJzZWQuZXh0Lmxlbmd0aCk7XG4gICAgY29uc3Qgc3BsaXR0ZWQgPSBwYXJzZWQubmFtZS5zcGxpdChgLmApO1xuICAgIGNvbnN0IGtleXdvcmRzID0gW2Btb2JpbGVgLCBgZGVza3RvcGAsIGBtdXRlZGAsIGBsb29wYCwgYGNvdmVyYCwgYGNvbnRyb2xzYF07XG4gICAga2V5d29yZHMuZm9yRWFjaChrZXl3b3JkID0+IHtcbiAgICAgIGNvbnN0IGluZGV4ID0gc3BsaXR0ZWQuaW5kZXhPZihrZXl3b3JkKTtcbiAgICAgIGlmKGluZGV4ID4gLTEpIHtcbiAgICAgICAgcGFyc2VkW2tleXdvcmRdID0gdHJ1ZTtcbiAgICAgICAgc3BsaXR0ZWQuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBwYXJzZWQubmFtZSA9IHNwbGl0dGVkLmpvaW4oYC5gKTtcbiAgICByZXR1cm4gcGFyc2VkO1xuICB9XG5cbiAgY3JlYXRlU2xpZGVPYmplY3RCYXNlZE9uRmlsZVByb3BlcnRpZXMoZmlsZVByb3BlcnRpZXMsIHByZXNlbnRhdGlvblBhdGgsIHNsaWRlc0J5TmFtZSkge1xuXG4gICAgY29uc3QgcGFyc2VkID0gdGhpcy5wYXJzZVNsaWRlQmFzZU5hbWUocGF0aC5iYXNlbmFtZShmaWxlUHJvcGVydGllcy5wYXRoKSk7XG4gICAgbGV0IHVybCA9IHBhdGgucmVsYXRpdmUocHJlc2VudGF0aW9uUGF0aCwgZmlsZVByb3BlcnRpZXMucGF0aCkucmVwbGFjZShgXFxcXGAsIGAvYCk7XG4gICAgaWYocGFyc2VkLmV4dCA9PT0gYC5qcGdgIHx8IHBhcnNlZC5leHQgPT09IGAuanBlZ2AgfHwgcGFyc2VkLmV4dCA9PT0gYC5naWZgIHx8IHBhcnNlZC5leHQgPT09IGAucG5nYCkge1xuICAgICAgdXJsID0gYHNsaWRlcy1idWlsdGluL2ltYWdlLmh0bWw/aW1hZ2U9JHsgIHVybH1gO1xuICAgIH1cbiAgICBpZihwYXJzZWQuZXh0ID09PSBgLm1wNGApIHtcbiAgICAgIHVybCA9IGBzbGlkZXMtYnVpbHRpbi92aWRlby5odG1sP3ZpZGVvPSR7ICB1cmx9YDtcbiAgICB9XG4gICAgaWYoc2xpZGVzQnlOYW1lW3BhcnNlZC5uYW1lXSkge1xuICAgICAgaWYocGFyc2VkLm1vYmlsZSkge1xuICAgICAgICBzbGlkZXNCeU5hbWVbcGFyc2VkLm5hbWVdLm1vYmlsZS51cmwgPSB1cmw7XG4gICAgICAgIHNsaWRlc0J5TmFtZVtwYXJzZWQubmFtZV0ubW9iaWxlLmV4cGxpY2l0ID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZihwYXJzZWQuZGVza3RvcCkge1xuICAgICAgICBzbGlkZXNCeU5hbWVbcGFyc2VkLm5hbWVdLnByZXNlbnRhdGlvbi51cmwgPSB1cmw7XG4gICAgICAgIHNsaWRlc0J5TmFtZVtwYXJzZWQubmFtZV0ucHJlc2VudGF0aW9uLmV4cGxpY2l0ID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vc2V0IHRoZSBvbmUgd2hpY2ggaXMgbm90IHNldCBleHBsaWNpdGx5XG4gICAgICAgIGlmKHNsaWRlc0J5TmFtZVtwYXJzZWQubmFtZV0ubW9iaWxlLmV4cGxpY2l0KSB7XG4gICAgICAgICAgc2xpZGVzQnlOYW1lW3BhcnNlZC5uYW1lXS5wcmVzZW50YXRpb24udXJsID0gdXJsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNsaWRlc0J5TmFtZVtwYXJzZWQubmFtZV0ubW9iaWxlLnVybCA9IHVybDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2xpZGVzQnlOYW1lW3BhcnNlZC5uYW1lXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogcGFyc2VkLm5hbWUsXG4gICAgICBwcmVzZW50YXRpb246IHtcbiAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgIGV4cGxpY2l0OiBmYWxzZVxuICAgICAgfSxcbiAgICAgIG1vYmlsZToge1xuICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgZXhwbGljaXQ6IGZhbHNlXG4gICAgICB9XG4gICAgfTtcbiAgfVxufVxuIiwiZXhwb3J0IGNvbnN0IENvbnN0YW50cyA9IHtcbiAgR09fVE9fUFJFVklPVVNfU0xJREU6IGBnb1RvUHJldmlvdXNTbGlkZWAsXG4gIEdPX1RPX05FWFRfU0xJREU6IGBnb1RvTmV4dFNsaWRlYCxcbiAgU0VUX1NMSURFUzogYHNldFNsaWRlc2AsXG4gIFNFVF9DVVJSRU5UX1NMSURFX0lOREVYOiBgc2V0Q3VycmVudFNsaWRlSW5kZXhgLFxuXG4gIE1FU1NBR0U6IGBtZXNzYWdlYCxcbiAgU09DS0VUX1NFTkQ6IGBzb2NrZXRTZW5kYCxcbiAgU09DS0VUX1JFQ0VJVkU6IGBzb2NrZXRSZWNlaXZlYCxcbiAgSk9JTl9TTElERV9ST09NOiBgam9pblNsaWRlUm9vbWAsXG4gIExFQVZFX1NMSURFX1JPT006IGBsZWF2ZVNsaWRlUm9vbWAsXG5cbiAgUk9MRV9QUkVTRU5UQVRJT046IGBwcmVzZW50YXRpb25gLFxuICBST0xFX01PQklMRTogYG1vYmlsZWAsXG5cbiAgU1RBVEVfQUNUSVZFOiBgYWN0aXZlYCxcbiAgU1RBVEVfSU5BQ1RJVkU6IGBpbmFjdGl2ZWAsXG5cbiAgU0VUX1NVQlNUQVRFOiBgc2V0U3Vic3RhdGVgLFxuXG4gIENISUxEX0FQUF9TQVZFX0NPREU6IGBjaGlsZEFwcFNhdmVDb2RlYCxcbiAgQ0hJTERfQVBQX1JVTl9DT0RFOiBgY2hpbGRBcHBSdW5Db2RlYCxcbiAgQ0hJTERfQVBQX1NURE9VVF9EQVRBOiBgY2hpbGRBcHBTdGRvdXREYXRhYCxcbiAgQ0hJTERfQVBQX1NUREVSUl9EQVRBOiBgY2hpbGRBcHBTdGRlcnJEYXRhYCxcblxuICBPUEVOX0NPTU1BTkRfTElORTogYG9wZW5Db21tYW5kTGluZWAsXG4gIE9QRU5fQ0FNRVJBOiBgb3BlbkNhbWVyYWAsXG5cbiAgQkxJTks6IGBibGlua2AsXG5cbiAgSEVBUlRfUkFURV9QT0xBUjogYGhlYXJ0UmF0ZVBvbGFyYCxcblxuICBTRVRfVEVBTTogYHNldFRlYW1gLFxuICBVUERBVEVfTU9USU9OOiBgdXBkYXRlTW90aW9uYCxcblxuICBZT1VfV0lOOiBgeW91V2luYCxcbiAgWU9VX0xPU0U6IGB5b3VMb3NlYCxcblxuICBTSEFLRV9ZT1VSX1BIT05FU19JTlRSTzogYHNoYWtlWW91clBob25lc0ludHJvYCxcbiAgU0hBS0VfWU9VUl9QSE9ORVNfR0FNRTogYHNoYWtlWW91clBob25lc0dhbWVgLFxuICBTSEFLRV9ZT1VSX1BIT05FU19GSU5JU0hFRDogYHNoYWtlWW91clBob25lc0ZpbmlzaGVkYCxcblxuICBTSEFLRV9ZT1VSX1BIT05FU19DTElFTlRfQURERUQ6IGBzaGFrZVlvdXJQaG9uZXNDbGllbnRBZGRlZGAsXG4gIFNIQUtFX1lPVVJfUEhPTkVTX0NMSUVOVF9SRU1PVkVEOiBgc2hha2VZb3VyUGhvbmVzQ2xpZW50UmVtb3ZlZGAsXG4gIFNIQUtFX1lPVVJfUEhPTkVTX0NMSUVOVF9MSVNUOiBgc2hha2VZb3VyUGhvbmVzQ2xpZW50TGlzdGAsXG4gIFNIQUtFX1lPVVJfUEhPTkVTX0NMSUVOVF9VUERBVEU6IGBzaGFrZVlvdXJQaG9uZXNDbGllbnRVcGRhdGVgXG59O1xuIiwiaW1wb3J0IHtDb25zdGFudHN9IGZyb20gJy4uL0NvbnN0YW50cyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbnRlbnRCYXNle1xuXG4gIGNvbnN0cnVjdG9yKCRzbGlkZUhvbGRlcikge1xuICAgIHRoaXMuJHNsaWRlSG9sZGVyID0gJHNsaWRlSG9sZGVyO1xuICAgIHRoaXMuc2xpZGVIb2xkZXIgPSB0aGlzLiRzbGlkZUhvbGRlclswXTtcbiAgICB0aGlzLndpZHRoID0gdGhpcy5zbGlkZUhvbGRlci5vZmZzZXRXaWR0aDtcbiAgICB0aGlzLmhlaWdodCA9IHRoaXMuc2xpZGVIb2xkZXIub2Zmc2V0SGVpZ2h0O1xuICAgIHRoaXMucHJldldpZHRoID0gdGhpcy53aWR0aDtcbiAgICB0aGlzLnByZXZIZWlnaHQgPSB0aGlzLmhlaWdodDtcbiAgICB0aGlzLndpZHRoQ2hhbmdlZCA9IGZhbHNlO1xuICAgIHRoaXMuaGVpZ2h0Q2hhbmdlZCA9IGZhbHNlO1xuICAgIHRoaXMuc2l6ZUNoYW5nZWQgPSBmYWxzZTtcbiAgICB0aGlzLnNyYyA9ICRzbGlkZUhvbGRlci5hdHRyKGBkYXRhLXNyY2ApO1xuICAgIHRoaXMubmFtZSA9ICRzbGlkZUhvbGRlci5hdHRyKGBkYXRhLW5hbWVgKTtcbiAgICB0aGlzLnNldHRpbmdzID0ge307XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuc2V0dGluZ3MgPSBKU09OLnBhcnNlKCQoYCNwcmVzZW50YXRpb25gKS5hdHRyKGBkYXRhLXByZXNlbnRhdGlvbi1zZXR0aW5nc2ApKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgIH1cbiAgICB0aGlzLmZwcyA9IDYwO1xuICAgIHRoaXMuX2FuaW1hdGlvbkZyYW1lSWQgPSBmYWxzZTtcbiAgICB0aGlzLl9jdXJyZW50VGltZSA9IDA7XG4gICAgdGhpcy5fZGVsdGEgPSAwO1xuICAgIHRoaXMuX2ludGVydmFsID0gZmFsc2U7XG4gICAgdGhpcy5fbGFzdFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICB0aGlzLmN1cnJlbnRGcmFtZSA9IDA7XG5cbiAgICB0aGlzLnN0YXJ0TGlzdGVuaW5nRm9yTWVzc2FnZXMoKTtcblxuICAgIHRoaXMuX19kcmF3TG9vcCA9IHRoaXMuX2RyYXdMb29wLmJpbmQodGhpcyk7XG4gICAgdGhpcy5faW50ZXJ2YWwgPSAxMDAwIC8gdGhpcy5mcHM7XG5cbiAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICRzbGlkZUhvbGRlci50cmlnZ2VyKGBsb2FkYCk7XG4gICAgfSk7XG4gIH1cblxuICBzdGFydExpc3RlbmluZ0Zvck1lc3NhZ2VzKCkge1xuICAgIHRoaXMuX3NsaWRlSG9sZGVyTWVzc2FnZVRvU2xpZGVIYW5kbGVyID0gdGhpcy5zbGlkZUhvbGRlck1lc3NhZ2VUb1NsaWRlSGFuZGxlci5iaW5kKHRoaXMpO1xuICAgIHRoaXMuJHNsaWRlSG9sZGVyLm9uKGBtZXNzYWdlLXRvLXNsaWRlYCwgdGhpcy5fc2xpZGVIb2xkZXJNZXNzYWdlVG9TbGlkZUhhbmRsZXIpO1xuICB9XG5cbiAgc3RvcExpc3RlbmluZ0Zvck1lc3NhZ2VzKCkge1xuICAgIHRoaXMuJHNsaWRlSG9sZGVyLm9mZihgbWVzc2FnZS10by1zbGlkZWAsIHRoaXMuX3NsaWRlSG9sZGVyTWVzc2FnZVRvU2xpZGVIYW5kbGVyKTtcbiAgfVxuXG4gIHNsaWRlSG9sZGVyTWVzc2FnZVRvU2xpZGVIYW5kbGVyKGV2ZW50LCBtZXNzYWdlKSB7XG4gICAgdGhpcy5yZWNlaXZlTWVzc2FnZSh7ZGF0YTogbWVzc2FnZX0pO1xuICB9XG5cbiAgcmVjZWl2ZU1lc3NhZ2UoZXZlbnQpIHtcbiAgICBpZighZXZlbnQuZGF0YSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzd2l0Y2goZXZlbnQuZGF0YS5hY3Rpb24pIHtcbiAgICBjYXNlIGBzZXRTdGF0ZWA6XG4gICAgICB0aGlzLnNldFN0YXRlKGV2ZW50LmRhdGEuc3RhdGUpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBgZGVzdHJveWA6XG4gICAgICB0aGlzLmRlc3Ryb3koKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgQ29uc3RhbnRzLlNPQ0tFVF9SRUNFSVZFOlxuICAgICAgdGhpcy5yZWNlaXZlU29ja2V0TWVzc2FnZShldmVudC5kYXRhLm1lc3NhZ2UpO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIHRoaXMuaGFuZGxlTWVzc2FnZShldmVudC5kYXRhKTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIGRlc3Ryb3koKSB7XG4gICAgdGhpcy5zdG9wTGlzdGVuaW5nRm9yTWVzc2FnZXMoKTtcbiAgICB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy5fYW5pbWF0aW9uRnJhbWVJZCk7XG4gIH1cblxuICBwb3N0TWVzc2FnZShkYXRhKSB7XG4gICAgdGhpcy4kc2xpZGVIb2xkZXIudHJpZ2dlcihgbWVzc2FnZS1mcm9tLXNsaWRlYCwgZGF0YSk7XG4gIH1cblxuICBoYW5kbGVNZXNzYWdlKGRhdGEpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuICB9XG5cbiAgcG9zdFNvY2tldE1lc3NhZ2UobWVzc2FnZSkge1xuICAgIHRoaXMucG9zdE1lc3NhZ2Uoe1xuICAgICAgYWN0aW9uOiBDb25zdGFudHMuU09DS0VUX1NFTkQsXG4gICAgICBtZXNzYWdlOiBtZXNzYWdlXG4gICAgfSk7XG4gIH1cblxuICByZWNlaXZlU29ja2V0TWVzc2FnZShtZXNzYWdlKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgICAvL2NvbnNvbGUubG9nKCdyZWNlaXZlU29ja2V0TWVzc2FnZWFtZSwgbWVzc2FnZSk7XG4gIH1cblxuICBzZXRTdGF0ZShzdGF0ZSkge1xuICAgIGlmKHN0YXRlICE9PSB0aGlzLnN0YXRlKSB7XG4gICAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgICB0aGlzLm9uU3RhdGVDaGFuZ2VkKCk7XG4gICAgICBpZih0aGlzLnN0YXRlID09PSBDb25zdGFudHMuU1RBVEVfQUNUSVZFKSB7XG4gICAgICAgIHRoaXMuY3VycmVudEZyYW1lID0gMDtcbiAgICAgICAgdGhpcy5fZHJhd0xvb3AoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdpbmRvdy5jYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLl9hbmltYXRpb25GcmFtZUlkKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBvblN0YXRlQ2hhbmdlZCgpIHtcbiAgfVxuXG4gIF9kcmF3TG9vcCgpIHtcbiAgICB0aGlzLl9hbmltYXRpb25GcmFtZUlkID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLl9fZHJhd0xvb3ApO1xuICAgIHRoaXMuX2N1cnJlbnRUaW1lID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKTtcbiAgICB0aGlzLl9kZWx0YSA9ICh0aGlzLl9jdXJyZW50VGltZSAtIHRoaXMuX2xhc3RUaW1lKTtcbiAgICBpZih0aGlzLl9kZWx0YSA+IHRoaXMuX2ludGVydmFsKSB7XG4gICAgICB0aGlzLmN1cnJlbnRGcmFtZSsrO1xuICAgICAgdGhpcy5wcmV2V2lkdGggPSB0aGlzLndpZHRoO1xuICAgICAgdGhpcy5wcmV2SGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XG4gICAgICB0aGlzLndpZHRoID0gdGhpcy5zbGlkZUhvbGRlci5vZmZzZXRXaWR0aDtcbiAgICAgIHRoaXMuaGVpZ2h0ID0gdGhpcy5zbGlkZUhvbGRlci5vZmZzZXRIZWlnaHQ7XG4gICAgICB0aGlzLndpZHRoQ2hhbmdlZCA9ICh0aGlzLndpZHRoICE9PSB0aGlzLnByZXZXaWR0aCk7XG4gICAgICB0aGlzLmhlaWdodENoYW5nZWQgPSAodGhpcy5oZWlnaHQgIT09IHRoaXMucHJldkhlaWdodCk7XG4gICAgICB0aGlzLnNpemVDaGFuZ2VkID0gKHRoaXMud2lkdGhDaGFuZ2VkIHx8IHRoaXMuaGVpZ2h0Q2hhbmdlZCk7XG4gICAgICB0aGlzLmRyYXdMb29wKHRoaXMuX2RlbHRhKTtcbiAgICAgIHRoaXMuX2xhc3RUaW1lID0gdGhpcy5fY3VycmVudFRpbWUgLSAodGhpcy5fZGVsdGEgJSB0aGlzLl9pbnRlcnZhbCk7XG4gICAgfVxuICB9XG5cbiAgZHJhd0xvb3AoZGVsdGEpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuICB9XG5cbn1cbiIsImltcG9ydCBmZXRjaCBmcm9tICdpc29tb3JwaGljLWZldGNoJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW9iaWxlU2VydmVyQnJpZGdlIHtcblxuICBjb25zdHJ1Y3RvcihwcmVzZW50YXRpb24sIHNldHRpbmdzKSB7XG4gICAgdGhpcy5wcmVzZW50YXRpb24gPSBwcmVzZW50YXRpb247XG4gICAgdGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xuICAgIHRoaXMuY29ubmVjdCgpO1xuICB9XG5cbiAgY29ubmVjdCgpIHtcbiAgICBpZiAoIXRoaXMuc2V0dGluZ3MubW9iaWxlU2VydmVyVXJsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKGBNb2JpbGVTZXJ2ZXJCcmlkZ2UuY29ubmVjdGApO1xuICAgIC8vY29uc29sZS53YXJuKCdNb2JpbGVTZXJ2ZXJCcmlkZ2UgZGlzYWJsZWQnKTtcbiAgICAvL3JldHVybjtcbiAgICAvL3Bvc3QgdG8gdGhlIGFwaVxuICAgIGZldGNoKGAke3RoaXMuc2V0dGluZ3MubW9iaWxlU2VydmVyVXJsfS9sb2dpbmAsIHtcbiAgICAgIG1ldGhvZDogYFBPU1RgLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkodGhpcy5nZXRMb2dpbkNyZWRlbnRpYWxzKCkpLFxuICAgICAgaGVhZGVyczogbmV3IEhlYWRlcnMoeydDb250ZW50LVR5cGUnOiBgYXBwbGljYXRpb24vanNvbmB9KVxuICAgIH0pXG4gICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKVxuICAgIC50aGVuKHJlc3VsdCA9PiB0aGlzLmxvZ2luSGFuZGxlcihyZXN1bHQpKVxuICAgIC5jYXRjaCgoKSA9PiB7XG4gICAgICAvL3JldHJ5IGFmdGVyIG9uZSBzZWNvbmRcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5jb25uZWN0KCksIDEwMDApO1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0TG9naW5DcmVkZW50aWFscygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZW1haWw6IHRoaXMuc2V0dGluZ3MubW9iaWxlU2VydmVyVXNlcm5hbWUsXG4gICAgICBwYXNzd29yZDogdGhpcy5zZXR0aW5ncy5tb2JpbGVTZXJ2ZXJQYXNzd29yZCxcbiAgICB9O1xuICB9XG5cbiAgbG9naW5IYW5kbGVyKHJlc3VsdCkge1xuICAgIHRoaXMudG9rZW4gPSByZXN1bHQudG9rZW47XG4gICAgdGhpcy5zb2NrZXQgPSBpbyh0aGlzLnNldHRpbmdzLm1vYmlsZVNlcnZlclVybCwge1xuICAgICAgcXVlcnk6IGB0b2tlbj0keyAgdGhpcy50b2tlbn1gLFxuICAgICAgcmVjb25uZWN0aW9uOiBmYWxzZSxcbiAgICAgIGZvcmNlTmV3OiB0cnVlXG4gICAgfSk7XG4gICAgdGhpcy5zb2NrZXQub24oYGNvbm5lY3RgLCB0aGlzLnNvY2tldENvbm5lY3RIYW5kbGVyLmJpbmQodGhpcykpO1xuICAgIHRoaXMuc29ja2V0Lm9uKGBkaXNjb25uZWN0YCwgdGhpcy5zb2NrZXREaXNjb25uZWN0SGFuZGxlci5iaW5kKHRoaXMpKTtcbiAgICB0aGlzLnNvY2tldC5vbihgbWVzc2FnZWAsIHRoaXMuc29ja2V0TWVzc2FnZUhhbmRsZXIuYmluZCh0aGlzKSk7XG4gIH1cblxuICBzb2NrZXRDb25uZWN0SGFuZGxlcigpIHtcbiAgICBjb25zb2xlLmxvZyhgTW9iaWxlU2VydmVyQnJpZGdlLnNvY2tldENvbm5lY3RIYW5kbGVyYCk7XG4gICAgdGhpcy5wcmVzZW50YXRpb24ubW9iaWxlU2VydmVyQnJpZGdlQ29ubmVjdGVkKCk7XG4gIH1cblxuICBzb2NrZXREaXNjb25uZWN0SGFuZGxlcigpIHtcbiAgICB0aGlzLmNvbm5lY3QoKTtcbiAgfVxuXG4gIHRyeVRvU2VuZCgpIHtcbiAgICBpZih0aGlzLnNvY2tldCkge1xuICAgICAgdGhpcy5zb2NrZXQuZW1pdC5hcHBseSh0aGlzLnNvY2tldCwgYXJndW1lbnRzKTtcbiAgICB9XG4gIH1cblxuICBzb2NrZXRNZXNzYWdlSGFuZGxlcihtZXNzYWdlKSB7XG4gICAgdGhpcy5wcmVzZW50YXRpb24ubW9iaWxlU2VydmVyTWVzc2FnZUhhbmRsZXIobWVzc2FnZSk7XG4gIH1cbn1cbiIsImltcG9ydCB7Q29uc3RhbnRzfSBmcm9tICcuLi9Db25zdGFudHMnO1xuaW1wb3J0IFNsaWRlQnJpZGdlIGZyb20gJy4vU2xpZGVCcmlkZ2UnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQcmVzZW50YXRpb24ge1xuICAvKlxuICAgKiBkYXRhOiBqc29uIG9iamVjdCB3aXRoIHNsaWRlcyBhcnJheSBwcm9wZXJ0eVxuICAgKiByb2xlOiBtb2JpbGUgb3IgcHJlc2VudGF0aW9uXG4gICAqL1xuICBjb25zdHJ1Y3RvcihkYXRhLCByb2xlLCBzZXR0aW5ncykge1xuICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgdGhpcy5yb2xlID0gcm9sZTtcbiAgICB0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7XG4gICAgJChgI3ByZXNlbnRhdGlvbmApLmF0dHIoYGRhdGEtcHJlc2VudGF0aW9uLXNldHRpbmdzYCwgSlNPTi5zdHJpbmdpZnkoc2V0dGluZ3MpKTtcbiAgICB0aGlzLmN1cnJlbnRTbGlkZUluZGV4ID0gLTE7XG4gICAgdGhpcy5zbGlkZUhvbGRlcnMgPSBbXTtcbiAgICB0aGlzLm51bVNsaWRlSG9sZGVycyA9IDM7XG4gICAgdGhpcy5zbGlkZUJyaWRnZXMgPSBbXTtcbiAgICB0aGlzLnNsaWRlQnJpZGdlc0J5U2xpZGVOYW1lID0ge307XG5cbiAgICB0aGlzLmNyZWF0ZVNsaWRlSG9sZGVycygpO1xuICAgIHRoaXMuY3JlYXRlU2xpZGVCcmlkZ2VzKHRoaXMuZGF0YSk7XG5cbiAgICB0aGlzLm1vYmlsZVNlcnZlckJyaWRnZSA9IHRoaXMuY3JlYXRlTW9iaWxlU2VydmVyQnJpZGdlKCk7XG4gICAgdGhpcy5zdGFydExpc3RlbmluZ0Zvck1lc3NhZ2VzKCk7XG5cbiAgICB0aGlzLnNldEN1cnJlbnRTbGlkZUluZGV4KDApO1xuICB9XG5cbiAgc3RhcnRMaXN0ZW5pbmdGb3JNZXNzYWdlcygpIHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihgbWVzc2FnZWAsIHRoaXMuc2xpZGVNZXNzYWdlSGFuZGxlci5iaW5kKHRoaXMpLCBmYWxzZSk7XG4gIH1cblxuICBjcmVhdGVTbGlkZUhvbGRlcnMoKSB7XG4gICAgZm9yKGxldCBpID0gMDsgaSA8IHRoaXMubnVtU2xpZGVIb2xkZXJzOyBpKyspIHtcbiAgICAgIGNvbnN0ICRzbGlkZUhvbGRlciA9ICQoYDxkaXYgY2xhc3M9XCJzbGlkZS1mcmFtZVwiIC8+YCk7XG4gICAgICB0aGlzLnNsaWRlSG9sZGVycy5wdXNoKCRzbGlkZUhvbGRlcik7XG4gICAgICAkKGAjcHJlc2VudGF0aW9uYCkuYXBwZW5kKCRzbGlkZUhvbGRlcik7XG4gICAgfVxuICB9XG5cbiAgY3JlYXRlU2xpZGVCcmlkZ2VzKGRhdGEpIHtcbiAgICBjb25zdCBudW1TbGlkZXMgPSBkYXRhLnNsaWRlcy5sZW5ndGg7XG4gICAgZm9yKGxldCBpID0gMDsgaSA8IG51bVNsaWRlczsgaSsrKSB7XG4gICAgICBjb25zdCBzbGlkZUJyaWRnZSA9IHRoaXMuY3JlYXRlU2xpZGVCcmlkZ2UoZGF0YS5zbGlkZXNbaV0pO1xuICAgICAgdGhpcy5zbGlkZUJyaWRnZXMucHVzaChzbGlkZUJyaWRnZSk7XG4gICAgICB0aGlzLnNsaWRlQnJpZGdlc0J5U2xpZGVOYW1lW3NsaWRlQnJpZGdlLm5hbWVdID0gc2xpZGVCcmlkZ2U7XG4gICAgfVxuICB9XG5cbiAgY3JlYXRlU2xpZGVCcmlkZ2Uoc2xpZGUpIHtcbiAgICByZXR1cm4gbmV3IFNsaWRlQnJpZGdlKHNsaWRlKTtcbiAgfVxuXG4gIHNsaWRlTWVzc2FnZUhhbmRsZXIoZXZlbnQpIHtcbiAgICBpZighZXZlbnQuZGF0YSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzd2l0Y2goZXZlbnQuZGF0YS5hY3Rpb24pIHtcbiAgICBjYXNlIENvbnN0YW50cy5TT0NLRVRfU0VORDpcbiAgICAgIGlmKHRoaXMubW9iaWxlU2VydmVyQnJpZGdlKSB7XG4gICAgICAgIHRoaXMubW9iaWxlU2VydmVyQnJpZGdlLnRyeVRvU2VuZChDb25zdGFudHMuTUVTU0FHRSwgZXZlbnQuZGF0YS5tZXNzYWdlKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIG1vYmlsZVNlcnZlckJyaWRnZUNvbm5lY3RlZCgpIHtcbiAgICAvL2pvaW4gdGhlIHJvb21zIG9mIHRoZSBzbGlkZUhvbGRlcnNcbiAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5udW1TbGlkZUhvbGRlcnM7IGkrKykge1xuICAgICAgdGhpcy5tb2JpbGVTZXJ2ZXJCcmlkZ2UudHJ5VG9TZW5kKENvbnN0YW50cy5KT0lOX1NMSURFX1JPT00sICQodGhpcy5zbGlkZUhvbGRlcnNbaV0pLmF0dHIoYGRhdGEtbmFtZWApKTtcbiAgICB9XG4gIH1cblxuICBtb2JpbGVTZXJ2ZXJNZXNzYWdlSGFuZGxlcihtZXNzYWdlKSB7XG4gICAgaWYobWVzc2FnZS50YXJnZXQuc2xpZGUpIHtcbiAgICAgIC8vc2xpZGUgaGFzIHRvIGhhbmRsZSB0aGUgbWVzc2FnZVxuICAgICAgY29uc3Qgc2xpZGVCcmlkZ2UgPSB0aGlzLmdldFNsaWRlQnJpZGdlQnlOYW1lKG1lc3NhZ2UudGFyZ2V0LnNsaWRlKTtcbiAgICAgIGlmKHNsaWRlQnJpZGdlKSB7XG4gICAgICAgIHNsaWRlQnJpZGdlLnRyeVRvUG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgIGFjdGlvbjogQ29uc3RhbnRzLlNPQ0tFVF9SRUNFSVZFLFxuICAgICAgICAgIG1lc3NhZ2U6IG1lc3NhZ2VcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vcHJlc2VudGF0aW9uIGhhcyB0byBoYW5kbGUgdGhlIG1lc3NhZ2VcbiAgICAgIHRoaXMuaGFuZGxlTW9iaWxlU2VydmVyTWVzc2FnZShtZXNzYWdlKTtcbiAgICB9XG4gIH1cblxuICBoYW5kbGVNb2JpbGVTZXJ2ZXJNZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICBjb25zb2xlLmxvZyhgW3NoYXJlZC9QcmVzZW50YXRpb25dIGhhbmRsZU1vYmlsZVNlcnZlck1lc3NhZ2VgLCBtZXNzYWdlKTtcbiAgfVxuXG4gIGdldFNsaWRlQnJpZGdlQnlJbmRleChpbmRleCkge1xuICAgIGlmKGluZGV4ID49IDAgJiYgaW5kZXggPCB0aGlzLnNsaWRlQnJpZGdlcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiB0aGlzLnNsaWRlQnJpZGdlc1tpbmRleF07XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGdldFNsaWRlQnJpZGdlQnlOYW1lKHNsaWRlTmFtZSkge1xuICAgIHJldHVybiB0aGlzLnNsaWRlQnJpZGdlc0J5U2xpZGVOYW1lW3NsaWRlTmFtZV07XG4gIH1cblxuICBnZXRTbGlkZUhvbGRlckZvclNsaWRlKHNsaWRlLCBzbGlkZXNOb3RUb0NsZWFyKSB7XG4gICAgaWYoc2xpZGUpIHtcbiAgICAgIGxldCAkc2xpZGVIb2xkZXIgPSAkKGAuc2xpZGUtZnJhbWVbZGF0YS1uYW1lPVwiJHsgIHNsaWRlLm5hbWUgIH1cIl1gKTtcbiAgICAgIGlmKCRzbGlkZUhvbGRlci5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJldHVybiAkc2xpZGVIb2xkZXJbMF07XG4gICAgICB9XG4gICAgICAvL2dldCBhIGZyZWUgc2xpZGVIb2xkZXJcbiAgICAgIGNvbnN0IHNsaWRlTmFtZXNOb3RUb0NsZWFyID0gW107XG4gICAgICAkKHNsaWRlc05vdFRvQ2xlYXIpLmVhY2goZnVuY3Rpb24oaW5kZXgsIG9iail7XG4gICAgICAgIHNsaWRlTmFtZXNOb3RUb0NsZWFyLnB1c2gob2JqLm5hbWUpO1xuICAgICAgfSk7XG4gICAgICBjb25zdCAkc2xpZGVIb2xkZXJzID0gJChgLnNsaWRlLWZyYW1lYCk7XG4gICAgICBmb3IgKGxldCBpID0gJHNsaWRlSG9sZGVycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAkc2xpZGVIb2xkZXIgPSAkKCRzbGlkZUhvbGRlcnNbaV0pO1xuICAgICAgICBjb25zdCBuYW1lID0gJHNsaWRlSG9sZGVyLmF0dHIoYGRhdGEtbmFtZWApO1xuICAgICAgICBpZighbmFtZSB8fCBzbGlkZU5hbWVzTm90VG9DbGVhci5pbmRleE9mKG5hbWUpID09PSAtMSkge1xuICAgICAgICAgIHJldHVybiAkc2xpZGVIb2xkZXJbMF07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgZ29Ub1ByZXZpb3VzU2xpZGUoKSB7XG4gICAgdGhpcy5zZXRDdXJyZW50U2xpZGVJbmRleCh0aGlzLmN1cnJlbnRTbGlkZUluZGV4IC0gMSk7XG4gIH1cblxuICBnb1RvTmV4dFNsaWRlKCkge1xuICAgIHRoaXMuc2V0Q3VycmVudFNsaWRlSW5kZXgodGhpcy5jdXJyZW50U2xpZGVJbmRleCArIDEpO1xuICB9XG5cbiAgc2V0Q3VycmVudFNsaWRlSW5kZXgodmFsdWUpIHtcbiAgICB2YWx1ZSA9IE1hdGgubWF4KDAsIE1hdGgubWluKHZhbHVlLCB0aGlzLnNsaWRlQnJpZGdlcy5sZW5ndGggLSAxKSk7XG4gICAgaWYodmFsdWUgIT09IHRoaXMuY3VycmVudFNsaWRlSW5kZXgpIHtcbiAgICAgIHRoaXMuY3VycmVudFNsaWRlSW5kZXggPSB2YWx1ZTtcblxuICAgICAgY29uc3QgY3VycmVudFNsaWRlQnJpZGdlID0gdGhpcy5nZXRTbGlkZUJyaWRnZUJ5SW5kZXgodGhpcy5jdXJyZW50U2xpZGVJbmRleCk7XG4gICAgICBjb25zdCBwcmV2aW91c1NsaWRlQnJpZGdlID0gdGhpcy5nZXRTbGlkZUJyaWRnZUJ5SW5kZXgodGhpcy5jdXJyZW50U2xpZGVJbmRleCAtIDEpO1xuICAgICAgY29uc3QgbmV4dFNsaWRlQnJpZGdlID0gdGhpcy5nZXRTbGlkZUJyaWRnZUJ5SW5kZXgodGhpcy5jdXJyZW50U2xpZGVJbmRleCArIDEpO1xuXG4gICAgICAvL3JlbW92ZSBcInVzZWRcIiBjbGFzcyBmcm9tIHNsaWRlIGhvbGRlcnNcbiAgICAgICQoYC5zbGlkZS1mcmFtZWApLnJlbW92ZUF0dHIoYGRhdGEtdXNlZGAsIGZhbHNlKTtcblxuICAgICAgY29uc3QgY3VycmVudFNsaWRlSG9sZGVyID0gdGhpcy5nZXRTbGlkZUhvbGRlckZvclNsaWRlKGN1cnJlbnRTbGlkZUJyaWRnZSwgW3ByZXZpb3VzU2xpZGVCcmlkZ2UsIG5leHRTbGlkZUJyaWRnZV0pO1xuICAgICAgdGhpcy5zZXR1cFNsaWRlSG9sZGVyKGN1cnJlbnRTbGlkZUhvbGRlciwgY3VycmVudFNsaWRlQnJpZGdlLCBDb25zdGFudHMuU1RBVEVfQUNUSVZFLCAwKTtcblxuICAgICAgY29uc3QgcHJldmlvdXNTbGlkZUhvbGRlciA9IHRoaXMuZ2V0U2xpZGVIb2xkZXJGb3JTbGlkZShwcmV2aW91c1NsaWRlQnJpZGdlLCBbY3VycmVudFNsaWRlQnJpZGdlLCBuZXh0U2xpZGVCcmlkZ2VdKTtcbiAgICAgIHRoaXMuc2V0dXBTbGlkZUhvbGRlcihwcmV2aW91c1NsaWRlSG9sZGVyLCBwcmV2aW91c1NsaWRlQnJpZGdlLCBDb25zdGFudHMuU1RBVEVfSU5BQ1RJVkUsIGAtMTAwJWApO1xuXG4gICAgICBjb25zdCBuZXh0U2xpZGVIb2xkZXIgPSB0aGlzLmdldFNsaWRlSG9sZGVyRm9yU2xpZGUobmV4dFNsaWRlQnJpZGdlLCBbcHJldmlvdXNTbGlkZUJyaWRnZSwgY3VycmVudFNsaWRlQnJpZGdlXSk7XG4gICAgICB0aGlzLnNldHVwU2xpZGVIb2xkZXIobmV4dFNsaWRlSG9sZGVyLCBuZXh0U2xpZGVCcmlkZ2UsIENvbnN0YW50cy5TVEFURV9JTkFDVElWRSwgYDEwMCVgKTtcblxuICAgICAgLy9jbGVhciBhdHRyaWJ1dGVzIG9mIHVudXNlZCBzbGlkZSBmcmFtZXNcbiAgICAgICQoYC5zbGlkZS1mcmFtZWApLmVhY2goZnVuY3Rpb24oaW5kZXgsIHNsaWRlSG9sZGVyKXtcbiAgICAgICAgaWYoISQoc2xpZGVIb2xkZXIpLmF0dHIoYGRhdGEtdXNlZGApKSB7XG4gICAgICAgICAgJChzbGlkZUhvbGRlcikucmVtb3ZlQXR0cihgZGF0YS11c2VkYCkucmVtb3ZlQXR0cihgZGF0YS1uYW1lYCkucmVtb3ZlQXR0cihgZGF0YS1zcmNgKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vYWxsIG90aGVyIHNsaWRlSG9sZGVyIGJyaWRnZXMgc2hvdWxkIGJlIHVubGlua2VkIGZyb20gdGhlaXIgc2xpZGVIb2xkZXJcbiAgICAgIHRoaXMuc2xpZGVCcmlkZ2VzLmZvckVhY2goZnVuY3Rpb24oc2xpZGVCcmlkZ2Upe1xuICAgICAgICBpZihzbGlkZUJyaWRnZSA9PT0gY3VycmVudFNsaWRlQnJpZGdlKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmKHNsaWRlQnJpZGdlID09PSBwcmV2aW91c1NsaWRlQnJpZGdlKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmKHNsaWRlQnJpZGdlID09PSBuZXh0U2xpZGVCcmlkZ2UpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgc2xpZGVCcmlkZ2Uuc2xpZGVIb2xkZXIgPSBudWxsO1xuICAgICAgfSk7XG5cbiAgICAgIGJlYW4uZmlyZSh0aGlzLCBDb25zdGFudHMuU0VUX0NVUlJFTlRfU0xJREVfSU5ERVgsIFt0aGlzLmN1cnJlbnRTbGlkZUluZGV4XSk7XG4gICAgfVxuICB9XG5cbiAgc2V0dXBTbGlkZUhvbGRlcihzbGlkZUhvbGRlciwgc2xpZGVCcmlkZ2UsIHN0YXRlLCBsZWZ0KSB7XG4gICAgaWYoc2xpZGVIb2xkZXIpIHtcbiAgICAgIGxldCBzcmMgPSBgc2xpZGVzLyR7ICBzbGlkZUJyaWRnZS5uYW1lICB9Lmh0bWxgO1xuICAgICAgaWYoc2xpZGVCcmlkZ2UuZGF0YVt0aGlzLnJvbGVdICYmIHNsaWRlQnJpZGdlLmRhdGFbdGhpcy5yb2xlXS51cmwpIHtcbiAgICAgICAgc3JjID0gc2xpZGVCcmlkZ2UuZGF0YVt0aGlzLnJvbGVdLnVybDtcbiAgICAgIH1cbiAgICAgIHNyYyA9IHRoaXMucHJvY2Vzc1NsaWRlU3JjKHNyYyk7XG4gICAgICBpZihzbGlkZUJyaWRnZS5pc0FscmVhZHlDb3JyZWN0bHlBdHRhY2hlZChzbGlkZUhvbGRlciwgc3JjKSkge1xuICAgICAgICAvL2NvbnNvbGUubG9nKHNsaWRlQnJpZGdlLm5hbWUgKyAnIGFscmVhZHkgYXR0YWNoZWQnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuYXR0YWNoVG9TbGlkZUhvbGRlcihzbGlkZUhvbGRlciwgc2xpZGVCcmlkZ2UsIHNyYyk7XG4gICAgICB9XG4gICAgICBzbGlkZUJyaWRnZS5zZXRTdGF0ZShzdGF0ZSk7XG4gICAgICAkKHNsaWRlSG9sZGVyKS5jc3MoYGxlZnRgLCBsZWZ0KTtcbiAgICAgICQoc2xpZGVIb2xkZXIpLmF0dHIoYGRhdGEtdXNlZGAsIDEpO1xuICAgIH1cbiAgfVxuXG4gIGF0dGFjaFRvU2xpZGVIb2xkZXIoc2xpZGVIb2xkZXIsIHNsaWRlQnJpZGdlLCBzcmMpIHtcbiAgICAvL2xpc3RlbiBmb3IgZXZlbnRzIG9uIHRoaXMgc2xpZGVIb2xkZXJcbiAgICAkKHNsaWRlSG9sZGVyKS5vZmYoYG1lc3NhZ2UtZnJvbS1zbGlkZWApO1xuICAgICQoc2xpZGVIb2xkZXIpLm9uKGBtZXNzYWdlLWZyb20tc2xpZGVgLCAoZXZlbnQsIG1lc3NhZ2UpID0+ICB7XG4gICAgICB0aGlzLnNsaWRlTWVzc2FnZUhhbmRsZXIoe2RhdGE6IG1lc3NhZ2V9KTtcbiAgICB9KTtcbiAgICAvL2xlYXZlIHByZXZpb3VzIGNoYW5uZWwgb2YgdGhpcyBzbGlkZUhvbGRlclxuICAgIGlmKHRoaXMubW9iaWxlU2VydmVyQnJpZGdlKSB7XG4gICAgICB0aGlzLm1vYmlsZVNlcnZlckJyaWRnZS50cnlUb1NlbmQoQ29uc3RhbnRzLkxFQVZFX1NMSURFX1JPT00sICQoc2xpZGVIb2xkZXIpLmF0dHIoYGRhdGEtbmFtZWApKTtcbiAgICB9XG4gICAgLy9hZGQgdGhlIGpvaW4gYXMgYSBjYWxsYmFjayBmb3IgdGhlIG9ubG9hZCBldmVudFxuICAgIHNsaWRlQnJpZGdlLmF0dGFjaFRvU2xpZGVIb2xkZXIoc2xpZGVIb2xkZXIsIHNyYywgdGhpcy5zbGlkZUxvYWRlZC5iaW5kKHRoaXMsIHNsaWRlSG9sZGVyLCBzbGlkZUJyaWRnZSwgc3JjKSk7XG4gIH1cblxuICBzbGlkZUxvYWRlZChzbGlkZUhvbGRlciwgc2xpZGVCcmlkZ2UpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuICAgIC8vam9pbiBuZXcgY2hhbm5lbFxuICAgIGlmKHRoaXMubW9iaWxlU2VydmVyQnJpZGdlKSB7XG4gICAgICB0aGlzLm1vYmlsZVNlcnZlckJyaWRnZS50cnlUb1NlbmQoQ29uc3RhbnRzLkpPSU5fU0xJREVfUk9PTSwgJChzbGlkZUhvbGRlcikuYXR0cihgZGF0YS1uYW1lYCkpO1xuICAgIH1cbiAgfVxuXG4gIHByb2Nlc3NTbGlkZVNyYyhzcmMpIHtcbiAgICByZXR1cm4gc3JjO1xuICB9XG5cbiAgY3JlYXRlTW9iaWxlU2VydmVyQnJpZGdlKCkge1xuICAgIC8vdG8gaW1wbGVtZW50IGluIGV4dGVuZGluZyBjbGFzc2VzXG4gIH1cbn1cbiIsImltcG9ydCBmZXRjaCBmcm9tICdpc29tb3JwaGljLWZldGNoJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2xpZGVCcmlkZ2Uge1xuICBjb25zdHJ1Y3RvcihkYXRhKSB7XG4gICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICB0aGlzLm5hbWUgPSB0aGlzLmRhdGEubmFtZTtcbiAgfVxuXG4gIGlzQWxyZWFkeUNvcnJlY3RseUF0dGFjaGVkKHNsaWRlSG9sZGVyLCBzcmMpIHtcbiAgICByZXR1cm4gKHRoaXMuc2xpZGVIb2xkZXIgPT09IHNsaWRlSG9sZGVyICYmICQoc2xpZGVIb2xkZXIpLmF0dHIoYGRhdGEtbmFtZWApID09PSB0aGlzLm5hbWUgJiYgJChzbGlkZUhvbGRlcikuYXR0cihgZGF0YS1zcmNgKSA9PT0gc3JjKTtcbiAgfVxuXG4gIGF0dGFjaFRvU2xpZGVIb2xkZXIoc2xpZGVIb2xkZXIsIHNyYywgY2IpIHtcbiAgICB0aGlzLnNsaWRlSG9sZGVyID0gc2xpZGVIb2xkZXI7XG4gICAgLy9ub3RpZnkgdGhlIGNvbnRlbnQgaXQgaXMgYmVpbmcgY2xlYXJlZFxuICAgIHRoaXMudHJ5VG9Qb3N0TWVzc2FnZSh7YWN0aW9uOiBgZGVzdHJveWB9KTtcbiAgICAvL2NsZWFyIHRoZSBjdXJyZW50IGNvbnRlbnRcbiAgICB0aGlzLnNsaWRlSG9sZGVyLmlubmVySFRNTCA9IGBgO1xuICAgICQoc2xpZGVIb2xkZXIpLmF0dHIoYGRhdGEtbmFtZWAsIHRoaXMubmFtZSk7XG4gICAgJChzbGlkZUhvbGRlcikuYWRkQ2xhc3MoYGxvYWRpbmdgKTtcblxuICAgICQoc2xpZGVIb2xkZXIpLm9mZihgbG9hZGApO1xuICAgICQoc2xpZGVIb2xkZXIpLm9uKGBsb2FkYCwgKCkgPT4ge1xuICAgICAgdGhpcy50cnlUb1Bvc3RNZXNzYWdlKHtcbiAgICAgICAgYWN0aW9uOiBgc2V0U3RhdGVgLFxuICAgICAgICBzdGF0ZTogdGhpcy5zdGF0ZVxuICAgICAgfSk7XG4gICAgICAkKHNsaWRlSG9sZGVyKS5vZmYoYGxvYWRgKTtcbiAgICB9KTtcblxuICAgIGlmKHNyYyAhPT0gJChzbGlkZUhvbGRlcikuYXR0cihgZGF0YS1zcmNgKSkge1xuICAgICAgLy9mZXRjaCB0aGUgaHRtbFxuICAgICAgZmV0Y2goc3JjKVxuICAgICAgICAudGhlbihyZXN1bHQgPT4gcmVzdWx0LnRleHQoKSlcbiAgICAgICAgLnRoZW4ocmVzdWx0ID0+ICQocmVzdWx0KSlcbiAgICAgICAgLnRoZW4oJHJlc3VsdCA9PiB7XG4gICAgICAgICAgJChzbGlkZUhvbGRlcikuaHRtbCgkcmVzdWx0Lmh0bWwoKSk7XG4gICAgICAgICAgJChzbGlkZUhvbGRlcikucmVtb3ZlQ2xhc3MoYGxvYWRpbmdgKTtcbiAgICAgICAgICBjYigpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgICAgJChzbGlkZUhvbGRlcikucmVtb3ZlQ2xhc3MoYGxvYWRpbmdgKTtcbiAgICAgICAgICBjYigpO1xuICAgICAgICB9KTtcbiAgICAgICQoc2xpZGVIb2xkZXIpLmF0dHIoYGRhdGEtc3JjYCwgc3JjKTtcbiAgICB9XG4gIH1cblxuICB0cnlUb1Bvc3RNZXNzYWdlKG1lc3NhZ2UpIHtcbiAgICBpZighdGhpcy5zbGlkZUhvbGRlcilcbiAgICB7XG4gICAgICBjb25zb2xlLmxvZyhgJHt0aGlzLm5hbWUgIH0gcG9zdCBmYWlsYCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vdHJpZ2dlciB3aXRoIGpxdWVyeVxuICAgICQodGhpcy5zbGlkZUhvbGRlcikudHJpZ2dlcihgbWVzc2FnZS10by1zbGlkZWAsIG1lc3NhZ2UpO1xuICB9XG5cbiAgc2V0U3RhdGUoc3RhdGUpIHtcbiAgICB0aGlzLnN0YXRlID0gc3RhdGU7XG4gICAgdGhpcy50cnlUb1Bvc3RNZXNzYWdlKHtcbiAgICAgIGFjdGlvbjogYHNldFN0YXRlYCxcbiAgICAgIHN0YXRlOiB0aGlzLnN0YXRlXG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCB7Q29uc3RhbnRzfSBmcm9tICcuLi8uLi8uLi8uLi9zaGFyZWQvanMvQ29uc3RhbnRzJztcbmltcG9ydCBDb250ZW50QmFzZSBmcm9tICcuLi8uLi8uLi8uLi9zaGFyZWQvanMvY2xhc3Nlcy9Db250ZW50QmFzZSc7XG5cbmltcG9ydCBMaXZlQ29kZSBmcm9tICcuLi9saXZlLWNvZGUnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBMaXZlQ29kZVNsaWRlIGV4dGVuZHMgQ29udGVudEJhc2Uge1xuXG4gIGNvbnN0cnVjdG9yKCRzbGlkZUhvbGRlciwgY29uZmlnLCByZWFkeUNhbGxiYWNrKSB7XG4gICAgc3VwZXIoJHNsaWRlSG9sZGVyKTtcblxuICAgIGNvbnN0IHJlbW90ZSA9IHJlcXVpcmVOb2RlKGBlbGVjdHJvbmApLnJlbW90ZTtcbiAgICBjb25zdCBjb25maWcyID0gey4uLmNvbmZpZywgcHJlc2VudGF0aW9uUGF0aDogcmVtb3RlLmdldEdsb2JhbChgX19kaXJuYW1lYCl9O1xuXG4gICAgLy9maW5kIGxpdmUgY29kZSBlbGVtZW50XG4gICAgdGhpcy5saXZlQ29kZSA9IG5ldyBMaXZlQ29kZSh0aGlzLiRzbGlkZUhvbGRlci5maW5kKGAubGl2ZS1jb2RlYCksIGNvbmZpZzIsIHJlYWR5Q2FsbGJhY2spO1xuICB9XG5cbiAgbGF5b3V0KCkge1xuICAgIHRoaXMubGl2ZUNvZGUubGF5b3V0KCk7XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIHN1cGVyLmRlc3Ryb3koKTtcbiAgICB0aGlzLmxpdmVDb2RlLmRlc3Ryb3koKTtcbiAgfVxuXG4gIG9uU3RhdGVDaGFuZ2VkKCkge1xuICAgIGlmKHRoaXMuc3RhdGUgPT09IENvbnN0YW50cy5TVEFURV9BQ1RJVkUpIHtcbiAgICAgIHRoaXMubGl2ZUNvZGUucmVzdW1lKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vc3RvcFxuICAgICAgdGhpcy5saXZlQ29kZS5wYXVzZSgpO1xuICAgIH1cbiAgfVxuXG59XG4iLCJpbXBvcnQge0NvbnN0YW50c30gZnJvbSAnLi4vLi4vLi4vLi4vc2hhcmVkL2pzL0NvbnN0YW50cyc7XG5pbXBvcnQgQ29udGVudEJhc2UgZnJvbSAnLi4vLi4vLi4vLi4vc2hhcmVkL2pzL2NsYXNzZXMvQ29udGVudEJhc2UnO1xuXG5jb25zdCBnZXRQYXJhbWV0ZXJCeU5hbWUgPSAodXJsLCBuYW1lKSA9PiB7XG4gIG5hbWUgPSBuYW1lLnJlcGxhY2UoL1tcXFtdLywgYFxcXFxbYCkucmVwbGFjZSgvW1xcXV0vLCBgXFxcXF1gKTtcbiAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKGBbXFxcXD8mXSR7ICBuYW1lICB9PShbXiYjXSopYCksXG4gICAgcmVzdWx0cyA9IHJlZ2V4LmV4ZWModXJsKTtcbiAgcmV0dXJuIHJlc3VsdHMgPT0gbnVsbCA/IGBgIDogZGVjb2RlVVJJQ29tcG9uZW50KHJlc3VsdHNbMV0ucmVwbGFjZSgvXFwrL2csIGAgYCkpO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmlkZW9TbGlkZSBleHRlbmRzIENvbnRlbnRCYXNlIHtcblxuICBjb25zdHJ1Y3Rvcigkc2xpZGVIb2xkZXIpIHtcbiAgICBzdXBlcigkc2xpZGVIb2xkZXIpO1xuXG4gICAgdGhpcy52aWRlb1BsYXlpbmcgPSBmYWxzZTtcbiAgICBjb25zdCB2aWRlb1VybCA9IGdldFBhcmFtZXRlckJ5TmFtZSh0aGlzLnNyYywgYHZpZGVvYCk7XG5cbiAgICAvL2NoZWNrIGZvciBleHRyYSBjb25maWcgaW4gdGhlIGZpbGVuYW1lXG4gICAgbGV0IGxvb3AgPSBmYWxzZTtcbiAgICBsZXQgbXV0ZWQgPSBmYWxzZTtcbiAgICBsZXQgY29udHJvbHMgPSBmYWxzZTtcbiAgICBjb25zdCB2aWRlb1VybFNwbGl0dGVkID0gdmlkZW9Vcmwuc3BsaXQoYC5gKTtcbiAgICB2aWRlb1VybFNwbGl0dGVkLmZvckVhY2gocGFydCA9PiB7XG4gICAgICBpZihwYXJ0ID09PSBgbG9vcGApIHtcbiAgICAgICAgbG9vcCA9IHRydWU7XG4gICAgICB9XG4gICAgICBpZihwYXJ0ID09PSBgbXV0ZWRgKSB7XG4gICAgICAgIG11dGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGlmKHBhcnQgPT09IGBjb250cm9sc2ApIHtcbiAgICAgICAgY29udHJvbHMgPSB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy52aWRlbyA9IHRoaXMuJHNsaWRlSG9sZGVyLmZpbmQoYHZpZGVvYClbMF07XG4gICAgaWYobG9vcCkge1xuICAgICAgJCh0aGlzLnZpZGVvKS5hdHRyKGBsb29wYCwgYGxvb3BgKTtcbiAgICB9XG4gICAgaWYobXV0ZWQpIHtcbiAgICAgICQodGhpcy52aWRlbykuYXR0cihgbXV0ZWRgLCBgbXV0ZWRgKTtcbiAgICB9XG4gICAgaWYoY29udHJvbHMpIHtcbiAgICAgICQodGhpcy52aWRlbykuYXR0cihgY29udHJvbHNgLCBgY29udHJvbHNgKTtcbiAgICB9XG4gICAgJCh0aGlzLnZpZGVvKS5hdHRyKGBzcmNgLCB2aWRlb1VybCk7XG4gICAgdGhpcy5fY2xpY2tIYW5kbGVyID0gKCkgPT4gdGhpcy50b2dnbGVWaWRlb1BsYXlpbmcoKTtcbiAgICAkKHRoaXMudmlkZW8pLm9uKGBjbGlja2AsIHRoaXMuX2NsaWNrSGFuZGxlcik7XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIHN1cGVyLmRlc3Ryb3koKTtcbiAgICAkKHRoaXMudmlkZW8pLm9mZihgY2xpY2tgLCB0aGlzLl9jbGlja0hhbmRsZXIpO1xuICB9XG5cbiAgb25TdGF0ZUNoYW5nZWQoKSB7XG4gICAgaWYodGhpcy5zdGF0ZSA9PT0gQ29uc3RhbnRzLlNUQVRFX0FDVElWRSkge1xuICAgICAgdGhpcy5zZXRWaWRlb1BsYXlpbmcodHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2V0VmlkZW9QbGF5aW5nKGZhbHNlKTtcbiAgICB9XG4gIH1cblxuICBzZXRWaWRlb1BsYXlpbmcodmFsdWUpIHtcbiAgICBpZih2YWx1ZSAhPT0gdGhpcy52aWRlb1BsYXlpbmcpIHtcbiAgICAgIHRoaXMudmlkZW9QbGF5aW5nID0gdmFsdWU7XG4gICAgICBpZih0aGlzLnZpZGVvUGxheWluZykge1xuICAgICAgICB0aGlzLnZpZGVvLnBsYXkoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudmlkZW8ucGF1c2UoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB0b2dnbGVWaWRlb1BsYXlpbmcoKSB7XG4gICAgdGhpcy5zZXRWaWRlb1BsYXlpbmcoIXRoaXMudmlkZW9QbGF5aW5nKTtcbiAgfVxuXG59XG4iLCJpbXBvcnQge0NvbnN0YW50c30gZnJvbSAnLi4vLi4vLi4vLi4vc2hhcmVkL2pzL0NvbnN0YW50cyc7XG5pbXBvcnQgQ29udGVudEJhc2UgZnJvbSAnLi4vLi4vLi4vLi4vc2hhcmVkL2pzL2NsYXNzZXMvQ29udGVudEJhc2UnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBXZWJ2aWV3U2xpZGUgZXh0ZW5kcyBDb250ZW50QmFzZSB7XG5cbiAgY29uc3RydWN0b3IoJHNsaWRlSG9sZGVyKSB7XG4gICAgc3VwZXIoJHNsaWRlSG9sZGVyKTtcblxuICAgIHRoaXMud2Vidmlld011dGVkID0gZmFsc2U7XG5cbiAgICB0aGlzLndlYnZpZXcgPSB0aGlzLiRzbGlkZUhvbGRlci5maW5kKGB3ZWJ2aWV3YClbMF07XG4gIH1cblxuICBkZXN0cm95KCkge1xuICAgIHN1cGVyLmRlc3Ryb3koKTtcbiAgfVxuXG4gIHJlbG9hZCgpIHtcbiAgICB0aGlzLndlYnZpZXcucmVsb2FkKCk7XG4gIH1cblxuICBvcGVuRGV2VG9vbHMoKSB7XG4gICAgdGhpcy53ZWJ2aWV3Lm9wZW5EZXZUb29scygpO1xuICB9XG5cbiAgb25TdGF0ZUNoYW5nZWQoKSB7XG4gICAgaWYodGhpcy5zdGF0ZSA9PT0gQ29uc3RhbnRzLlNUQVRFX0FDVElWRSkge1xuICAgICAgdGhpcy5zZXRXZWJ2aWV3TXV0ZWQoZmFsc2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNldFdlYnZpZXdNdXRlZCh0cnVlKTtcbiAgICB9XG4gIH1cblxuICBzZXRXZWJ2aWV3TXV0ZWQodmFsdWUpIHtcbiAgICBpZih2YWx1ZSAhPT0gdGhpcy53ZWJ2aWV3TXV0ZWQpIHtcbiAgICAgIHRoaXMud2Vidmlld011dGVkID0gdmFsdWU7XG4gICAgICBpZiAoIXRoaXMud2Vidmlldykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZih0aGlzLndlYnZpZXdNdXRlZCkge1xuICAgICAgICB0aGlzLndlYnZpZXcuc2V0QXVkaW9NdXRlZCh0cnVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMud2Vidmlldy5zZXRBdWRpb011dGVkKGZhbHNlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxufVxuIl19"}